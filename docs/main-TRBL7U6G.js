import{$ as Jd,$a as ch,$b as wh,A as ws,Aa as Ha,Ab as te,B as Na,Ba as Os,Bb as Ka,C as pt,Ca as yt,Cb as Ft,D as jt,Da as Ue,Db as Pe,E as cn,Ea as Wt,Eb as ph,F as Vd,Fa as je,Fb as mh,G as ja,Ga as th,Gb as Ls,H as mt,Ha as As,Hb as Fs,I as zd,Ia as nh,Ib as Ya,J as Hd,Ja as qt,Jb as Us,K as Gd,Ka as Ga,Kb as Qa,L as $d,La as Jr,Lb as gh,M as Es,Ma as ir,Mb as Ja,N as $t,Na as sr,Nb as ar,O as dn,Oa as rh,Ob as vh,P as La,Pa as ih,Pb as yh,Q as Fa,Qa as sh,Qb as lr,R as Wd,Ra as oh,Rb as Kt,S as qd,Sa as ah,Sb as Yt,T as Kd,Ta as lh,Tb as ur,U as Cs,Ua as uh,Ub as bh,V as Yd,Va as at,Vb as _h,W as Qd,Wa as Xr,Wb as Ie,X as Ss,Xa as Zr,Xb as Bs,Y as gt,Ya as tt,Yb as Vs,Z as Rs,Za as fe,Zb as cr,_ as Ne,_a as $a,_b as ni,a as X,aa as _e,ab as xs,ac as Eh,b as me,ba as Ts,bb as ks,bc as zs,ca as ae,cb as dh,cc as Hs,d as Yy,da as Ee,db as Wa,e as Qy,ea as Xd,eb as hn,f as ce,fa as ie,fb as kn,g as ys,ga as Ua,gb as Dn,h as jd,ha as ee,hb as hh,i as Tt,ia as Z,ib as fh,j as Pa,ja as Ba,jb as Ds,k as Ma,ka as On,kb as fn,l as Xe,la as Yr,lb as bt,m as Ke,ma as De,mb as Lt,n as Ld,na as Ce,nb as Ps,o as un,oa as Fe,ob as Ms,p as Fd,pa as vt,pb as Q,q as Ze,qa as Zd,qb as J,r as de,ra as rr,rb as ge,s as In,sa as It,sb as qa,t as Ud,ta as eh,tb as xe,u as Bd,ua as An,ub as Ns,v as he,va as Va,vb as or,w as Kr,wa as za,wb as Pn,x as et,xa as xn,xb as js,y as bs,ya as Is,yb as ei,z as _s,za as Qr,zb as ti}from"./chunk-3NA7EP56.js";var fy=Yy((Ta,_d)=>{"use strict";(function(t,e){typeof Ta=="object"&&typeof _d=="object"?_d.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ta=="object"?Ta.Backendless=e():t.Backendless=e()})(self,()=>(()=>{var n={"./src/automations/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./src/utils.js")),f=function(){function w(m){(0,I.default)(this,w),this.app=m}return(0,T.default)(w,[{key:"activateFlow",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error('The "flowName" argument must be provided and must be a string.');case 2:if(!(c!==void 0&&!R.default.isObject(c))){E.next=4;break}throw new Error('The "initialData" argument must be an object.');case 4:return E.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/activate-by-name"),data:{name:p,initialData:c}}));case 5:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()},{key:"activateFlowById",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error('The "flowId" argument must be provided and must be a string.');case 2:if(!(c!==void 0&&!R.default.isObject(c))){E.next=4;break}throw new Error('The "initialData" argument must be an object.');case 4:return E.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/").concat(p,"/activate"),data:c||{}}));case 5:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()},{key:"activateFlowTrigger",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!p||typeof p!="string")){S.next=2;break}throw new Error('The "flowName" argument must be provided and must be a string.');case 2:if(!(!c||typeof c!="string")){S.next=4;break}throw new Error('The "triggerName" argument must be provided and must be a string.');case 4:if(!(y!==void 0&&!R.default.isObject(y))){S.next=6;break}throw new Error('The "data" argument must be an object.');case 6:return S.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlowTrigger(),"/activate-by-name"),query:{flowName:p,triggerName:c},data:y||{}}));case 7:case"end":return S.stop()}},C,this)}));function g(C,p,c){return m.apply(this,arguments)}return g}()},{key:"activateFlowTriggerById",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c,y,E){return u.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!p||typeof p!="string")){v.next=2;break}throw new Error('The "flowId" argument must be provided and must be a string.');case 2:if(!(!c||typeof c!="string")){v.next=4;break}throw new Error('The "triggerId" argument must be provided and must be a string.');case 4:if(!(y!==void 0&&!R.default.isObject(y))){v.next=6;break}throw new Error('The "data" argument must be an object.');case 6:if(!(E!==void 0&&(typeof E!="string"||!E))){v.next=8;break}throw new Error('The "execution" argument must be a non-empty string and must be one of this values: "any", "all" or Execution ID.');case 8:return v.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/").concat(p,"/trigger/").concat(c,"/activate"),data:y||{},query:{execution:E}}));case 9:case"end":return v.stop()}},C,this)}));function g(C,p,c,y){return m.apply(this,arguments)}return g}()}]),w}();s.default=f},"./src/bl/constants.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isExecutionType=s.ExecutionTypes=s.EXECUTION_TYPE_HEADER=void 0;var o="bl-execution-type";s.EXECUTION_TYPE_HEADER=o;var a={SYNC:"sync",ASYNC:"async",ASYNC_LOW_PRIORITY:"async-low-priority"};s.ExecutionTypes=a;var u=Object.keys(a).map(function(I){return a[I]}),_=function(T){return u.includes(T)};s.isExecutionType=_},"./src/bl/custom-services.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=o("./src/bl/constants.js");function w(C,p){var c=Object.keys(C);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(C);p&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(C,E).enumerable})),c.push.apply(c,y)}return c}function m(C){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?w(Object(c),!0).forEach(function(y){(0,_.default)(C,y,c[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach(function(y){Object.defineProperty(C,y,Object.getOwnPropertyDescriptor(c,y))})}return C}var g=function(){function C(p){(0,T.default)(this,C),this.app=p}return(0,R.default)(C,[{key:"invoke",value:function(){var p=(0,I.default)(u.default.mark(function y(E,S,v,h){var l;return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!E||typeof E!="string")){b.next=2;break}throw new Error("Service Name must be provided and must be a string.");case 2:if(!(!S||typeof S!="string")){b.next=4;break}throw new Error("Method Name must be provided and must be a string.");case 4:return typeof h=="string"&&(h={executionType:h}),typeof v=="string"&&(0,f.isExecutionType)(v)&&(h={executionType:v},v=void 0),h=h||{},l=m({},h.httpRequestHeaders),h.executionType&&(l[f.EXECUTION_TYPE_HEADER]=h.executionType),b.abrupt("return",this.app.request.post({url:this.app.urls.blServiceMethod(E,S),data:v,headers:l}));case 10:case"end":return b.stop()}},y,this)}));function c(y,E,S,v){return p.apply(this,arguments)}return c}()}]),C}();s.default=g},"./src/bl/events.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=o("./src/bl/constants.js"),w=function(){function m(g){(0,T.default)(this,m),this.app=g}return(0,R.default)(m,[{key:"dispatch",value:function(){var g=(0,I.default)(u.default.mark(function p(c,y,E){var S;return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!c||typeof c!="string")){h.next=2;break}throw new Error("Event Name must be provided and must be a string.");case 2:if(typeof y=="string"&&(0,f.isExecutionType)(y)&&(E=y,y=void 0),!(y&&((0,_.default)(y)!=="object"||Array.isArray(y)))){h.next=5;break}throw new Error("Event Arguments must be an object.");case 5:return S={},E&&(S[f.EXECUTION_TYPE_HEADER]=E),h.abrupt("return",this.app.request.post({url:this.app.urls.blEvent(c),data:y||{},headers:S}));case 8:case"end":return h.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()}]),m}();s.default=w},"./src/bl/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=o("./src/bl/constants.js"),T=a(o("./src/bl/custom-services.js")),R=a(o("./src/bl/events.js")),f=(0,u.default)(function m(g){(0,_.default)(this,m),this.app=g,this.ExecutionTypes=I.ExecutionTypes,this.CustomServices=new T.default(g),this.Events=new R.default(g)}),w=f;s.default=w},"./src/cache/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./src/utils.js")),f=function(){function w(m){(0,I.default)(this,w),this.app=m,this.parsers={}}return(0,T.default)(w,[{key:"setObjectFactory",value:function(g,C){this.parsers[g]=C}},{key:"parseItem",value:function(g){var C=g&&g.___class;if(C){var p=this.parsers[C];p&&(g=new p(g))}return g}},{key:"stringifyItem",value:function(g){return R.default.isCustomClassInstance(g)&&(g.___class=g.___class||R.default.getClassName(g)),JSON.stringify(g)}},{key:"put",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!p||typeof p!="string")){S.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(y&&(typeof y!="number"||y<0))){S.next=4;break}throw new Error("Cache TimeToLive must be a positive number.");case 4:return S.abrupt("return",this.app.request.put({url:this.app.urls.cacheItem(p),query:{timeout:y},headers:{"Content-Type":"application/json"},data:this.stringifyItem(c)}));case 5:case"end":return S.stop()}},C,this)}));function g(C,p,c){return m.apply(this,arguments)}return g}()},{key:"get",value:function(){var m=(0,_.default)(u.default.mark(function C(p){var c=this;return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return E.abrupt("return",this.app.request.get({url:this.app.urls.cacheItem(p)}).then(function(S){return c.parseItem(S)}));case 3:case"end":return E.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"remove",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.delete({url:this.app.urls.cacheItem(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"contains",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.get({url:this.app.urls.cacheItemCheck(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"expireIn",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(typeof c!="number"||c<=0)){E.next=4;break}throw new Error("Cache Expiration must be provided and must be a number of seconds.");case 4:return E.abrupt("return",this.app.request.put({url:this.app.urls.cacheItemExpireIn(p),query:{timeout:c},data:{}}));case 5:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()},{key:"expireAt",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(c instanceof Date)){E.next=6;break}c=c.getTime(),E.next=8;break;case 6:if(!(typeof c!="number"||c<=0)){E.next=8;break}throw new Error("Cache Expiration must be provided and must be a timestamp or an instance of Date.");case 8:return E.abrupt("return",this.app.request.put({url:this.app.urls.cacheItemExpireAt(p),query:{timestamp:c},data:{}}));case 9:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()}]),w}();s.default=f},"./src/commerce/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=function(){function f(w){(0,I.default)(this,f),this.app=w}return(0,T.default)(f,[{key:"validatePlayPurchase",value:function(){var w=(0,_.default)(u.default.mark(function g(C,p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!C||typeof C!="string")){E.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!p||typeof p!="string")){E.next=4;break}throw new Error("Product Id must be provided and must be a string.");case 4:if(!(!c||typeof c!="string")){E.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return E.abrupt("return",this.app.request.get({url:this.app.urls.commerceValidate(C,p,c)}));case 7:case"end":return E.stop()}},g,this)}));function m(g,C,p){return w.apply(this,arguments)}return m}()},{key:"cancelPlaySubscription",value:function(){var w=(0,_.default)(u.default.mark(function g(C,p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!C||typeof C!="string")){E.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!p||typeof p!="string")){E.next=4;break}throw new Error("Subscription Id must be provided and must be a string.");case 4:if(!(!c||typeof c!="string")){E.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return E.abrupt("return",this.app.request.post({url:this.app.urls.commerceSubCancel(C,p,c)}));case 7:case"end":return E.stop()}},g,this)}));function m(g,C,p){return w.apply(this,arguments)}return m}()},{key:"getPlaySubscriptionStatus",value:function(){var w=(0,_.default)(u.default.mark(function g(C,p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!C||typeof C!="string")){E.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!p||typeof p!="string")){E.next=4;break}throw new Error("Subscription Id must be provided and must be a string.");case 4:if(!(!c||typeof c!="string")){E.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return E.abrupt("return",this.app.request.get({url:this.app.urls.commerceSubStatus(C,p,c)}));case 7:case"end":return E.stop()}},g,this)}));function m(g,C,p){return w.apply(this,arguments)}return m}()}]),f}();s.default=R},"./src/counters/counter.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R,f){if((0,u.default)(this,T),!R||typeof R!="string")throw new Error("Counter Name must be non empty String");this.name=R,this.counters=f}return(0,_.default)(T,[{key:"incrementAndGet",value:function(){return this.counters.incrementAndGet(this.name)}},{key:"getAndIncrement",value:function(){return this.counters.getAndIncrement(this.name)}},{key:"decrementAndGet",value:function(){return this.counters.decrementAndGet(this.name)}},{key:"getAndDecrement",value:function(){return this.counters.getAndDecrement(this.name)}},{key:"reset",value:function(){return this.counters.reset(this.name)}},{key:"get",value:function(){return this.counters.get(this.name)}},{key:"addAndGet",value:function(f){return this.counters.addAndGet(this.name,f)}},{key:"getAndAdd",value:function(f){return this.counters.getAndAdd(this.name,f)}},{key:"compareAndSet",value:function(f,w){return this.counters.compareAndSet(this.name,f,w)}}]),T}();s.default=I},"./src/counters/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./src/counters/counter.js")),f=function(){function w(m){(0,I.default)(this,w),this.app=m}return(0,T.default)(w,[{key:"of",value:function(g){return new R.default(g,this)}},{key:"list",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(p!=null&&typeof p!="string")){y.next=2;break}throw new Error("Counters Pattern can be a string only");case 2:return y.abrupt("return",this.app.request.get({url:this.app.urls.countersList(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"incrementAndGet",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.put({url:this.app.urls.counterIncrementAndGet(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"getAndIncrement",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndIncrement(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"decrementAndGet",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.put({url:this.app.urls.counterDecrementAndGet(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"getAndDecrement",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndDecrement(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"reset",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.put({url:this.app.urls.counterReset(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"get",value:function(){var m=(0,_.default)(u.default.mark(function C(p){return u.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!p||typeof p!="string")){y.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return y.abrupt("return",this.app.request.get({url:this.app.urls.counter(p)}));case 3:case"end":return y.stop()}},C,this)}));function g(C){return m.apply(this,arguments)}return g}()},{key:"addAndGet",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof c=="number"){E.next=4;break}throw new Error("Counter Value must be a number.");case 4:return E.abrupt("return",this.app.request.put({url:this.app.urls.counterAddAndGet(p),query:{value:c}}));case 5:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()},{key:"getAndAdd",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!p||typeof p!="string")){E.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof c=="number"){E.next=4;break}throw new Error("Counter Value must be a number.");case 4:return E.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndAdd(p),query:{value:c}}));case 5:case"end":return E.stop()}},C,this)}));function g(C,p){return m.apply(this,arguments)}return g}()},{key:"compareAndSet",value:function(){var m=(0,_.default)(u.default.mark(function C(p,c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!p||typeof p!="string")){S.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof c=="number"){S.next=4;break}throw new Error("Counter Expected Value must be a number.");case 4:if(typeof y=="number"){S.next=6;break}throw new Error("Counter Updated Value must be a number.");case 6:return S.abrupt("return",this.app.request.put({url:this.app.urls.counterCompareAndSet(p),query:{expected:c,updatedvalue:y}}));case 7:case"end":return S.stop()}},C,this)}));function g(C,p,c){return m.apply(this,arguments)}return g}()}]),w}();s.default=f},"./src/data/data-query-builder.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.PAGING_DEFAULTS=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./src/utils.js"));function R(C,p){var c=Object.keys(C);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(C);p&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(C,E).enumerable})),c.push.apply(c,y)}return c}function f(C){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?R(Object(c),!0).forEach(function(y){(0,u.default)(C,y,c[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(c)):R(Object(c)).forEach(function(y){Object.defineProperty(C,y,Object.getOwnPropertyDescriptor(c,y))})}return C}var w={pageSize:10,offset:0};s.PAGING_DEFAULTS=w;var m=function(){function C(){(0,_.default)(this,C),this.offset=w.offset,this.pageSize=w.pageSize,this.sortBy=null,this.groupBy=null,this.properties=null,this.excludeProps=null,this.whereClause=null,this.havingClause=null,this.relations=null,this.relationsDepth=null,this.relationsPageSize=null,this.distinct=!1}return(0,I.default)(C,[{key:"setPageSize",value:function(c){if(c<=0)throw new Error("Page size must be a positive value.");return this.pageSize=c,this}},{key:"getPageSize",value:function(){return this.pageSize}},{key:"setOffset",value:function(c){if(c<0)throw new Error("Offset cannot have a negative value.");return this.offset=c,this}},{key:"getOffset",value:function(){return this.offset}},{key:"prepareNextPage",value:function(){return this.setOffset(this.offset+this.pageSize),this}},{key:"preparePreviousPage",value:function(){return this.setOffset(Math.max(this.offset-this.pageSize,0)),this}},{key:"getProperties",value:function(){return this.properties}},{key:"setProperties",value:function(c){return this.properties=T.default.castArray(c),this}},{key:"addProperty",value:function(c){return this.properties=this.properties||[],this.properties.push(c),this}},{key:"addProperties",value:function(){for(var c=this,y=arguments.length,E=new Array(y),S=0;S<y;S++)E[S]=arguments[S];return E.forEach(function(v){T.default.castArray(v).forEach(function(h){return c.addProperty(h)})}),this}},{key:"addAllProperties",value:function(){return this.addProperty("*"),this}},{key:"excludeProperty",value:function(c){return this.excludeProps=this.excludeProps||[],this.excludeProps.push(c),this}},{key:"excludeProperties",value:function(){for(var c=this,y=arguments.length,E=new Array(y),S=0;S<y;S++)E[S]=arguments[S];return E.forEach(function(v){T.default.castArray(v).forEach(function(h){return c.excludeProperty(h)})}),this}},{key:"getExcludeProperties",value:function(){return this.excludeProps}},{key:"getWhereClause",value:function(){return this.whereClause}},{key:"setWhereClause",value:function(c){return this.whereClause=c,this}},{key:"getHavingClause",value:function(){return this.havingClause}},{key:"setHavingClause",value:function(c){return this.havingClause=c,this}},{key:"getSortBy",value:function(){return this.sortBy}},{key:"setSortBy",value:function(c){return this.sortBy=T.default.castArray(c),this}},{key:"getGroupBy",value:function(){return this.groupBy}},{key:"setGroupBy",value:function(c){return this.groupBy=T.default.castArray(c),this}},{key:"getRelated",value:function(){return this.relations}},{key:"setRelated",value:function(c){return this.relations=T.default.castArray(c),this}},{key:"addRelated",value:function(c){return this.relations=(this.relations||[]).concat(c),this}},{key:"setRelationsDepth",value:function(c){return this.relationsDepth=c,this}},{key:"getRelationsDepth",value:function(){return this.relationsDepth}},{key:"setRelationsPageSize",value:function(c){return this.relationsPageSize=c,this}},{key:"getRelationsPageSize",value:function(){return this.relationsPageSize}},{key:"setDistinct",value:function(c){return this.distinct=!!c,this}},{key:"getDistinct",value:function(){return this.distinct}},{key:"setFileReferencePrefix",value:function(c){return this.fileReferencePrefix=c,this}},{key:"getFileReferencePrefix",value:function(){return this.fileReferencePrefix}},{key:"toJSON",value:function(){return{pageSize:this.pageSize,offset:this.offset,properties:this.properties,excludeProps:this.excludeProps,where:this.whereClause,having:this.havingClause,sortBy:this.sortBy,groupBy:this.groupBy,relations:this.relations,relationsDepth:this.relationsDepth,relationsPageSize:this.relationsPageSize,distinct:this.distinct,fileReferencePrefix:this.fileReferencePrefix}}}],[{key:"create",value:function(){return new this}},{key:"toRequestBody",value:function(c){var y=c instanceof C?c.toJSON():c?f({},c):{};return Object.keys(y).forEach(function(E){Array.isArray(y[E])?E!=="groupPath"&&(y[E]=y[E].join(",")):y[E]==null&&delete y[E]}),y.properties&&(y.props=y.properties,delete y.properties),y.relations&&(y.loadRelations=y.relations,delete y.relations),y}},{key:"toQueryString",value:function(c){if(c){c instanceof C&&(c=c.toJSON());var y=[];return c.pageSize>0&&y.push("pageSize=".concat(c.pageSize)),c.offset>0&&y.push("offset=".concat(c.offset)),Array.isArray(c.properties)&&c.properties.length&&c.properties.map(function(E){y.push("property=".concat(encodeURIComponent(E)))}),Array.isArray(c.excludeProps)&&c.excludeProps.length&&y.push("excludeProps=".concat(g(c.excludeProps))),c.where&&y.push("where=".concat(encodeURIComponent(c.where))),c.having&&y.push("having=".concat(encodeURIComponent(c.having))),c.sortBy&&y.push(Array.isArray(c.sortBy)?"sortBy=".concat(g(c.sortBy)):"sortBy=".concat(encodeURIComponent(c.sortBy))),c.groupBy&&y.push(Array.isArray(c.groupBy)?"groupBy=".concat(g(c.groupBy)):"groupBy=".concat(encodeURIComponent(c.groupBy))),Array.isArray(c.relations)&&y.push(c.relations.length?"loadRelations=".concat(g(c.relations)):"loadRelations=*"),c.relationsDepth>0&&y.push("relationsDepth=".concat(c.relationsDepth)),c.relationsPageSize>0&&y.push("relationsPageSize=".concat(c.relationsPageSize)),c.distinct&&y.push("distinct=".concat(c.distinct)),c.fileReferencePrefix&&y.push("fileReferencePrefix=".concat(encodeURIComponent(c.fileReferencePrefix))),y.join("&")}}}]),C}();s.default=m;function g(C){return C.map(function(p){return encodeURIComponent(p)}).join(",")}},"./src/data/geo/constants.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.GeoTypes=void 0;var o={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon"};s.GeoTypes=o},"./src/data/geo/geo-constructor.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.GEO_CLASSES=void 0,s.default=S;var u=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=a(o("./node_modules/@babel/runtime/helpers/toArray.js")),I=a(o("./node_modules/@babel/runtime/helpers/slicedToArray.js")),T=a(o("./src/data/geo/point.js")),R=a(o("./src/data/geo/linestring.js")),f=a(o("./src/data/geo/polygon.js")),w=o("./src/data/geo/constants.js"),m=a(o("./src/data/geo/spatial-reference-system.js")),g,C=["com.backendless.persistence.Polygon","com.backendless.persistence.LineString","com.backendless.persistence.Point","com.backendless.persistence.Geometry"];s.GEO_CLASSES=C;var p=function(h,l){var d=(0,I.default)(h,2),b=d[0],O=d[1];return new T.default(l).setX(b).setY(O)},c=function(h,l){var d=h.map(function(b){return p(b,l)});return new R.default(d,l)},y=function(h,l){var d=h.map(function(N){return c(N,l)}),b=(0,_.default)(d),O=b[0],D=b.slice(1);return new f.default(O,D,l)},E=(g={},(0,u.default)(g,w.GeoTypes.POINT,p),(0,u.default)(g,w.GeoTypes.LINE_STRING,c),(0,u.default)(g,w.GeoTypes.POLYGON,y),g);function S(v,h){var l=E[v.type];if(h=h||m.default.valueBySRSId(v.srsId),l)return l(v.coordinates,h);throw new Error("There is no constructor for ".concat(v.type))}},"./src/data/geo/geo-json-parser.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/data/geo/geo-constructor.js")),T=function(){function R(f){(0,u.default)(this,R),this.srs=f}return(0,_.default)(R,[{key:"read",value:function(w){return(0,I.default)(w,this.srs)}}]),R}();s.default=T},"./src/data/geo/geometry.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/data/geo/spatial-reference-system.js")),T=a(o("./src/data/geo/geo-json-parser.js")),R=a(o("./src/data/geo/wkt-parser.js")),f=function(){function m(g){(0,u.default)(this,m),this.srs=g||I.default.DEFAULT}return(0,_.default)(m,[{key:"getSRS",value:function(){return this.srs}},{key:"getGeojsonType",value:function(){}},{key:"getWktType",value:function(){}},{key:"wktCoordinatePairs",value:function(){}},{key:"jsonCoordinatePairs",value:function(){}},{key:"asGeoJSON",value:function(){return{type:this.getGeojsonType(),coordinates:this.jsonCoordinatePairs()}}},{key:"asWKT",value:function(){return this.getWktType()+"("+this.wktCoordinatePairs()+")"}},{key:"toJSON",value:function(){return this.asGeoJSON()}},{key:"toString",value:function(){return"'"+this.asWKT()+"'"}}],[{key:"fromWKT",value:function(C,p){return new R.default(p).read(C)}},{key:"fromGeoJSON",value:function(C,p){return new T.default(p).read(C)}}]),m}(),w=f;s.default=w},"./src/data/geo/linestring.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./src/data/geo/geometry.js")),w=o("./src/data/geo/constants.js");function m(E){var S=g();return function(){var h=(0,R.default)(E),l;if(S){var d=(0,R.default)(this).constructor;l=Reflect.construct(h,arguments,d)}else l=h.apply(this,arguments);return(0,T.default)(this,l)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=w.GeoTypes.LINE_STRING,p=C.toUpperCase(),c=function(E){(0,I.default)(v,E);var S=m(v);function v(h,l){var d;return(0,u.default)(this,v),d=S.call(this,l),d.points=h||[],d}return(0,_.default)(v,[{key:"getPoints",value:function(){return this.points}},{key:"setPoints",value:function(l){return this.points=l,this}},{key:"getGeojsonType",value:function(){return C}},{key:"getWktType",value:function(){return p}},{key:"jsonCoordinatePairs",value:function(){var l=[];return this.getPoints().forEach(function(d){l.push([d.getX(),d.getY()])}),l}},{key:"wktCoordinatePairs",value:function(){return this.getPoints().map(function(l){return"".concat(l.getX()," ").concat(l.getY())}).join(",")}}]),v}(f.default),y=c;s.default=y},"./src/data/geo/point.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./src/data/geo/geometry.js")),w=o("./src/data/geo/constants.js");function m(E){var S=g();return function(){var h=(0,R.default)(E),l;if(S){var d=(0,R.default)(this).constructor;l=Reflect.construct(h,arguments,d)}else l=h.apply(this,arguments);return(0,T.default)(this,l)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=w.GeoTypes.POINT,p=C.toUpperCase(),c=1e-9,y=function(E){(0,I.default)(v,E);var S=m(v);function v(h){return(0,u.default)(this,v),S.call(this,h)}return(0,_.default)(v,[{key:"lng",get:function(){return this.getLongitude()},set:function(l){this.setLongitude(l)}},{key:"lat",get:function(){return this.getLatitude()},set:function(l){this.setLatitude(l)}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getLongitude",value:function(){return this.x}},{key:"getLatitude",value:function(){return this.y}},{key:"setX",value:function(l){return this.x=l,this}},{key:"setY",value:function(l){return this.y=l,this}},{key:"setLongitude",value:function(l){return this.setX(l)}},{key:"setLatitude",value:function(l){return this.setY(l)}},{key:"getGeojsonType",value:function(){return C}},{key:"getWktType",value:function(){return p}},{key:"wktCoordinatePairs",value:function(){return"".concat(this.x," ").concat(this.y)}},{key:"jsonCoordinatePairs",value:function(){return[this.x,this.y]}},{key:"equals",value:function(l){return this===l?!0:l instanceof v?Math.abs(l.x-this.x)<c&&Math.abs(l.y-this.y)<c&&this.srs===l.srs:!1}}]),v}(f.default);s.default=y},"./src/data/geo/polygon.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./src/data/geo/geometry.js")),m=a(o("./src/data/geo/linestring.js")),g=o("./src/data/geo/constants.js");function C(v){var h=p();return function(){var d=(0,f.default)(v),b;if(h){var O=(0,f.default)(this).constructor;b=Reflect.construct(d,arguments,O)}else b=d.apply(this,arguments);return(0,R.default)(this,b)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var c=g.GeoTypes.POLYGON,y=c.toUpperCase(),E=function(v){(0,T.default)(l,v);var h=C(l);function l(d,b,O){var D;return(0,_.default)(this,l),D=h.call(this,O),D.setBoundary(d),D.setHoles(b),D}return(0,I.default)(l,[{key:"getBoundary",value:function(){return this.boundary}},{key:"setBoundary",value:function(b){if(!b)throw new Error("The 'boundary' argument is required.");return b instanceof m.default||(b=new m.default(b,this.srs)),this.boundary=b,this}},{key:"getHoles",value:function(){return this.holes}},{key:"setHoles",value:function(b){return this.holes=b||[],this}},{key:"getGeojsonType",value:function(){return c}},{key:"getWktType",value:function(){return y}},{key:"jsonCoordinatePairs",value:function(){var b=[];this.getBoundary().getPoints().forEach(function(D){b.push([D.getX(),D.getY()])});var O=this.holes.map(function(D){return D.getPoints().map(function(N){return[N.getX(),N.getY()]})});return[b].concat((0,u.default)(O))}},{key:"wktCoordinatePairs",value:function(){var b=[this.getBoundary().wktCoordinatePairs()];this.holes.forEach(function(D){return b.push(D.wktCoordinatePairs())});var O=function(N){return"("+N+")"};return b.map(O).join(",")}}]),l}(w.default),S=E;s.default=S},"./src/data/geo/spatial-reference-system.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function p(c){var y=c.srsId,E=c.name;(0,u.default)(this,p),this.srsId=y,this.name=E}return(0,_.default)(p,[{key:"getSRSId",value:function(){return this.srsId}},{key:"getName",value:function(){return this.name}},{key:"toString",value:function(){return this.getName()+"("+this.getSRSId()+")"}}]),p}(),T=new I({srsId:0,name:"Cartesian"}),R=new I({srsId:4200,name:"Pulkovo 1995"}),f=new I({srsId:4326,name:"WGS 84"}),w=new I({srsId:3857,name:"WGS 84 / Pseudo-Mercator"}),m=new I({srsId:3395,name:"WGS 84 / World Mercator"}),g={CARTESIAN:T,PULKOVO_1995:R,WGS84:f,WGS84_PSEUDO_MERCATOR:w,WGS84_WORLD_MERCATOR:m,DEFAULT:f,SRS_MAP:{},valueBySRSId:function(c){return g.SRS_MAP[c]}};Object.keys(g).forEach(function(p){if(g[p]instanceof I){var c=g[p];g.SRS_MAP[c.getSRSId()]=c}});var C=g;s.default=C},"./src/data/geo/wkt-parser.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/data/geo/wkt-to-geojson.js")),T=a(o("./src/data/geo/geo-constructor.js")),R=function(){function f(w){(0,u.default)(this,f),this.srs=w}return(0,_.default)(f,[{key:"read",value:function(m){var g=(0,I.default)(m);if(!g)throw new Error("WKT string is invalid");return(0,T.default)(g,this.srs)}}]),f}();s.default=R},"./src/data/geo/wkt-to-geojson.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=o("./src/data/geo/constants.js"),I=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,T=new RegExp("^"+I.source+"(\\s"+I.source+"){1,}"),R=function(m){var g=0,C=function(l){var d=m.substring(g).match(l);return d?(g+=d[0].length,d[0]):null},p=function(){return C(/^\s*/)},c=function(){p();for(var l=0,d=[],b=[d],O=d,D;D=C(/^(\()/)||C(/^(\))/)||C(/^(,)/)||C(T);){if(D==="(")b.push(O),O=[],b[b.length-1].push(O),l++;else if(D===")"){if(O.length===0||(O=b.pop(),!O))return null;if(l--,l===0)break}else if(D===",")O=[],b[b.length-1].push(O);else if(!D.split(/\s/g).some(isNaN))Array.prototype.push.apply(O,D.split(/\s/g).map(parseFloat));else return null;p()}return l!==0?null:d},y=function(){for(var l=[],d,b;b=C(T)||C(/^(,)/);)b===","?(l.push(d),d=[]):b.split(/\s/g).some(isNaN)||(d||(d=[]),d=[].concat((0,u.default)(d),(0,u.default)(b.split(/\s/g).map(parseFloat)))),p();if(d)l.push(d);else return null;return l.length?l:null},E=function(){if(!C(/^(point(\sz)?)/i)||(p(),!C(/^(\()/)))return null;p();var l=y();return!l||!C(/^(\))/)?null:{type:_.GeoTypes.POINT,coordinates:l[0]}},S=function(){if(!C(/^(linestring(\sz)?)/i)||(p(),!C(/^(\()/)))return null;var l=y();return!l||!C(/^(\))/)?null:{type:_.GeoTypes.LINE_STRING,coordinates:l}},v=function(){if(!C(/^(polygon(\sz)?)/i))return null;p();var l=c();return l?{type:_.GeoTypes.POLYGON,coordinates:l}:null};return E()||S()||v()},f=R;s.default=f},"./src/data/group-query-builder.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var _=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/get.js")),R=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),f=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),w=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=a(o("./src/utils.js")),g=p(o("./src/data/data-query-builder.js"));function C(S){if(typeof WeakMap!="function")return null;var v=new WeakMap,h=new WeakMap;return(C=function(d){return d?h:v})(S)}function p(S,v){if(!v&&S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var h=C(v);if(h&&h.has(S))return h.get(S);var l={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in S)if(b!=="default"&&Object.prototype.hasOwnProperty.call(S,b)){var O=d?Object.getOwnPropertyDescriptor(S,b):null;O&&(O.get||O.set)?Object.defineProperty(l,b,O):l[b]=S[b]}return l.default=S,h&&h.set(S,l),l}function c(S){var v=y();return function(){var l=(0,w.default)(S),d;if(v){var b=(0,w.default)(this).constructor;d=Reflect.construct(l,arguments,b)}else d=l.apply(this,arguments);return(0,f.default)(this,d)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var E=function(S){(0,R.default)(h,S);var v=c(h);function h(){var l;return(0,_.default)(this,h),l=v.call(this),l.groupPageSize=g.PAGING_DEFAULTS.pageSize,l.recordsPageSize=g.PAGING_DEFAULTS.pageSize,l.groupDepth=null,l.groupPath=null,l}return(0,I.default)(h,[{key:"setGroupPageSize",value:function(d){if(d<=0)throw new Error("Group page size must be a positive value.");return this.groupPageSize=d,this}},{key:"getGroupPageSize",value:function(){return this.groupPageSize}},{key:"setRecordsPageSize",value:function(d){if(d<=0)throw new Error("Records page size must be a positive value.");return this.recordsPageSize=d,this}},{key:"getRecordsPageSize",value:function(){return this.recordsPageSize}},{key:"setGroupDepth",value:function(d){if(d<0)throw new Error("Group depth cannot have a negative value.");return this.groupDepth=d,this}},{key:"getGroupDepth",value:function(){return this.groupDepth}},{key:"getGroupPath",value:function(){return this.groupPath}},{key:"addGroupPath",value:function(d){return this.groupPath=(this.groupPath||[]).concat(d),this}},{key:"setGroupPath",value:function(d){return this.groupPath=m.default.castArray(d),this}},{key:"toJSON",value:function(){var d=(0,T.default)((0,w.default)(h.prototype),"toJSON",this).call(this);return d.groupDepth=this.getGroupDepth(),d.groupPath=this.getGroupPath(),d.groupPageSize=this.getGroupPageSize(),d.recordsPageSize=this.getRecordsPageSize(),d}}]),h}(g.default);s.default=E},"./src/data/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=a(o("./src/utils.js")),w=a(o("./src/users/user.js")),m=a(o("./src/data/store.js")),g=a(o("./src/data/data-query-builder.js")),C=a(o("./src/data/group-query-builder.js")),p=a(o("./src/data/load-relations-query-builder.js")),c=a(o("./src/data/json-update-builder.js")),y=a(o("./src/data/geo/point.js")),E=a(o("./src/data/geo/linestring.js")),S=a(o("./src/data/geo/polygon.js")),v=a(o("./src/data/geo/geometry.js")),h=a(o("./src/data/geo/spatial-reference-system.js")),l=a(o("./src/data/geo/wkt-parser.js")),d=a(o("./src/data/geo/geo-json-parser.js")),b=a(o("./src/data/persmission.js")),O=function(){function D(N){(0,T.default)(this,D),this.app=N,this.classToTableMap=(0,I.default)({},w.default.className,w.default),this.Permissions={FIND:new b.default("FIND",N),REMOVE:new b.default("REMOVE",N),UPDATE:new b.default("UPDATE",N)},this.QueryBuilder=g.default,this.GroupQueryBuilder=C.default,this.LoadRelationsQueryBuilder=p.default,this.JSONUpdateBuilder=c.default,this.Point=y.default,this.LineString=E.default,this.Polygon=S.default,this.Geometry=v.default,this.GeoJSONParser=d.default,this.WKTParser=l.default,this.SpatialReferenceSystem=h.default}return(0,R.default)(D,[{key:"of",value:function(L){return new m.default(L,this)}},{key:"describe",value:function(){var N=(0,_.default)(u.default.mark(function B(G){return u.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return G=typeof G=="string"?G:f.default.getClassName(G),M.abrupt("return",this.app.request.get({url:this.app.urls.dataTableProps(G)}));case 2:case"end":return M.stop()}},B,this)}));function L(B){return N.apply(this,arguments)}return L}()},{key:"getTableNameById",value:function(){var N=(0,_.default)(u.default.mark(function B(G){return u.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",this.app.request.get({url:this.app.urls.dataTableNameById(G)}));case 1:case"end":return M.stop()}},B,this)}));function L(B){return N.apply(this,arguments)}return L}()},{key:"mapTableToClass",value:function(L,B){if(typeof L=="function"&&(B=L,L=f.default.getClassName(B)),!L||typeof L!="string")throw new Error("Table Name must be provided and must be a string.");if(!B||typeof B!="function")throw new Error("Class must be provided and must be a constructor function.");this.classToTableMap[L]=B}}]),D}();s.default=O},"./src/data/json-update-builder.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),_=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js"));function f(p){var c=w();return function(){var E=(0,I.default)(p),S;if(c){var v=(0,I.default)(this).constructor;S=Reflect.construct(E,arguments,v)}else S=E.apply(this,arguments);return(0,_.default)(this,S)}}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var m={SET:"JSON_SET",INSERT:"JSON_INSERT",REPLACE:"JSON_REPLACE",REMOVE:"JSON_REMOVE",ARRAY_APPEND:"JSON_ARRAY_APPEND",ARRAY_INSERT:"JSON_ARRAY_INSERT"},g=function(){function p(c){(0,T.default)(this,p),this.operationName=c,this.args={}}return(0,R.default)(p,[{key:"addArgument",value:function(y,E){if(E===void 0)throw new Error("You have to specify function's second argument");return this.args[y]=E,this}},{key:"toJSON",value:function(){return this.validate(),{___operation:this.operationName,args:this.args}}},{key:"create",value:function(){return this.toJSON()}},{key:"validate",value:function(){if(!Object.keys(this.args).length)throw new Error("You have to add at least one argument")}}],[{key:"SET",value:function(){return new p(m.SET)}},{key:"INSERT",value:function(){return new p(m.INSERT)}},{key:"REPLACE",value:function(){return new p(m.REPLACE)}},{key:"REMOVE",value:function(){return new C}},{key:"ARRAY_APPEND",value:function(){return new p(m.ARRAY_APPEND)}},{key:"ARRAY_INSERT",value:function(){return new p(m.ARRAY_INSERT)}}]),p}();s.default=g;var C=function(p){(0,u.default)(y,p);var c=f(y);function y(){var E;return(0,T.default)(this,y),E=c.call(this,m.REMOVE),E.args=[],E}return(0,R.default)(y,[{key:"addArgument",value:function(S){return this.args.push(S),this}},{key:"validate",value:function(){if(!this.args.length)throw new Error("You have to add at least one argument")}}]),y}(g)},"./src/data/load-relations-query-builder.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/get.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./src/data/data-query-builder.js"));function m(p){var c=g();return function(){var E=(0,f.default)(p),S;if(c){var v=(0,f.default)(this).constructor;S=Reflect.construct(E,arguments,v)}else S=E.apply(this,arguments);return(0,R.default)(this,S)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=function(p){(0,T.default)(y,p);var c=m(y);function y(E){var S;return(0,u.default)(this,y),S=c.call(this),S.relationModel=E,S.relationName=null,S}return(0,_.default)(y,[{key:"setRelationName",value:function(S){return this.relationName=S,this}},{key:"getRelationName",value:function(){return this.relationName}},{key:"setRelationModel",value:function(S){return this.relationModel=S,this}},{key:"getRelationModel",value:function(){return this.relationModel}},{key:"toJSON",value:function(){var S=(0,I.default)((0,f.default)(y.prototype),"toJSON",this).call(this);return S.relationName=this.getRelationName(),S.relationModel=this.getRelationModel(),S}}],[{key:"of",value:function(S){return new this(S)}}]),y}(w.default);s.default=C},"./src/data/persmission.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),w=a(o("./src/persmission.js"));function m(p){var c=g();return function(){var E=(0,R.default)(p),S;if(c){var v=(0,R.default)(this).constructor;S=Reflect.construct(E,arguments,v)}else S=E.apply(this,arguments);return(0,T.default)(this,S)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=function(p){(0,I.default)(y,p);var c=m(y);function y(){return(0,u.default)(this,y),c.apply(this,arguments)}return(0,_.default)(y,[{key:"getRequestURL",value:function(S,v){if(!v.___class||!v.objectId)throw new Error('"dataObject.___class" and "dataObject.objectId" need to be specified');return this.app.urls.dataObjectPermission(v.___class,S,v.objectId)}}]),y}(w.default);s.default=C,(0,f.default)(C,"BACKWARD_COMPATIBILITY_LABEL","Backendless.Data.Permissions.{FIND|REMOVE|UPDATE}")},"./src/data/rt-handlers.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/get.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=o("./src/rt.js");function m(E){var S=g();return function(){var h=(0,f.default)(E),l;if(S){var d=(0,f.default)(this).constructor;l=Reflect.construct(h,arguments,d)}else l=h.apply(this,arguments);return(0,R.default)(this,l)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C={CREATED:"created",UPDATED:"updated",DELETED:"deleted",UPSERTED:"upserted",BULK_CREATED:"bulk-created",BULK_UPDATED:"bulk-updated",BULK_DELETED:"bulk-deleted",BULK_UPSERTED:"bulk-upserted"},p={ADD:"add",SET:"set",DELETE:"delete"},c=[C.CREATED,C.UPDATED,C.DELETED,C.UPSERTED],y=function(E){(0,T.default)(v,E);var S=m(v);function v(h){var l;return(0,u.default)(this,v),l=S.call(this),l.dataStore=h,l.app=h.app,l}return(0,_.default)(v,[{key:"getSubscriptionOptions",value:function(){return{tableName:this.dataStore.className}}},{key:"addCreateListener",value:function(l,d,b){this.addChangesListener(C.CREATED,l,d,b)}},{key:"removeCreateListeners",value:function(l,d){this.removeChangesListeners(C.CREATED,l,d)}},{key:"removeCreateListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeCreateListeners(void 0,l)}},{key:"addUpsertListener",value:function(l,d,b){this.addChangesListener(C.UPSERTED,l,d,b)}},{key:"removeUpsertListeners",value:function(l,d){this.removeChangesListeners(C.UPSERTED,l,d)}},{key:"removeUpsertListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeUpsertListeners(void 0,l)}},{key:"addUpdateListener",value:function(l,d,b){this.addChangesListener(C.UPDATED,l,d,b)}},{key:"removeUpdateListeners",value:function(l,d){this.removeChangesListeners(C.UPDATED,l,d)}},{key:"removeUpdateListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeUpdateListeners(void 0,l)}},{key:"addDeleteListener",value:function(l,d,b){this.addChangesListener(C.DELETED,l,d,b)}},{key:"removeDeleteListeners",value:function(l,d){this.removeChangesListeners(C.DELETED,l,d)}},{key:"removeDeleteListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeDeleteListeners(void 0,l)}},{key:"addBulkCreateListener",value:function(l,d,b){this.addChangesListener(C.BULK_CREATED,l,d,b)}},{key:"removeBulkCreateListeners",value:function(){this.removeChangesListeners(C.BULK_CREATED)}},{key:"removeBulkCreateListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeChangesListeners(C.BULK_CREATED,void 0,l)}},{key:"addBulkUpdateListener",value:function(l,d,b){this.addChangesListener(C.BULK_UPDATED,l,d,b)}},{key:"removeBulkUpdateListeners",value:function(l,d){this.removeChangesListeners(C.BULK_UPDATED,l,d)}},{key:"removeBulkUpdateListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeBulkUpdateListeners(void 0,l)}},{key:"addBulkDeleteListener",value:function(l,d,b){this.addChangesListener(C.BULK_DELETED,l,d,b)}},{key:"removeBulkDeleteListeners",value:function(l,d){this.removeChangesListeners(C.BULK_DELETED,l,d)}},{key:"removeBulkDeleteListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeBulkDeleteListeners(void 0,l)}},{key:"addBulkUpsertListener",value:function(l,d,b){this.addChangesListener(C.BULK_UPSERTED,l,d,b)}},{key:"removeBulkUpsertListeners",value:function(){this.removeChangesListeners(C.BULK_UPSERTED)}},{key:"removeBulkUpsertListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeChangesListeners(C.BULK_UPSERTED,void 0,l)}},{key:"addSetRelationListener",value:function(l,d,b,O){this.addRelationsChangesListener(p.SET,l,d,b,O)}},{key:"removeSetRelationListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(p.SET,void 0,l)}},{key:"removeSetRelationListeners",value:function(l,d){this.removeRelationsChangesListeners(p.SET,l,d)}},{key:"addAddRelationListener",value:function(l,d,b,O){this.addRelationsChangesListener(p.ADD,l,d,b,O)}},{key:"removeAddRelationListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(p.ADD,void 0,l)}},{key:"removeAddRelationListeners",value:function(l,d){this.removeRelationsChangesListeners(p.ADD,l,d)}},{key:"addDeleteRelationListener",value:function(l,d,b,O){this.addRelationsChangesListener(p.DELETE,l,d,b,O)}},{key:"removeDeleteRelationListener",value:function(l){if(!l||typeof l!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(p.DELETE,void 0,l)}},{key:"removeDeleteRelationListeners",value:function(l,d){this.removeRelationsChangesListeners(p.DELETE,l,d)}},{key:"addChangesListener",value:function(l,d,b,O){if(typeof d=="function"&&(O=b,b=d,d=void 0),typeof b!="function")throw new Error("Listener Function must be passed.");this.addSubscription(l,this.app.RT.subscriptions.onObjectsChanges,{callback:b,onError:O,parser:c.includes(l)?this.parseObjectToInstance.bind(this):void 0,params:{event:l,whereClause:d}})}},{key:"removeChangesListeners",value:function(l,d,b){typeof d=="function"&&(b=d,d=void 0);var O=function(N){var L=N.params;return d?L.whereClause===d:b?N.callback===b:!0};this.stopSubscription(l,{matcher:O})}},{key:"addRelationsChangesListener",value:function(l,d,b,O,D){if(!d||typeof d!="string")throw new Error("Relation Column Name must be a string.");if(typeof b=="function"&&(D=O,O=b,b=void 0),typeof O!="function")throw new Error("Listener Function must be passed.");if(b){if(!Array.isArray(b))throw new Error("Parent Objects must be an array");b=b.map(function(N){return N.objectId||N})}this.addSubscription(l,this.app.RT.subscriptions.onRelationsChanges,{callback:O,onError:D,params:{event:l,relationColumnName:d,parentObjects:b}})}},{key:"removeRelationsChangesListeners",value:function(l,d,b){typeof d=="function"&&(b=d,d=void 0);var O=function(N){var L=N.params;return d?L.relationColumnName===d:b?N.callback===b:!0};this.stopSubscription(l,{matcher:O})}},{key:"removeAllListeners",value:function(){(0,I.default)((0,f.default)(v.prototype),"removeAllListeners",this).call(this)}},{key:"parseObjectToInstance",value:function(l){return this.dataStore.parseResponse(l)}}]),v}(w.RTListeners);s.default=y},"./src/data/store.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var _=a(o("./node_modules/@babel/runtime/helpers/slicedToArray.js")),I=a(o("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),T=a(o("./node_modules/@babel/runtime/regenerator/index.js")),R=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),f=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),w=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),m=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),g=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),C=a(o("./src/utils.js")),p=a(o("./src/expression.js")),c=a(o("./src/data/rt-handlers.js")),y=a(o("./src/data/data-query-builder.js")),E=a(o("./src/data/load-relations-query-builder.js")),S=a(o("./src/data/json-update-builder.js")),v=b(o("./src/data/geo/geo-constructor.js")),h=a(o("./src/data/geo/geometry.js")),l=["relationName","relationModel"];function d(V){if(typeof WeakMap!="function")return null;var M=new WeakMap,P=new WeakMap;return(d=function(A){return A?P:M})(V)}function b(V,M){if(!M&&V&&V.__esModule)return V;if(V===null||u(V)!=="object"&&typeof V!="function")return{default:V};var P=d(M);if(P&&P.has(V))return P.get(V);var x={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in V)if(k!=="default"&&Object.prototype.hasOwnProperty.call(V,k)){var F=A?Object.getOwnPropertyDescriptor(V,k):null;F&&(F.get||F.set)?Object.defineProperty(x,k,F):x[k]=V[k]}return x.default=V,P&&P.set(V,x),x}function O(V,M){var P=Object.keys(V);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(V);M&&(x=x.filter(function(A){return Object.getOwnPropertyDescriptor(V,A).enumerable})),P.push.apply(P,x)}return P}function D(V){for(var M=1;M<arguments.length;M++){var P=arguments[M]!=null?arguments[M]:{};M%2?O(Object(P),!0).forEach(function(x){(0,g.default)(V,x,P[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(P)):O(Object(P)).forEach(function(x){Object.defineProperty(V,x,Object.getOwnPropertyDescriptor(P,x))})}return V}function N(V,M){var P=V instanceof y.default?V.toJSON():V?D({},V):{};P.pageSize=1,P.offset=0;var x=P.sortBy;return x||(P.sortBy=["created ".concat(M)]),y.default.toRequestBody(P)}var L=function(){function V(M,P){if((0,w.default)(this,V),this.app=P.app,this.classToTableMap=P.classToTableMap,typeof M=="string"?(this.className=M,this.model=this.classToTableMap[this.className]):(this.className=C.default.getClassName(M),this.model=this.classToTableMap[this.className]||M),!this.className)throw new Error("Class name should be specified")}return(0,m.default)(V,[{key:"rt",value:function(){return this.rtHandlers=this.rtHandlers||new c.default(this)}},{key:"save",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k){var F=this,j;return T.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return j=k?this.app.urls.dataTableUpsert(this.className):this.app.urls.dataTable(this.className),z.abrupt("return",this.app.request.put({url:j,data:B(A)}).then(function(H){return F.parseResponse(H)}));case 2:case"end":return z.stop()}},x,this)}));function P(x,A){return M.apply(this,arguments)}return P}()},{key:"deepSave",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k=this;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",this.app.request.put({url:this.app.urls.dataTableDeepSave(this.className),data:B(A)}).then(function(U){return k.parseResponse(U)}));case 1:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"remove",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(k=A&&A.objectId||A,!(!k||typeof k!="string"&&typeof k!="number")){j.next=3;break}throw new Error("Object Id must be provided and must be a string or number.");case 3:return j.abrupt("return",this.app.request.delete({url:this.app.urls.dataTableObject(this.className,k)}));case 4:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"find",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k=this;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:y.default.toRequestBody(A)}).then(function(U){return k.parseResponse(U)}));case 1:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"group",value:function(){var M=(0,f.default)(T.default.mark(function x(A){return T.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",this.app.request.post({url:this.app.urls.dataGrouping(this.className),data:y.default.toRequestBody(A)}));case 1:case"end":return F.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"countInGroup",value:function(){var M=(0,f.default)(T.default.mark(function x(A){return T.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(!A.groupPath||(0,R.default)(A.groupPath)!=="object")){F.next=2;break}throw new Error("Group Path must be provided and must be an object.");case 2:return F.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.dataGrouping(this.className),"/count"),data:y.default.toRequestBody(A)}));case 3:case"end":return F.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"findById",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k){var F;return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(A&&(0,R.default)(A)==="object"&&!Array.isArray(A))){U.next=8;break}if(Object.keys(A).length){U.next=3;break}throw new Error("Provided object must have at least 1 primary keys.");case 3:return U.next=5,this.app.request.get({url:this.app.urls.dataTablePrimaryKey(this.className),query:A});case 5:F=U.sent,U.next=14;break;case 8:if(!(!A||typeof A!="string"&&typeof A!="number")){U.next=10;break}throw new Error("Object Id must be provided and must be a string or number or an object of primary keys.");case 10:return k&&(k.pageSize=null,k.offset=null),U.next=13,this.app.request.get({url:this.app.urls.dataTableObject(this.className,A),queryString:y.default.toQueryString(k)});case 13:F=U.sent;case 14:return U.abrupt("return",this.parseResponse(F));case 15:case"end":return U.stop()}},x,this)}));function P(x,A){return M.apply(this,arguments)}return P}()},{key:"findFirst",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k=this;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:N(A,"asc")}).then(function(U){return k.parseResponse(U[0])}));case 1:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"findLast",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k=this;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:N(A,"desc")}).then(function(U){return k.parseResponse(U[0])}));case 1:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"getObjectCount",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k,F;return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(k=void 0,F=void 0,!A){U.next=11;break}if(!(A instanceof y.default)){U.next=9;break}k=A.getDistinct()||void 0,F=A.getGroupBy()||void 0,A=A.getWhereClause()||void 0,U.next=11;break;case 9:if(typeof A=="string"){U.next=11;break}throw new Error("Condition must be a string or an instance of DataQueryBuilder.");case 11:return U.abrupt("return",this.app.request.post({url:this.app.urls.dataTableCount(this.className),data:{where:A,distinct:k,groupBy:F}}));case 12:case"end":return U.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"loadRelations",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k){var F=this,j,U,z,H,$;return T.default.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(j=A&&A.objectId||A,!(!j||typeof j!="string"&&typeof j!="number")){K.next=3;break}throw new Error("Parent Object Id must be provided and must be a string or number.");case 3:if(U=k instanceof E.default?k.toJSON():k,z=U.relationName,H=U.relationModel,$=(0,I.default)(U,l),!(!z||typeof z!="string")){K.next=6;break}throw new Error("Relation Name must be provided and must be a string.");case 6:return K.abrupt("return",this.app.request.get({url:this.app.urls.dataTableObjectRelation(this.className,j,z),queryString:E.default.toQueryString($)}).then(function(W){return F.parseRelationsResponse(W,H)}));case 7:case"end":return K.stop()}},x,this)}));function P(x,A){return M.apply(this,arguments)}return P}()},{key:"setRelation",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k,F){return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",this.changeRelation(this.app.request.Methods.POST,A,k,F));case 1:case"end":return U.stop()}},x,this)}));function P(x,A,k){return M.apply(this,arguments)}return P}()},{key:"addRelation",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k,F){return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",this.changeRelation(this.app.request.Methods.PUT,A,k,F));case 1:case"end":return U.stop()}},x,this)}));function P(x,A,k){return M.apply(this,arguments)}return P}()},{key:"deleteRelation",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k,F){return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",this.changeRelation(this.app.request.Methods.DELETE,A,k,F));case 1:case"end":return U.stop()}},x,this)}));function P(x,A,k){return M.apply(this,arguments)}return P}()},{key:"bulkCreate",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(k="Objects must be provided and must be an array of objects.",!(!A||!Array.isArray(A))){j.next=3;break}throw new Error(k);case 3:return A=A.map(function(U){if(!U||(0,R.default)(U)!=="object"||Array.isArray(U))throw new Error(k);return U}),j.abrupt("return",this.app.request.post({url:this.app.urls.dataBulkTable(this.className),data:A}));case 5:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"bulkUpsert",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k;return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(k="Objects must be provided and must be an array of objects.",!(!A||!Array.isArray(A)||!A.length)){j.next=3;break}throw new Error(k);case 3:return A=A.map(function(U){if(!U||(0,R.default)(U)!=="object"||Array.isArray(U))throw new Error(k);return U}),j.abrupt("return",this.app.request.put({url:this.app.urls.dataBulkTableUpsert(this.className),data:A}));case 5:case"end":return j.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"bulkUpdate",value:function(){var M=(0,f.default)(T.default.mark(function x(A,k){return T.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(!A||typeof A!="string")){j.next=2;break}throw new Error("Condition must be provided and must be a string.");case 2:if(!(!k||(0,R.default)(k)!=="object"||Array.isArray(k))){j.next=4;break}throw new Error("Changes must be provided and must be an object.");case 4:return j.abrupt("return",this.app.request.put({url:this.app.urls.dataBulkTable(this.className),query:{where:A},data:k}));case 5:case"end":return j.stop()}},x,this)}));function P(x,A){return M.apply(this,arguments)}return P}()},{key:"bulkDelete",value:function(){var M=(0,f.default)(T.default.mark(function x(A){var k,F;return T.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(!A||typeof A!="string"&&!Array.isArray(A))){U.next=2;break}throw new Error("Condition must be provided and must be a string or a list of objects.");case 2:return k={},typeof A=="string"?k.where=A:(F=A.map(function(z){var H=z&&z.objectId||z;if(!H||typeof H!="string"&&typeof H!="number")throw new Error('Can not transform "objects" to "whereClause". Item must be a string or number or an object with property "objectId" as string.');return"'".concat(H,"'")}),k.where="objectId in (".concat(F.join(","),")")),U.abrupt("return",this.app.request.post({url:this.app.urls.dataBulkTableDelete(this.className),data:k}));case 5:case"end":return U.stop()}},x,this)}));function P(x){return M.apply(this,arguments)}return P}()},{key:"parseRelationsResponse",value:function(P,x){return G(P,x,this)}},{key:"parseResponse",value:function(P){return G(P,this.model,this)}},{key:"changeRelation",value:function(P,x,A,k){var F=x&&x.objectId||x;if(!F||typeof F!="string"&&typeof F!="number")throw new Error("Relation Parent must be provided and must be a string or number or an object with objectId property.");if(!A||typeof A!="string")throw new Error("Relation Column Name must be provided and must be a string.");if(!k||typeof k!="string"&&!Array.isArray(k))throw new Error("Relation Children must be provided and must be a string or a list of objects.");var j={};typeof k=="string"?j.whereClause=k:j.childrenIds=k.map(function(z){var H=z&&z.objectId||z;if(!H||typeof H!="string"&&typeof H!="number")throw new Error("Child Id must be provided and must be a string or number.");return H});var U={};return j.whereClause&&(U.whereClause=j.whereClause),this.app.request.send({method:P,url:this.app.urls.dataTableObjectRelation(this.className,F,A),query:U,data:j.childrenIds})}}]),V}();s.default=L;var B=function(){return function(M){var P={instancesMap:new WeakMap};return V(P,M,{})};function V(M,P,x){for(var A in P)if(Array.isArray(P[A]))V(M,P[A],x[A]=[]);else if(P[A]&&(0,R.default)(P[A])==="object"&&!(P[A]instanceof h.default)&&!(P[A]instanceof S.default)&&!(P[A]instanceof p.default))if(P[A]instanceof Date)x[A]=P[A].getTime();else if(M.instancesMap.has(P[A])){var k=M.instancesMap.get(P[A]);k.__subID||(k.__subID=C.default.uuid()),x[A]={__originSubID:k.__subID}}else{var F=x[A]={};M.instancesMap.set(P[A],F),V(M,P[A],F)}else x[A]=P[A];return x}}(),G=function(){return function(k,F,j){if(!k)return k;var U={RootModel:F,app:j.app,classToTableMap:j.classToTableMap,subIds:{},postAssign:[]},z=Array.isArray(k)?k.map(function(H){return x(U,H)}):x(U,k);return A(U),z};function V(k,F,j,U){var z=F[U].__subID;if(z&&k.subIds[z])j[U]=k.subIds[z],delete F[U].__subID;else{var H=k.classToTableMap[F[U].___class];j[U]=H?new H:{},z&&!k.subIds[z]&&(k.subIds[z]=j[U],delete F[U].__subID),P(k,F[U],j[U])}}function M(k,F,j,U){Array.isArray(F[U])?P(k,F[U],j[U]=[]):F[U]&&(0,R.default)(F[U])==="object"?v.GEO_CLASSES.includes(F[U].___class)?j[U]=(0,v.default)(F[U]):F[U].__originSubID?k.postAssign.push([j,U,F[U].__originSubID]):V(k,F,j,U):j[U]=F[U]}function P(k,F,j){for(var U in F)M(k,F,j,U)}function x(k,F){var j=k.RootModel||k.classToTableMap[F.___class],U=j?new j:{};if(F.__subID){if(k.subIds[F.__subID])return k.subIds[F.__subID];k.subIds[F.__subID]=U,delete F.__subID}return P(k,F,U),U}function A(k){k.postAssign.forEach(function(F){var j=(0,_.default)(F,3),U=j[0],z=j[1],H=j[2];U[z]=k.subIds[H]})}}()},"./src/device/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=(0,u.default)(function T(R){if((0,_.default)(this,T),!R||!R.uuid||!R.platform||!R.version)throw new Error('Device properties object must consist of fields "uuid", "platform" and "version".');this.uuid=R.uuid,this.platform=R.platform.toUpperCase(),this.version=R.version});s.default=I},"./src/expression.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R){if((0,u.default)(this,T),!R||typeof R!="string")throw new Error("The Backendless.Expression class can be initialized with non empty string value only");this.value=R}return(0,_.default)(T,[{key:"toJSON",value:function(){return{___class:"BackendlessExpression",value:this.value}}}]),T}();s.default=I},"./src/files/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./src/files/utils.js")),f=a(o("./src/files/persmission.js")),w=function(){function m(g){(0,I.default)(this,m),this.app=g,this.Permissions={READ:new f.default("READ",g),DELETE:new f.default("DELETE",g),WRITE:new f.default("WRITE",g)}}return(0,T.default)(m,[{key:"saveFile",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E,S){var v;return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!c||typeof c!="string")){l.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(!(!y||typeof y!="string")){l.next=4;break}throw new Error("File Name must be provided and must be a string.");case 4:return l.next=6,R.default.toBase64(E);case 6:return E=l.sent,v={},typeof S=="boolean"&&(v.overwrite=S),c=R.default.trimSlashesInPath(c),y=R.default.sanitizeFileName(y),l.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileBinaryPath(c),"/").concat(y),headers:{"Content-Type":"text/plain"},query:v,data:E}));case 12:case"end":return l.stop()}},p,this)}));function C(p,c,y,E){return g.apply(this,arguments)}return C}()},{key:"upload",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E){var S,v,h,l;return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(S={},typeof E=="boolean"&&(S.overwrite=E),y=R.default.trimSlashesInPath(y),v=R.default.parseFilePath(y),v.fileName&&(y=v.filePath,h=v.fileName),typeof c!="string"){b.next=8;break}return h||(l=R.default.parseFilePath(c),h=l.fileName),b.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.filePath(y),"/").concat(h),query:S,data:{url:c}}));case 8:if(h||(h=R.default.getFileName(c)),h){b.next=11;break}throw new Error("Wrong type of the file source object. Can not get file name");case 11:return h=R.default.sanitizeFileName(h),b.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.filePath(y),"/").concat(h),query:S,form:{file:c}}));case 13:case"end":return b.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()},{key:"append",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E){var S,v=arguments;return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!c||typeof c!="string")){l.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(c=R.default.trimSlashesInPath(c),v.length===2&&(E=y,y=void 0,S=R.default.parseFilePath(c),S.fileName&&(c=S.filePath,y=S.fileName)),y){l.next=6;break}throw new Error("Can not resolve target file name");case 6:if(y=R.default.sanitizeFileName(y),typeof E!="string"){l.next=9;break}return l.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.fileAppendPath(c),"/").concat(y),data:{url:E}}));case 9:if(!R.default.isBytesArray(E)){l.next=14;break}return l.next=12,R.default.toBase64(E);case 12:return E=l.sent,l.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileAppendBinaryPath(c),"/").concat(y),headers:{"Content-Type":"text/plain"},data:E}));case 14:return l.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.fileAppendPath(c),"/").concat(y),form:{file:E}}));case 15:case"end":return l.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()},{key:"appendText",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E){var S,v=arguments;return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!c||typeof c!="string")){l.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(c=R.default.trimSlashesInPath(c),v.length===2&&(E=y,y=void 0,S=R.default.parseFilePath(c),S.fileName&&(c=S.filePath,y=S.fileName)),y){l.next=6;break}throw new Error("Can not resolve target file name");case 6:if(typeof E=="string"){l.next=8;break}throw new Error('"textContent" must be a string');case 8:return y=R.default.sanitizeFileName(y),l.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileAppendPath(c),"/").concat(y),headers:{"Content-Type":"text/plain"},data:E}));case 10:case"end":return l.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()},{key:"listing",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E,S,v){var h;return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(h={},!(!c||typeof c!="string")){d.next=3;break}throw new Error('"filePath" must be provided and must be a string.');case 3:return c=R.default.trimSlashesInPath(c),y&&typeof y=="string"&&(h.pattern=y),typeof E=="boolean"&&(h.sub=E),typeof S=="number"&&S>=0&&(h.pagesize=S),typeof v=="number"&&v>=0&&(h.offset=v),d.abrupt("return",this.app.request.get({url:this.app.urls.filePath(c),query:h}));case 9:case"end":return d.stop()}},p,this)}));function C(p,c,y,E,S){return g.apply(this,arguments)}return C}()},{key:"renameFile",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!c||typeof c!="string")){S.next=2;break}throw new Error('"oldPathName" must be provided and must be a string.');case 2:if(!(!y||typeof y!="string")){S.next=4;break}throw new Error("New File Name must be provided and must be a string.");case 4:return S.abrupt("return",this.app.request.put({url:this.app.urls.fileRename(),data:{oldPathName:R.default.ensureSlashInPath(c),newName:y}}));case 5:case"end":return S.stop()}},p,this)}));function C(p,c){return g.apply(this,arguments)}return C}()},{key:"moveFile",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.app.request.put({url:this.app.urls.fileMove(),data:{sourcePath:R.default.ensureSlashInPath(c),targetPath:R.default.ensureSlashInPath(y)}}));case 1:case"end":return S.stop()}},p,this)}));function C(p,c){return g.apply(this,arguments)}return C}()},{key:"copyFile",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.app.request.put({url:this.app.urls.fileCopy(),data:{sourcePath:R.default.ensureSlashInPath(c),targetPath:R.default.ensureSlashInPath(y)}}));case 1:case"end":return S.stop()}},p,this)}));function C(p,c){return g.apply(this,arguments)}return C}()},{key:"remove",value:function(){var g=(0,_.default)(u.default.mark(function p(c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!c||typeof c!="string")){E.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:return!c.startsWith("http://")&&!c.startsWith("https://")&&(c=this.app.urls.filePath(c)),E.abrupt("return",this.app.request.delete({url:c}));case 4:case"end":return E.stop()}},p,this)}));function C(p){return g.apply(this,arguments)}return C}()},{key:"exists",value:function(){var g=(0,_.default)(u.default.mark(function p(c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!c||typeof c!="string")){E.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:return c=R.default.trimSlashesInPath(c),E.abrupt("return",this.app.request.get({url:this.app.urls.filePath(c),query:{action:"exists"}}));case 4:case"end":return E.stop()}},p,this)}));function C(p){return g.apply(this,arguments)}return C}()},{key:"getFileCount",value:function(){var g=(0,_.default)(u.default.mark(function p(c,y,E,S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!c||typeof c!="string")){h.next=2;break}throw new Error('"filesPath" must be provided and must be a string.');case 2:if(!(y&&typeof y!="string")){h.next=4;break}throw new Error("Files Pattern must be provided and must be a string.");case 4:return c=R.default.trimSlashesInPath(c),h.abrupt("return",this.app.request.get({url:this.app.urls.filePath(c),query:{action:"count",pattern:y||"*",sub:!!E,countDirectories:!!S}}));case 6:case"end":return h.stop()}},p,this)}));function C(p,c,y,E){return g.apply(this,arguments)}return C}()},{key:"createDirectory",value:function(){var g=(0,_.default)(u.default.mark(function p(c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!c||typeof c!="string")){E.next=2;break}throw new Error('Directory "path" must be provided and must be a string.');case 2:return c=R.default.trimSlashesInPath(c),E.abrupt("return",this.app.request.post({url:this.app.urls.directoryPath(c)}));case 4:case"end":return E.stop()}},p,this)}));function C(p){return g.apply(this,arguments)}return C}()},{key:"removeDirectory",value:function(){var g=(0,_.default)(u.default.mark(function p(c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!c||typeof c!="string")){E.next=2;break}throw new Error('Directory "path" must be provided and must be a string.');case 2:return c=R.default.trimSlashesInPath(c),E.abrupt("return",this.app.request.delete({url:this.app.urls.filePath(c)}));case 4:case"end":return E.stop()}},p,this)}));function C(p){return g.apply(this,arguments)}return C}()}]),m}();s.default=w},"./src/files/persmission.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),w=a(o("./src/persmission.js"));function m(p){var c=g();return function(){var E=(0,R.default)(p),S;if(c){var v=(0,R.default)(this).constructor;S=Reflect.construct(E,arguments,v)}else S=E.apply(this,arguments);return(0,T.default)(this,S)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=function(p){(0,I.default)(y,p);var c=m(y);function y(){return(0,u.default)(this,y),c.apply(this,arguments)}return(0,_.default)(y,[{key:"getRequestURL",value:function(S,v){return this.app.urls.filePermission(S,v)}}]),y}(w.default);s.default=C,(0,f.default)(C,"BACKWARD_COMPATIBILITY_LABEL","Backendless.Files.Permissions.{READ|DELETE|WRITE}")},"./src/files/utils.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I={isBytesArray:function(f){return typeof Buffer<"u"&&f instanceof Buffer||typeof ArrayBuffer<"u"&&f instanceof ArrayBuffer?!0:Array.isArray(f)},ensureSlashInPath:function(f){return f.startsWith("/")?f:"/".concat(f)},trimSlashesInPath:function(f){return f&&(f.startsWith("/")&&(f=f.slice(1)),f.endsWith("/")&&(f=f.slice(0,f.length-1))),f},parseFilePath:function(f){var w={filePath:f,fileName:null};if(f){var m=f.split("/");m[m.length-1].includes(".")&&(w.fileName=m.pop(),w.filePath=m.join("/"))}return w},sanitizeFileName:function(f){return encodeURIComponent(f).replace(/'/g,"%27").replace(/"/g,"%22")},getFileName:function(f){if(f.name)return f.name;if(f.path){var w=f.path.split("/");return w[w.length-1]}},toBase64:function(f){return(0,_.default)(u.default.mark(function w(){return u.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(typeof Blob<"u"&&typeof FileReader<"u")){g.next=3;break}return f instanceof Blob||(f=new Blob([f],{type:""})),g.abrupt("return",new Promise(function(C,p){var c=new FileReader;c.onerror=function(y){return p(y)},c.onload=function(y){return C(y.target.result.split(";base64,")[1])},c.readAsDataURL(f)}));case 3:if(!(typeof Buffer<"u")){g.next=5;break}return g.abrupt("return",Buffer.from(f).toString("base64"));case 5:return g.abrupt("return",f);case 6:case"end":return g.stop()}},w)}))()}},T=I;s.default=T},"./src/hive/constants.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HiveTypes=void 0;var o={KEY_VALUE:"key-value",LIST:"list",MAP:"map",SET:"set",SORTED_SET:"sorted-set"};s.HiveTypes=o},"./src/hive/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.DataHive=void 0,s.default=T;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=o("./src/hive/stores/index.js");function T(f){function w(m){if(!m||typeof m!="string")throw new Error("Hive name must be provided and must be a string.");return new R(m,{app:f})}return w.getNames=function(){return f.request.get({url:f.urls.dataHives()})},w}var R=function(){function f(w,m){(0,u.default)(this,f),this.hiveName=w,this.app=m.app,this.KeyValueStore=I.KeyValueStore.registerType(this),this.ListStore=I.ListStore.registerType(this),this.MapStore=I.MapStore.registerType(this),this.SetStore=I.SetStore.registerType(this),this.SortedSetStore=I.SortedSetStore.registerType(this)}return(0,_.default)(f,[{key:"create",value:function(){return this.app.request.post({url:this.app.urls.dataHive(this.hiveName)})}},{key:"delete",value:function(){return this.app.request.delete({url:this.app.urls.dataHive(this.hiveName)})}},{key:"rename",value:function(m){if(!m||typeof m!="string")throw new Error("New Hive name must be provided and must be a string.");return this.app.request.put({url:this.app.urls.dataHive(this.hiveName),query:{newName:m}})}}]),f}();s.DataHive=R},"./src/hive/stores/base-store.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.HiveStore=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=a(o("./src/utils.js"));function w(C,p){var c=Object.keys(C);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(C);p&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(C,E).enumerable})),c.push.apply(c,y)}return c}function m(C){for(var p=1;p<arguments.length;p++){var c=arguments[p]!=null?arguments[p]:{};p%2?w(Object(c),!0).forEach(function(y){(0,R.default)(C,y,c[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach(function(y){Object.defineProperty(C,y,Object.getOwnPropertyDescriptor(c,y))})}return C}var g=function(){function C(p,c){if((0,I.default)(this,C),this.TYPE=this.constructor.TYPE,!c||typeof c!="string")throw new Error("Store key must be a string.");this.app=p.app,this.hiveName=p.hiveName,this.storeKey=c}return(0,T.default)(C,[{key:"getBaseURL",value:function(){return"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/").concat(this.storeKey)}},{key:"delete",value:function(){return this.constructor.delete.call(m(m({},this),this.constructor),[this.storeKey])}},{key:"exist",value:function(){var p=(0,_.default)(u.default.mark(function y(){var E;return u.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.constructor.exist.call(m(m({},this),this.constructor),[this.storeKey]);case 2:return E=v.sent,v.abrupt("return",!!E);case 4:case"end":return v.stop()}},y,this)}));function c(){return p.apply(this,arguments)}return c}()},{key:"rename",value:function(c,y){if(!c||typeof c!="string")throw new Error("New key name must be provided and must be a string.");if(y!==void 0&&typeof y!="boolean")throw new Error("Overwrite must be a boolean.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/rename"),query:{newKey:c,overwrite:y}})}},{key:"getExpiration",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-expiration-ttl")})}},{key:"clearExpiration",value:function(){return this.app.request.put({url:"".concat(this.getBaseURL(),"/clear-expiration")})}},{key:"expireAfter",value:function(c){if(isNaN(c)||typeof c!="number")throw new Error("TTL must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/expire"),query:{ttl:c}})}},{key:"expireAt",value:function(c){if(isNaN(c)||typeof c!="number")throw new Error("Expiration time must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/expire-at"),query:{unixTime:c}})}},{key:"touch",value:function(){return this.constructor.touch.call(m(m({},this),this.constructor),[this.storeKey])}},{key:"secondsSinceLastOperation",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/seconds-since-last-operation")})}}],[{key:"registerType",value:function(c){var y=this,E=m(m({},this),{},{app:c.app,hiveName:c.hiveName}),S=function(h){return new y(E,h)};return this.STATIC_METHODS.forEach(function(v){S[v]=function(){for(var h=arguments.length,l=new Array(h),d=0;d<h;d++)l[d]=arguments[d];return y[v].apply(E,l)}}),S}},{key:"keys",value:function(c){if(c!==void 0){if(!f.default.isObject(c))throw new Error("Options must be an object.");var y=c.cursor,E=c.pageSize,S=c.filterPattern;if(y!==void 0&&(typeof y!="number"||isNaN(y)))throw new Error("Cursor must be a number.");if(E!==void 0&&(typeof E!="number"||isNaN(E)))throw new Error("Page size must be a number.");if(S!==void 0&&(typeof S!="string"||!S))throw new Error("Filter pattern must be a string.")}return this.app.request.get({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/keys"),query:c})}},{key:"delete",value:function(c){if(!Array.isArray(c))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.delete({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:c})}},{key:"exist",value:function(c){if(!Array.isArray(c))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/exist"),data:c})}},{key:"touch",value:function(c){if(!Array.isArray(c))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.put({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/touch"),data:c})}}]),C}();s.HiveStore=g,(0,R.default)(g,"STATIC_METHODS",["keys","delete","exist","touch"])},"./src/hive/stores/index.js":(i,s,o)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o("./src/hive/stores/key-value.js");Object.keys(a).forEach(function(R){R==="default"||R==="__esModule"||R in s&&s[R]===a[R]||Object.defineProperty(s,R,{enumerable:!0,get:function(){return a[R]}})});var u=o("./src/hive/stores/list.js");Object.keys(u).forEach(function(R){R==="default"||R==="__esModule"||R in s&&s[R]===u[R]||Object.defineProperty(s,R,{enumerable:!0,get:function(){return u[R]}})});var _=o("./src/hive/stores/map.js");Object.keys(_).forEach(function(R){R==="default"||R==="__esModule"||R in s&&s[R]===_[R]||Object.defineProperty(s,R,{enumerable:!0,get:function(){return _[R]}})});var I=o("./src/hive/stores/set.js");Object.keys(I).forEach(function(R){R==="default"||R==="__esModule"||R in s&&s[R]===I[R]||Object.defineProperty(s,R,{enumerable:!0,get:function(){return I[R]}})});var T=o("./src/hive/stores/sorted-set.js");Object.keys(T).forEach(function(R){R==="default"||R==="__esModule"||R in s&&s[R]===T[R]||Object.defineProperty(s,R,{enumerable:!0,get:function(){return T[R]}})})},"./src/hive/stores/key-value.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.KeyValueStore=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o("./src/hive/constants.js"),g=o("./src/hive/stores/base-store.js"),C=a(o("./src/utils.js")),p=o("./src/hive/utils.js");function c(h,l){var d=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);l&&(b=b.filter(function(O){return Object.getOwnPropertyDescriptor(h,O).enumerable})),d.push.apply(d,b)}return d}function y(h){for(var l=1;l<arguments.length;l++){var d=arguments[l]!=null?arguments[l]:{};l%2?c(Object(d),!0).forEach(function(b){(0,w.default)(h,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)):c(Object(d)).forEach(function(b){Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(d,b))})}return h}function E(h){var l=S();return function(){var b=(0,f.default)(h),O;if(l){var D=(0,f.default)(this).constructor;O=Reflect.construct(b,arguments,D)}else O=b.apply(this,arguments);return(0,R.default)(this,O)}}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v=function(h){(0,T.default)(d,h);var l=E(d);function d(){return(0,_.default)(this,d),l.apply(this,arguments)}return(0,I.default)(d,[{key:"get",value:function(){return this.app.request.get({url:this.getBaseURL()})}},{key:"set",value:function(O,D){return this.constructor.set.apply(y(y({},this),this.constructor),[this.storeKey,O,D])}},{key:"increment",value:function(O){if(isNaN(O)||typeof O!="number")throw new Error("Value must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment"),query:{value:O}})}},{key:"decrement",value:function(O){if(isNaN(O)||typeof O!="number")throw new Error("Value must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement"),query:{value:O}})}}],[{key:"get",value:function(O){if(!Array.isArray(O))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.post({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:O})}},{key:"set",value:function(O,D,N){if(C.default.isObject(O)){if(!Object.keys(O).length)throw new Error("Provided object must have at least 1 key.");return this.app.request.put({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:O})}if(!O||typeof O!="string")throw new Error("Key must be provided and must be a string.");if(N!==void 0){if(!C.default.isObject(N))throw new Error("Options must be an object.");var L=N.ttl,B=N.expireAt,G=N.condition;if(L!==void 0&&(isNaN(L)||typeof L!="number"))throw new Error("TTL in seconds must be a number.");if(B!==void 0&&(isNaN(B)||typeof B!="number"))throw new Error("ExpireAt timestamp must be a number.");if(G!==void 0&&!["IfExists","IfNotExists","Always"].includes(G))throw new Error("Condition must be one of this values: [IfExists, IfNotExists, Always].")}if(!(0,p.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/").concat(O),data:y({value:D},N)})}}]),d}(g.HiveStore);s.KeyValueStore=v,(0,w.default)(v,"TYPE",m.HiveTypes.KEY_VALUE),(0,w.default)(v,"STATIC_METHODS",[].concat((0,u.default)(g.HiveStore.STATIC_METHODS),["get","set"]))},"./src/hive/stores/list.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.ListStore=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),w=o("./src/hive/constants.js"),m=o("./src/hive/stores/base-store.js"),g=o("./src/hive/utils.js");function C(y){var E=p();return function(){var v=(0,R.default)(y),h;if(E){var l=(0,R.default)(this).constructor;h=Reflect.construct(v,arguments,l)}else h=v.apply(this,arguments);return(0,T.default)(this,h)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var c=function(y){(0,I.default)(S,y);var E=C(S);function S(){return(0,u.default)(this,S),E.apply(this,arguments)}return(0,_.default)(S,[{key:"get",value:function(h,l){if(l!==void 0){if(isNaN(l)||typeof l!="number")throw new Error("Index To must be a number.");if(isNaN(h)||typeof h!="number")throw new Error("Index From must be a number.");return this.app.request.get({url:this.getBaseURL(),query:{from:h,to:l}})}if(h!==void 0){if(isNaN(h)||typeof h!="number")throw new Error("Index must be a number.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/").concat(h)})}return this.app.request.get({url:this.getBaseURL()})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"insertBefore",value:function(h,l){return this.insert(h,l,!0)}},{key:"insertAfter",value:function(h,l){return this.insert(h,l,!1)}},{key:"insert",value:function(h,l,d){if(!(0,g.isHiveValueValid)(h))throw new Error("ValueToInsert must be provided and must be one of types: string, number, boolean, object, array.");if(!(0,g.isHiveValueValid)(l))throw new Error("AnchorValue must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/insert-").concat(d?"before":"after"),data:{valueToInsert:h,anchorValue:l}})}},{key:"deleteValue",value:function(h,l){if(!(0,g.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(l!==void 0&&(isNaN(l)||typeof l!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/delete-value"),data:{value:h,count:l}})}},{key:"addFirstValue",value:function(h){if(!(0,g.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-first"),data:[h]})}},{key:"addFirstValues",value:function(h){if(!h||!Array.isArray(h)||!h.length||!(0,g.isHiveValueValid)(h))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-first"),data:h})}},{key:"addLastValue",value:function(h){if(!(0,g.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-last"),data:[h]})}},{key:"addLastValues",value:function(h){if(!h||!Array.isArray(h)||!h.length||!(0,g.isHiveValueValid)(h))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-last"),data:h})}},{key:"deleteFirst",value:function(h){if(h!==void 0&&(isNaN(h)||typeof h!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-first-and-delete"),query:{count:h}})}},{key:"deleteLast",value:function(h){if(h!==void 0&&(isNaN(h)||typeof h!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-last-and-delete"),query:{count:h}})}}]),S}(m.HiveStore);s.ListStore=c,(0,f.default)(c,"TYPE",w.HiveTypes.LIST)},"./src/hive/stores/map.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.MapStore=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),T=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),R=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),w=o("./src/hive/constants.js"),m=o("./src/hive/stores/base-store.js"),g=a(o("./src/utils.js")),C=o("./src/hive/utils.js");function p(E){var S=c();return function(){var h=(0,R.default)(E),l;if(S){var d=(0,R.default)(this).constructor;l=Reflect.construct(h,arguments,d)}else l=h.apply(this,arguments);return(0,T.default)(this,l)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y=function(E){(0,I.default)(v,E);var S=p(v);function v(){return(0,u.default)(this,v),S.apply(this,arguments)}return(0,_.default)(v,[{key:"get",value:function(l){if(l!==void 0&&!(typeof l=="string"||Array.isArray(l)))throw new Error("Key(s) must be a string or list of strings.");return this.app.request.post({url:this.getBaseURL(),data:g.default.castArray(l)})}},{key:"getValue",value:function(l){if(!l||typeof l!="string")throw new Error("Key must be provided and must be a string.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/get/").concat(l)})}},{key:"keyExists",value:function(l){if(!l||typeof l!="string")throw new Error("Key must be provided and must be a string.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/exists/").concat(l)})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"keys",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/keys")})}},{key:"values",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/values")})}},{key:"set",value:function(l,d){if(!l)throw new Error("First argument must be provided and must be a string or an object.");if(g.default.isObject(l)){if(!Object.keys(l).length)throw new Error("Provided object must have at least 1 key.");return this.app.request.put({url:this.getBaseURL(),data:l})}if(typeof l!="string")throw new Error("Key must be a string.");if(!(0,C.isHiveValueValid)(d))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/set/").concat(l),data:{value:d}})}},{key:"setWithOverwrite",value:function(l,d,b){if(!l||typeof l!="string")throw new Error("Key must be provided and must be a string.");if(!(0,C.isHiveValueValid)(d))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(b!==void 0&&typeof b!="boolean")throw new Error("Overwrite must be a boolean.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/set-with-overwrite/").concat(l),data:{value:d,overwrite:b}})}},{key:"increment",value:function(l,d){if(!l||typeof l!="string")throw new Error("Key must be provided and must be a string.");if(d!==void 0&&(isNaN(d)||typeof d!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment/").concat(l),query:{count:d}})}},{key:"decrement",value:function(l,d){if(!l||typeof l!="string")throw new Error("Key must be provided and must be a string.");if(d!==void 0&&(isNaN(d)||typeof d!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement/").concat(l),query:{count:d}})}},{key:"deleteKeys",value:function(l){if(!l||!(typeof l=="string"||Array.isArray(l)))throw new Error("Key(s) must be provided and must be a string or list of strings.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/by-obj-keys"),data:g.default.castArray(l)})}}]),v}(m.HiveStore);s.MapStore=y,(0,f.default)(y,"TYPE",w.HiveTypes.MAP)},"./src/hive/stores/set.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.SetStore=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o("./src/hive/stores/base-store.js"),g=o("./src/hive/constants.js"),C=o("./src/hive/utils.js");function p(E){var S=c();return function(){var h=(0,f.default)(E),l;if(S){var d=(0,f.default)(this).constructor;l=Reflect.construct(h,arguments,d)}else l=h.apply(this,arguments);return(0,R.default)(this,l)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y=function(E){(0,T.default)(v,E);var S=p(v);function v(){return(0,_.default)(this,v),S.apply(this,arguments)}return(0,I.default)(v,[{key:"get",value:function(){return this.app.request.get({url:this.getBaseURL()})}},{key:"getRandom",value:function(l){if(l!==void 0&&(isNaN(l)||typeof l!="number"))throw new Error("Count must be a number.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/random"),query:{count:l}})}},{key:"getRandomAndDelete",value:function(l){if(l!==void 0&&(isNaN(l)||typeof l!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/random"),query:{count:l}})}},{key:"addValue",value:function(l){if(!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:[l]})}},{key:"addValues",value:function(l){if(!l||!Array.isArray(l)||!l.length||!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:l})}},{key:"deleteValue",value:function(l){if(!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:[l]})}},{key:"deleteValues",value:function(l){if(!l||!Array.isArray(l)||!l.length||!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:l})}},{key:"isValueMember",value:function(l){if(!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/contains"),data:[l]})}},{key:"isValuesMembers",value:function(l){if(!l||!Array.isArray(l)||!l.length||!(0,C.isHiveValueValid)(l))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/contains"),data:l})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}}],[{key:"difference",value:function(l){if(!Array.isArray(l))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/difference"),data:l})}},{key:"intersection",value:function(l){if(!Array.isArray(l))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/intersection"),data:l})}},{key:"union",value:function(l){if(!Array.isArray(l))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/union"),data:l})}}]),v}(m.HiveStore);s.SetStore=y,(0,w.default)(y,"TYPE",g.HiveTypes.SET),(0,w.default)(y,"STATIC_METHODS",[].concat((0,u.default)(m.HiveStore.STATIC_METHODS),["difference","intersection","union"]))},"./src/hive/stores/sorted-set.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.SortedSetStore=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o("./src/hive/stores/base-store.js"),g=o("./src/hive/constants.js"),C=a(o("./src/utils.js")),p=o("./src/hive/stores/set.js"),c=o("./src/hive/utils.js");function y(l,d){var b=Object.keys(l);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(l);d&&(O=O.filter(function(D){return Object.getOwnPropertyDescriptor(l,D).enumerable})),b.push.apply(b,O)}return b}function E(l){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?y(Object(b),!0).forEach(function(O){(0,w.default)(l,O,b[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(b)):y(Object(b)).forEach(function(O){Object.defineProperty(l,O,Object.getOwnPropertyDescriptor(b,O))})}return l}function S(l){var d=v();return function(){var O=(0,f.default)(l),D;if(d){var N=(0,f.default)(this).constructor;D=Reflect.construct(O,arguments,N)}else D=O.apply(this,arguments);return(0,R.default)(this,D)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var h=function(l){(0,T.default)(b,l);var d=S(b);function b(){return(0,_.default)(this,b),d.apply(this,arguments)}return(0,I.default)(b,[{key:"add",value:function(D,N){if(!D||!Array.isArray(D))throw new Error("Items must be provided and must be an array.");if(N!==void 0){if(!C.default.isObject(N))throw new Error("Options must be an object.");var L=N.duplicateBehaviour,B=N.scoreUpdateMode,G=N.resultType;if(L!==void 0&&!["OnlyUpdate","AlwaysAdd"].includes(L))throw new Error("Duplicate Behaviour argument must be one of this values: OnlyUpdate, AlwaysAdd.");if(B!==void 0&&!["Greater","Less"].includes(B))throw new Error("Score Update Mode argument must be one of this values: Greater, Less.");if(G!==void 0&&!["NewAdded","TotalChanged"].includes(G))throw new Error("Result Type must be one of this values: NewAdded, TotalChanged.")}return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:E({items:D},N)})}},{key:"incrementScore",value:function(D,N){if(!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(isNaN(N)||typeof N!="number")throw new Error("ScoreValue must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment"),data:{scoreValue:N,value:D}})}},{key:"decrementScore",value:function(D,N){if(!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(isNaN(N)||typeof N!="number")throw new Error("ScoreValue must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement"),data:{scoreValue:N,value:D}})}},{key:"getAndDeleteMaxScore",value:function(D){if(D!==void 0&&(isNaN(D)||typeof D!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-with-max-score-and-delete"),query:{count:D}})}},{key:"getAndDeleteMinScore",value:function(D){if(D!==void 0&&(isNaN(D)||typeof D!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-with-min-score-and-delete"),query:{count:D}})}},{key:"getRandom",value:function(D){if(D!==void 0){if(!C.default.isObject(D))throw new Error("Options must be an object.");var N=D.count,L=D.withScores;if(N!==void 0&&(isNaN(N)||typeof N!="number"))throw new Error("Count must be a number.");if(L!==void 0&&typeof L!="boolean")throw new Error("With Scores argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-random"),query:E({},D)})}},{key:"getScore",value:function(D){if(!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/get-score"),data:{value:D}})}},{key:"getRank",value:function(D,N){if(!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(N!==void 0&&typeof N!="boolean")throw new Error("Reverse argument must be a boolean.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/get-rank"),data:{value:D,reverse:N}})}},{key:"getRangeByRank",value:function(D,N,L){if(isNaN(D)||typeof D!="number")throw new Error("Start Rank must be provided and must be a number.");if(isNaN(N)||typeof N!="number")throw new Error("Stop Rank must be provided and must be a number.");if(L!==void 0){if(!C.default.isObject(L))throw new Error("Options must be an object.");var B=L.withScores,G=L.reverse;if(B!==void 0&&typeof B!="boolean")throw new Error("With Scores argument must be a boolean.");if(G!==void 0&&typeof G!="boolean")throw new Error("Reverse argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-range-by-rank"),query:E({startRank:D,stopRank:N},L)})}},{key:"getRangeByScore",value:function(D){if(D!==void 0){if(!C.default.isObject(D))throw new Error("Options must be an object.");var N=D.minScore,L=D.maxScore,B=D.minBound,G=D.maxBound,V=D.offset,M=D.pageSize,P=D.withScores,x=D.reverse;if(N!==void 0&&(isNaN(N)||typeof N!="number"))throw new Error("Minimal Score must be a number.");if(L!==void 0&&(isNaN(L)||typeof L!="number"))throw new Error("Maximal Score must be a number.");if(B!==void 0&&!["Include","Exclude","Infinity"].includes(B))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(G!==void 0&&!["Include","Exclude","Infinity"].includes(G))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.");if(V!==void 0&&(typeof V!="number"||isNaN(V)))throw new Error("Offset must be a number.");if(M!==void 0&&(typeof M!="number"||isNaN(M)))throw new Error("Page Size must be a number.");if(P!==void 0&&typeof P!="boolean")throw new Error("With Scores argument must be a boolean.");if(x!==void 0&&typeof x!="boolean")throw new Error("Reverse argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-range-by-score"),query:E({},D)})}},{key:"deleteValue",value:function(D){if(!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:[D]})}},{key:"deleteValues",value:function(D){if(!D||!Array.isArray(D)||!D.length||!(0,c.isHiveValueValid)(D))throw new Error("Value must be provided and must be a list of JSON items.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:D})}},{key:"deleteValuesByRank",value:function(D,N){if(isNaN(D)||typeof D!="number")throw new Error("Start Rank must be provided and must be a number.");if(isNaN(N)||typeof N!="number")throw new Error("Stop Rank must be provided and must be a number.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/delete-by-rank"),query:{startRank:D,stopRank:N}})}},{key:"deleteValuesByScore",value:function(D){if(D!==void 0){if(!C.default.isObject(D))throw new Error("Options must be an object.");var N=D.minScore,L=D.maxScore,B=D.minBound,G=D.maxBound;if(N!==void 0&&(isNaN(N)||typeof N!="number"))throw new Error("Minimal Score must be a number.");if(L!==void 0&&(isNaN(L)||typeof L!="number"))throw new Error("Maximal Score must be a number.");if(B!==void 0&&!["Include","Exclude","Infinity"].includes(B))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(G!==void 0&&!["Include","Exclude","Infinity"].includes(G))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.")}return this.app.request.delete({url:"".concat(this.getBaseURL(),"/delete-by-score"),query:E({},D)})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"countBetweenScores",value:function(D){if(D!==void 0){if(!C.default.isObject(D))throw new Error("Options must be an object.");var N=D.minScore,L=D.maxScore,B=D.minBound,G=D.maxBound;if(N!==void 0&&(isNaN(N)||typeof N!="number"))throw new Error("Minimal Score must be a number.");if(L!==void 0&&(isNaN(L)||typeof L!="number"))throw new Error("Maximal Score must be a number.");if(B!==void 0&&!["Include","Exclude","Infinity"].includes(B))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(G!==void 0&&!["Include","Exclude","Infinity"].includes(G))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/count"),query:E({},D)})}}],[{key:"intersection",value:function(D){if(!Array.isArray(D))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/intersection"),data:D})}},{key:"union",value:function(D){if(!Array.isArray(D))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/union"),data:D})}}]),b}(m.HiveStore);s.SortedSetStore=h,(0,w.default)(h,"TYPE",g.HiveTypes.SORTED_SET),(0,w.default)(h,"STATIC_METHODS",[].concat((0,u.default)(m.HiveStore.STATIC_METHODS),["difference","intersection","union"])),(0,w.default)(h,"difference",p.SetStore.difference)},"./src/hive/utils.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isHiveValueValid=o;function o(a){if(a==null)return!1;try{var u=JSON.stringify(a);return!!u}catch{return!1}}},"./src/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/extends.js")),_=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),f=a(o("./node_modules/backendless-request/dist/backendless-request.js")),w=a(o("./src/request/index.js")),m=a(o("./src/urls.js")),g=a(o("./src/utils.js")),C=a(o("./src/expression.js"));function p(L,B){var G=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);B&&(V=V.filter(function(M){return Object.getOwnPropertyDescriptor(L,M).enumerable})),G.push.apply(G,V)}return G}function c(L){for(var B=1;B<arguments.length;B++){var G=arguments[B]!=null?arguments[B]:{};B%2?p(Object(G),!0).forEach(function(V){(0,_.default)(L,V,G[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(G)):p(Object(G)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(G,V))})}return L}var y={appId:null,apiKey:null,serverURL:"https://api.backendless.com",automationServerURL:null,domain:null,apiURI:"/api",debugMode:!1,standalone:!1,XMLHttpRequest:typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0},E=["appId","apiKey","domain"],S=(typeof self>"u"?"undefined":(0,R.default)(self))==="object"&&self.self===self&&self||(typeof o.g>"u"?"undefined":(0,R.default)(o.g))==="object"&&o.g.global===o.g&&o.g,v=S&&S.Backendless,h=function L(){L.isShown||(console.warn("Backendless.Persistence is deprecated namespace, use Backendless.Data instead"),L.isShown=!0)},l=function(){for(var B=arguments.length,G=new Array(B),V=0;V<B;V++)G[V]=arguments[V];var M=G[0],P=G[1];return M&&(0,R.default)(M)==="object"?M:typeof M=="string"&&!P?{domain:M}:{appId:M,apiKey:P}},d=function(B){if(B.domain&&!B.domain.startsWith("https://")&&!B.domain.startsWith("http://"))throw new Error("When initialize the SDK with a custom domain it should start with http:// or https://, for example: Backendless.initApp('https://foobar.com')")},b={Logging:function(){return o("./src/logging/index.js").default},Counters:function(){return o("./src/counters/index.js").default},Cache:function(){return o("./src/cache/index.js").default},Commerce:function(){return o("./src/commerce/index.js").default},Users:function(){return o("./src/users/index.js").default},BL:function(){return o("./src/bl/index.js").default},Data:function(){return o("./src/data/index.js").default},Hive:function(){return o("./src/hive/index.js").default},Messaging:function(){return o("./src/messaging/index.js").default},Files:function(){return o("./src/files/index.js").default},RT:function(){return o("./src/rt.js").default},SharedObject:function(){return o("./src/rso/index.js").default},LocalCache:function(){return o("./src/local-cache/index.js").default},UnitOfWork:function(){return o("./src/unit-of-work/index.js").default},Management:function(){return o("./src/management/index.js").default},Automations:function(){return o("./src/automations/index.js").default}},O=function(){function L(B){(0,I.default)(this,L),this.initConfig(B),this.Request=f.default,this.request=new w.default(this),this.urls=new m.default(this)}return(0,T.default)(L,[{key:"initConfig",value:function(G){G=c({},G),G.domain&&(delete G.appId,delete G.apiKey);for(var V in y)if(y.hasOwnProperty(V)){var M="__".concat(V);E.includes(V)&&delete this[M];var P=this[M]===void 0?y[V]:this[M];this[M]=G[V]===void 0?P:G[V]}}},{key:"initApp",value:function(){var G=l.apply(void 0,arguments);d(G);var V=G.standalone?new L(this):this;V.initConfig(G),V.resetRT(),V.__removeService("LocalCache");var M=(0,u.default)({loadLevels:!0,globalLevel:"all",levels:{}},G.logging);return V.__hasService("Logging")&&(V.Logging.reset(),V.Logging.setConfig(M)),V.__hasService("Users")&&(V.Users.currentUser=null),delete this.__device,V.loggingConfig=M,V}},{key:"__hasService",value:function(G){return!!this["__".concat(G)]}},{key:"__removeService",value:function(G){delete this["__".concat(G)]}},{key:"__getService",value:function(G){var V="__".concat(G);if(!this[V]){var M=b[G]();this[V]=new M(this)}return this[V]}},{key:"standalone",get:function(){return this.__standalone},set:function(G){throw new Error("Setting value to Backendless.standalone directly is not possible, "+"instead you must use Backendless.initApp({ appId: [APP_ID], apiKey: [API_KEY], standalone: ".concat(G," })"))}},{key:"appId",get:function(){return this.__appId},set:function(G){throw new Error("Setting '".concat(G,"' value to Backendless.appId directly is not possible, ")+"instead you must use Backendless.initApp('".concat(G,"', API_KEY)"))}},{key:"apiKey",get:function(){return this.__apiKey},set:function(G){throw new Error("Setting '".concat(G,"' value to Backendless.apiKey directly is not possible, ")+"instead you must use Backendless.initApp(APP_ID, '".concat(G,"')"))}},{key:"serverURL",get:function(){return this.__serverURL},set:function(G){this.__serverURL=G}},{key:"automationServerURL",get:function(){return this.__automationServerURL},set:function(G){this.__automationServerURL=G}},{key:"domain",get:function(){return this.__domain},set:function(G){this.__domain=G}},{key:"apiURI",get:function(){return this.__apiURI},set:function(G){this.__apiURI=G}},{key:"appPath",get:function(){return this.domain?this.domain+this.apiURI:[this.serverURL,this.appId,this.apiKey].join("/")},set:function(G){throw new Error("Setting '".concat(G,"' value to Backendless.appPath directly is not possible, ")+"instead you must use Backendless.initApp(APP_ID, API_KEY) for setup the value")}},{key:"automationPath",get:function(){return this.automationServerURL?[this.automationServerURL,this.appId,this.apiKey].join("/"):this.appPath},set:function(G){throw new Error("Setting '".concat(G,"' value to Backendless.automationPath directly is not possible"))}},{key:"debugMode",get:function(){return this.__debugMode},set:function(G){G=!!G,this.__debugMode!==G&&(this.__debugMode=G,this.__RT&&this.RT.setDebugMode(G))}},{key:"XMLHttpRequest",get:function(){return this.__XMLHttpRequest},set:function(G){this.__XMLHttpRequest=G}},{key:"device",get:function(){if(!this.__device)throw new Error("Device is not defined. Please, run the Backendless.setupDevice");return this.__device},set:function(G){throw new Error("Setting value to Backendless.device directly is not possible, instead you must use Backendless.setupDevice(deviceProperties) for setup the device")}},{key:"setupDevice",value:function(G){var V=o("./src/device/index.js").default;this.__device=new V(G)}},{key:"Utils",get:function(){return g.default}},{key:"getCurrentUserToken",value:function(){return this.Users.getCurrentUserToken()}},{key:"setCurrentUserToken",value:function(G){this.Users.setCurrentUserToken(G)}},{key:"browser",get:function(){return o("./src/user-agent.js").getUserAgent()}},{key:"noConflict",value:function(){return S&&(S.Backendless=v),this}},{key:"Logging",get:function(){return this.__getService("Logging")}},{key:"Counters",get:function(){return this.__getService("Counters")}},{key:"Cache",get:function(){return this.__getService("Cache")}},{key:"Commerce",get:function(){return this.__getService("Commerce")}},{key:"Users",get:function(){return this.__getService("Users")}},{key:"User",get:function(){return o("./src/users/user.js").default}},{key:"UserService",get:function(){return this.Users}},{key:"BL",get:function(){return this.__getService("BL")}},{key:"CustomServices",get:function(){return this.BL.CustomServices}},{key:"APIServices",get:function(){return this.BL.CustomServices}},{key:"Events",get:function(){return this.BL.Events}},{key:"Data",get:function(){return this.__getService("Data")}},{key:"Hive",get:function(){return this.__getService("Hive")}},{key:"Messaging",get:function(){return this.__getService("Messaging")}},{key:"Files",get:function(){return this.__getService("Files")}},{key:"RT",get:function(){return this.__getService("RT")}},{key:"resetRT",value:function(){this.__RT&&(this.__RT.terminate(),delete this.__RT)}},{key:"SharedObject",get:function(){return this.__getService("SharedObject")}},{key:"LocalCache",get:function(){return this.__getService("LocalCache")}},{key:"UnitOfWork",get:function(){return this.__getService("UnitOfWork")}},{key:"Management",get:function(){return this.__getService("Management")}},{key:"Automations",get:function(){return this.__getService("Automations")}},{key:"applicationId",get:function(){return this.appId},set:function(G){console.warn("getter/setter for Backendless.applicationId is deprecated, instead use Backendless.appId"),this.appId=G}},{key:"secretKey",get:function(){return console.warn("getter/setter for Backendless.secretKey is deprecated, instead use Backendless.apiKey"),this.apiKey},set:function(G){console.warn("getter/setter for Backendless.secretKey is deprecated, instead use Backendless.apiKey"),this.apiKey=G}},{key:"Persistence",get:function(){return h(),this.Data}},{key:"DataQueryBuilder",get:function(){return this.Data.QueryBuilder}},{key:"GroupQueryBuilder",get:function(){return this.Data.GroupQueryBuilder}},{key:"JSONUpdateBuilder",get:function(){return this.Data.JSONUpdateBuilder}},{key:"LoadRelationsQueryBuilder",get:function(){return this.Data.LoadRelationsQueryBuilder}},{key:"Bodyparts",get:function(){return this.Messaging.Bodyparts}},{key:"PublishOptions",get:function(){return this.Messaging.PublishOptions}},{key:"DeliveryOptions",get:function(){return this.Messaging.DeliveryOptions}},{key:"PublishOptionsHeaders",get:function(){return this.Messaging.PublishOptionsHeaders}},{key:"EmailEnvelope",get:function(){return this.Messaging.EmailEnvelope}},{key:"Expression",get:function(){return C.default}}]),L}(),D=new O(y);S&&(S.Backendless=D),s=i.exports=D;var N=D;s.default=N},"./src/local-cache/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/utils.js")),T=a(o("./src/local-cache/virtual-storage.js")),R=a(o("./src/local-cache/local-storage.js")),f="Backendless",w=function(){function m(g){(0,u.default)(this,m),this.app=g,this.storageName=this.app.appId?"".concat(f,"_").concat(this.app.appId):f;var C=I.default.isLocalStorageSupported?R.default:T.default;this.setStorage(C),this.Keys={USER_TOKEN:"user-token",CURRENT_USER_ID:"current-user-id",STAY_LOGGED_IN:"stayLoggedIn"}}return(0,_.default)(m,[{key:"setStorage",value:function(C){this.storage=new C(this.storageName,f)}},{key:"set",value:function(C,p){this.storage.set(C,p)}},{key:"get",value:function(C){return this.storage.get(C)}},{key:"remove",value:function(C){this.storage.remove(C)}}]),m}();s.default=w},"./src/local-cache/local-storage.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js"));function I(R,f){if(!localStorage.getItem(R.storageName)){var w=localStorage.getItem(f);w&&(localStorage.setItem(R.storageName,w),localStorage.removeItem(f))}}var T=function(){function R(f,w){(0,u.default)(this,R),this.storageName=f,I(this,w)}return(0,_.default)(R,[{key:"getStore",value:function(){try{return JSON.parse(localStorage.getItem(this.storageName))||{}}catch(w){console.warn("Could not parse data from LocalStorage",w)}return{}}},{key:"setStore",value:function(w){localStorage.setItem(this.storageName,JSON.stringify(w))}},{key:"get",value:function(w){return this.getStore()[w]}},{key:"set",value:function(w,m){var g=this.getStore();g[w]=m,this.setStore(g)}},{key:"remove",value:function(w){var m=this.getStore();delete m[w],this.setStore(m)}}]),R}();s.default=T},"./src/local-cache/virtual-storage.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(){(0,u.default)(this,T),this.data={}}return(0,_.default)(T,[{key:"get",value:function(f){return this.data[f]}},{key:"set",value:function(f,w){this.data[f]=w}},{key:"remove",value:function(f){delete this.data[f]}}]),T}();s.default=I},"./src/logging/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=a(o("./src/logging/logger.js")),w="Global logger",m=function(){function C(p){(0,T.default)(this,C),this.app=p,this.reset(),p.loggingConfig&&this.setConfig(p.loggingConfig)}return(0,R.default)(C,[{key:"setConfig",value:function(c){c.levels&&(this.levels=c.levels),c.globalLevel&&(this.globalLevel=c.globalLevel),c.loadLevels&&this.loadLoggingLevels()}},{key:"reset",value:function(){this.levels={},this.globalLevel="all",this.loggers={},this.messages=[],this.numOfMessages=10,this.timeFrequency=1,this.messagesLimit=1e3}},{key:"loadLoggingLevels",value:function(){var c=this;this.app.request.get({url:this.app.urls.loggingLevels()}).then(function(y){var E={};y.forEach(function(v){E[v.name]=v.level});var S=E[w];c.setConfig({loggers:E,globalLevel:S})}).catch(function(y){console.error("Could not load logging levels: ",y)})}},{key:"getLogger",value:function(c){if(!c||typeof c!="string")throw new Error("Logger Name must be provided and must be a string.");return this.loggers[c]||(this.loggers[c]=new f.default(c,this)),this.loggers[c]}},{key:"flush",value:function(){var p=(0,I.default)(u.default.mark(function y(){var E=this,S;return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return!this.flushRequest&&this.messages.length&&(this.stopFlushInterval(),S=(0,_.default)(this.messages),this.messages=[],this.flushRequest=this.app.request.put({url:this.app.urls.logging(),data:S}).catch(function(l){throw E.messages=[].concat((0,_.default)(S),(0,_.default)(E.messages)),E.checkMessagesLimit(),l}).finally(function(){return delete E.flushRequest})),h.abrupt("return",this.flushRequest);case 2:case"end":return h.stop()}},y,this)}));function c(){return p.apply(this,arguments)}return c}()},{key:"push",value:function(c,y,E,S){this.messages.push({logger:c,message:g(E),exception:S,"log-level":y,timestamp:Date.now()}),this.checkMessagesLen()}},{key:"checkMessagesLen",value:function(){var c=this;this.checkMessagesLenTimer&&clearTimeout(this.checkMessagesLenTimer),this.checkMessagesLenTimer=setTimeout(function(){c.messages.length>=c.numOfMessages?c.flush():c.startFlushInterval()},0)}},{key:"checkMessagesLimit",value:function(){this.messages.length>this.messagesLimit&&(this.messages=this.messages.slice(this.messages.length-this.messagesLimit))}},{key:"startFlushInterval",value:function(){var c=this;this.flushInterval||(this.flushInterval=setTimeout(function(){return c.flush()},this.timeFrequency*1e3))}},{key:"stopFlushInterval",value:function(){this.flushInterval&&(clearTimeout(this.flushInterval),delete this.flushInterval)}},{key:"setLogReportingPolicy",value:function(c,y){y!==void 0&&this.timeFrequency!==y&&this.stopFlushInterval(),c>this.messagesLimit&&(this.messagesLimit=c),this.numOfMessages=c,this.timeFrequency=y,this.checkMessagesLen()}},{key:"setMessagesLimit",value:function(c){this.messagesLimit=c,this.checkMessagesLimit()}}]),C}();s.default=m;function g(C){return typeof C=="string"?C:typeof C>"u"?"undefined":typeof C=="function"?Object.prototype.toString.call(C):JSON.stringify(C)}},"./src/logging/logger.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I={off:0,fatal:1,error:2,warn:3,info:4,debug:5,trace:6,all:6},T=function(){function R(f,w){(0,u.default)(this,R),this.name=f,this.logging=w}return(0,_.default)(R,[{key:"debug",value:function(w){return this.log("DEBUG",w)}},{key:"info",value:function(w){return this.log("INFO",w)}},{key:"warn",value:function(w,m){return this.log("WARN",w,m)}},{key:"error",value:function(w,m){return this.log("ERROR",w,m)}},{key:"fatal",value:function(w,m){return this.log("FATAL",w,m)}},{key:"trace",value:function(w){return this.log("TRACE",w)}},{key:"log",value:function(w,m,g){if(this.min(w))return this.logging.push(this.name,w,m,g)}},{key:"min",value:function(w){w=w.toLowerCase();var m=this.logging.globalLevel,g=this.logging.levels[this.name];return m&&I[m.toLowerCase()]<I[w]?!1:g?I[g.toLowerCase()]>=I[w]:!0}}]),R}();s.default=T},"./src/management/data.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R){(0,u.default)(this,T),this.app=R}return(0,_.default)(T,[{key:"createTable",value:function(f,w){if(!f||typeof f!="string")throw new Error("Table name must be provided and must be a string.");if(!Array.isArray(w))throw new Error("Columns must be a list.");return this.app.request.post({url:this.app.urls.managementDataTable(),data:{name:f,columns:w}})}}]),T}();s.default=I},"./src/management/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./src/management/data.js")),T=(0,u.default)(function R(f){(0,_.default)(this,R),this.app=f,this.Data=new I.default(f)});s.default=T},"./src/messaging/channel/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/get.js")),T=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),R=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),w=a(o("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=o("./src/rt.js"),g,C;function p(S){var v=c();return function(){var l=(0,f.default)(S),d;if(v){var b=(0,f.default)(this).constructor;d=Reflect.construct(l,arguments,b)}else d=l.apply(this,arguments);return(0,R.default)(this,d)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y={MESSAGE:"MESSAGE"},E=(g=m.RTScopeConnector.connectionRequired(),C=function(S){(0,T.default)(h,S);var v=p(h);function h(l,d){var b;return(0,u.default)(this,h),b=v.call(this,l),b.app=d,b.connect(),b}return(0,_.default)(h,[{key:"connectSubscriber",get:function(){return this.app.RT.subscriptions.connectToPubSub}},{key:"usersSubscriber",get:function(){return this.app.RT.subscriptions.onPubSubUserStatus}},{key:"commandSubscriber",get:function(){return this.app.RT.subscriptions.onPubSubCommand}},{key:"commandSender",get:function(){return this.app.RT.methods.sendPubSubCommand}},{key:"getScopeOptions",value:function(){var d=this.options.name;return{channel:d}}},{key:"connect",value:function(){if(this.app)return(0,I.default)((0,f.default)(h.prototype),"connect",this).call(this)}},{key:"publish",value:function(d,b,O){return this.app.Messaging.publish(this.options.name,d,b,O)}},{key:"addMessageListener",value:function(d,b,O){typeof d=="function"&&(O=b,b=d,d=void 0),this.addSubscription(y.MESSAGE,this.app.RT.subscriptions.onPubSubMessage,{callback:b,onError:O,params:{selector:d}})}},{key:"removeMessageListener",value:function(d,b){if(typeof d=="function"&&(b=d,d=void 0),d&&typeof d!="string")throw new Error("Selector must be a string.");if(typeof b!="function")throw new Error("Callback must be a function.");var O=function(N){return d?N.params.selector===d&&N.callback===b:N.callback===b};this.stopSubscription(y.MESSAGE,{matcher:O})}},{key:"removeMessageListeners",value:function(d){if(typeof d!="string")throw new Error("Selector must be a string.");var b=function(D){return D.params.selector===d};this.stopSubscription(y.MESSAGE,{matcher:b})}},{key:"removeAllMessageListeners",value:function(){this.stopSubscription(y.MESSAGE,{})}},{key:"addCommandListener",value:function(d,b){return(0,I.default)((0,f.default)(h.prototype),"addCommandListener",this).call(this,d,b),this}},{key:"addUserStatusListener",value:function(d,b){return(0,I.default)((0,f.default)(h.prototype),"addUserStatusListener",this).call(this,d,b),this}},{key:"removeCommandListener",value:function(d){return(0,I.default)((0,f.default)(h.prototype),"removeCommandListeners",this).call(this,d),this}},{key:"removeCommandListeners",value:function(d){return(0,I.default)((0,f.default)(h.prototype),"removeCommandListeners",this).call(this,d),this}},{key:"removeUserStatusListeners",value:function(d){return(0,I.default)((0,f.default)(h.prototype),"removeUserStatusListeners",this).call(this,d),this}},{key:"addConnectListener",value:function(d,b){return(0,I.default)((0,f.default)(h.prototype),"addConnectListener",this).call(this,d,b),this}},{key:"removeConnectListeners",value:function(d,b){return(0,I.default)((0,f.default)(h.prototype),"removeConnectListeners",this).call(this,d,b),this}},{key:"removeAllListeners",value:function(){return(0,I.default)((0,f.default)(h.prototype),"removeAllListeners",this).call(this),this}},{key:"send",value:function(d,b){return(0,I.default)((0,f.default)(h.prototype),"send",this).call(this,d,b)}},{key:"join",value:function(){(0,I.default)((0,f.default)(h.prototype),"connect",this).call(this)}},{key:"leave",value:function(){(0,I.default)((0,f.default)(h.prototype),"disconnect",this).call(this)}},{key:"isJoined",value:function(){return(0,I.default)((0,f.default)(h.prototype),"isConnected",this).call(this)}}]),h}(m.RTScopeConnector),(0,w.default)(C.prototype,"addMessageListener",[g],Object.getOwnPropertyDescriptor(C.prototype,"addMessageListener"),C.prototype),C);s.default=E},"./src/messaging/helpers/body-parts.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=(0,u.default)(function T(R){(0,_.default)(this,T),R=R||{},this.textmessage=R&&R.textmessage,this.htmlmessage=R&&R.htmlmessage});s.default=I},"./src/messaging/helpers/delivery-options.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=(0,u.default)(function T(R){(0,_.default)(this,T),R=R||{},this.publishPolicy=R.publishPolicy||void 0,this.pushBroadcast=R.pushBroadcast||void 0,this.pushSinglecast=R.pushSinglecast||void 0,this.publishAt=R.publishAt||void 0,this.repeatEvery=R.repeatEvery||void 0,this.repeatExpiresAt=R.repeatExpiresAt||void 0});s.default=I},"./src/messaging/helpers/email-envelope.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/utils.js")),T=function(){function R(f){(0,u.default)(this,R),f=f||{},this.addresses=I.default.castArray(f.addresses),this.ccAddresses=I.default.castArray(f.ccAddresses),this.bccAddresses=I.default.castArray(f.bccAddresses),this.query=f.query||null,this.uniqueEmails=f.uniqueEmails||!1}return(0,_.default)(R,[{key:"setTo",value:function(w){return this.addresses=I.default.castArray(w),this}},{key:"addTo",value:function(w){return this.addresses=this.addresses.concat(I.default.castArray(w)),this}},{key:"getTo",value:function(){return this.addresses}},{key:"setCc",value:function(w){return this.ccAddresses=I.default.castArray(w),this}},{key:"addCc",value:function(w){return this.ccAddresses=this.ccAddresses.concat(I.default.castArray(w)),this}},{key:"getCc",value:function(){return this.ccAddresses}},{key:"setBcc",value:function(w){return this.bccAddresses=I.default.castArray(w),this}},{key:"addBcc",value:function(w){return this.bccAddresses=this.bccAddresses.concat(I.default.castArray(w)),this}},{key:"getBcc",value:function(){return this.bccAddresses}},{key:"setQuery",value:function(w){return this.query=w,this}},{key:"getQuery",value:function(){return this.query}},{key:"setUniqueEmails",value:function(w){return this.uniqueEmails=w,this}},{key:"getUniqueEmails",value:function(){return this.uniqueEmails}},{key:"toJSON",value:function(){var w={};return this.addresses.length>0&&(w.addresses=this.addresses),this.ccAddresses.length>0&&(w["cc-addresses"]=this.ccAddresses),this.bccAddresses.length>0&&(w["bcc-addresses"]=this.bccAddresses),this.query&&(w.criteria=this.query),w.uniqueEmails=this.uniqueEmails,w}}],[{key:"create",value:function(w){return new R(w)}}]),R}();s.default=T},"./src/messaging/helpers/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Bodyparts",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(s,"DeliveryOptions",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(s,"EmailEnvelope",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(s,"PublishOptions",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(s,"PublishOptionsHeaders",{enumerable:!0,get:function(){return u.default}});var u=a(o("./src/messaging/helpers/publish-options-header.js")),_=a(o("./src/messaging/helpers/publish-options.js")),I=a(o("./src/messaging/helpers/delivery-options.js")),T=a(o("./src/messaging/helpers/body-parts.js")),R=a(o("./src/messaging/helpers/email-envelope.js"))},"./src/messaging/helpers/publish-options-header.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o={MESSAGE_TAG:"message",IOS_ALERT_TAG:"ios-alert",IOS_BADGE_TAG:"ios-badge",IOS_SOUND_TAG:"ios-sound",ANDROID_TICKER_TEXT_TAG:"android-ticker-text",ANDROID_CONTENT_TITLE_TAG:"android-content-title",ANDROID_CONTENT_TEXT_TAG:"android-content-text",ANDROID_ACTION_TAG:"android-action",WP_TYPE_TAG:"wp-type",WP_TITLE_TAG:"wp-title",WP_TOAST_SUBTITLE_TAG:"wp-subtitle",WP_TOAST_PARAMETER_TAG:"wp-parameter",WP_TILE_BACKGROUND_IMAGE:"wp-backgroundImage",WP_TILE_COUNT:"wp-count",WP_TILE_BACK_TITLE:"wp-backTitle",WP_TILE_BACK_BACKGROUND_IMAGE:"wp-backImage",WP_TILE_BACK_CONTENT:"wp-backContent",WP_RAW_DATA:"wp-raw"},a=o;s.default=a},"./src/messaging/helpers/publish-options.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=(0,u.default)(function T(R){(0,_.default)(this,T),R=R||{},this.publisherId=R.publisherId||void 0,this.headers=R.headers||void 0,this.subtopic=R.subtopic||void 0});s.default=I},"./src/messaging/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/extends.js")),I=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),T=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),R=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),f=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),w=a(o("./src/messaging/channel/index.js")),m=o("./src/messaging/helpers/index.js"),g=function(){function p(c){(0,R.default)(this,p),this.app=c,this.Bodyparts=m.Bodyparts,this.PublishOptions=m.PublishOptions,this.DeliveryOptions=m.DeliveryOptions,this.PublishOptionsHeaders=m.PublishOptionsHeaders,this.EmailEnvelope=m.EmailEnvelope}return(0,f.default)(p,[{key:"subscribe",value:function(y){return C(y),new w.default({name:y},this.app)}},{key:"publish",value:function(){var c=(0,T.default)(u.default.mark(function E(S,v,h,l){var d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(C(S),d={message:v},!h){O.next=6;break}if(!(Array.isArray(h)||(0,I.default)(h)!=="object")){O.next=5;break}throw new Error('"publishOptions" argument must be an object.');case 5:(0,_.default)(d,h);case 6:if(!l){O.next=10;break}if(!(Array.isArray(l)||(0,I.default)(l)!=="object")){O.next=9;break}throw new Error('"deliveryOptions" argument must be an object.');case 9:(0,_.default)(d,l);case 10:return O.abrupt("return",this.app.request.post({url:this.app.urls.messagingChannel(S),data:d}));case 11:case"end":return O.stop()}},E,this)}));function y(E,S,v,h){return c.apply(this,arguments)}return y}()},{key:"deleteChannel",value:function(){var c=(0,T.default)(u.default.mark(function E(S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return C(S),h.abrupt("return",this.app.request.delete({url:this.app.urls.messagingChannelName(S)}));case 2:case"end":return h.stop()}},E,this)}));function y(E){return c.apply(this,arguments)}return y}()},{key:"pushWithTemplate",value:function(){var c=(0,T.default)(u.default.mark(function E(S,v){var h;return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!S||typeof S!="string")){d.next=2;break}throw new Error("Push Template Name must be provided and must be a string.");case 2:return h={},v&&(h.templateValues=v),d.abrupt("return",this.app.request.post({url:this.app.urls.messagingPushWithTemplate(S),data:h}));case 5:case"end":return d.stop()}},E,this)}));function y(E,S){return c.apply(this,arguments)}return y}()},{key:"sendEmail",value:function(){var c=(0,T.default)(u.default.mark(function E(S,v,h,l){var d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!S||typeof S!="string")){O.next=2;break}throw new Error("Email Subject must be provided and must be a string.");case 2:if(!(!v||Array.isArray(v)||(0,I.default)(v)!=="object")){O.next=4;break}throw new Error("BodyParts must be an object");case 4:if(!(!v.textmessage&&!v.htmlmessage)){O.next=6;break}throw new Error("BodyParts must contain at least one property of [ textmessage | htmlmessage ]");case 6:if(!(!Array.isArray(h)||!h.length)){O.next=8;break}throw new Error("Recipients must be a non empty array.");case 8:return d={subject:S,bodyparts:v,to:h},Array.isArray(l)&&l.length&&(d.attachment=l),O.abrupt("return",this.app.request.post({url:this.app.urls.messagingEmail(),data:d}));case 11:case"end":return O.stop()}},E,this)}));function y(E,S,v,h){return c.apply(this,arguments)}return y}()},{key:"sendEmailFromTemplate",value:function(){var c=(0,T.default)(u.default.mark(function E(S,v,h,l){var d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!S||typeof S!="string")){O.next=2;break}throw new Error("Email Template Name must be provided and must be a string.");case 2:if(v instanceof m.EmailEnvelope){O.next=4;break}throw new Error("EmailEnvelope is required and should be instance of Backendless.Messaging.EmailEnvelope");case 4:return d=v.toJSON(),d["template-name"]=S,h&&!Array.isArray(h)&&(d["template-values"]=h),Array.isArray(h)&&!l&&(l=h),l&&(d.attachment=l),O.abrupt("return",this.app.request.post({url:this.app.urls.emailTemplateSend(),data:d}));case 10:case"end":return O.stop()}},E,this)}));function y(E,S,v,h){return c.apply(this,arguments)}return y}()},{key:"cancel",value:function(){var c=(0,T.default)(u.default.mark(function E(S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!S||typeof S!="string")){h.next=2;break}throw new Error("Message ID must be provided and must be a string.");case 2:return h.abrupt("return",this.app.request.delete({url:this.app.urls.messagingMessage(S)}));case 3:case"end":return h.stop()}},E,this)}));function y(E){return c.apply(this,arguments)}return y}()},{key:"registerDevice",value:function(){var c=(0,T.default)(u.default.mark(function E(S,v,h){var l,d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=this.app.device,d={deviceToken:S,deviceId:l.uuid,os:l.platform,osVersion:l.version},Array.isArray(v)&&(d.channels=v),typeof h=="number"?d.expiration=h:h instanceof Date&&(d.expiration=h.getTime()/1e3),O.abrupt("return",this.app.request.post({url:this.app.urls.messagingRegistrations(),data:d}));case 5:case"end":return O.stop()}},E,this)}));function y(E,S,v){return c.apply(this,arguments)}return y}()},{key:"getRegistrations",value:function(){var c=(0,T.default)(u.default.mark(function E(){var S;return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return S=this.app.device,h.abrupt("return",this.app.request.get({url:this.app.urls.messagingRegistrationDevice(S.uuid)}));case 2:case"end":return h.stop()}},E,this)}));function y(){return c.apply(this,arguments)}return y}()},{key:"unregisterDevice",value:function(){var c=(0,T.default)(u.default.mark(function E(){var S;return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return S=this.app.device,h.abrupt("return",this.app.request.delete({url:this.app.urls.messagingRegistrationDevice(S.uuid)}));case 2:case"end":return h.stop()}},E,this)}));function y(){return c.apply(this,arguments)}return y}()},{key:"getMessageStatus",value:function(){var c=(0,T.default)(u.default.mark(function E(S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!S||typeof S!="string")){h.next=2;break}throw new Error("Message ID must be provided and must be a string.");case 2:return h.abrupt("return",this.app.request.get({url:this.app.urls.messagingMessage(S)}));case 3:case"end":return h.stop()}},E,this)}));function y(E){return c.apply(this,arguments)}return y}()},{key:"getPushTemplates",value:function(){var c=(0,T.default)(u.default.mark(function E(S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!S||typeof S!="string")){h.next=2;break}throw new Error("Device Type must be provided and must be a string.");case 2:return h.abrupt("return",this.app.request.get({url:this.app.urls.messagingPushTemplates(S)}));case 3:case"end":return h.stop()}},E,this)}));function y(E){return c.apply(this,arguments)}return y}()}]),p}();s.default=g;function C(p){if(!p||typeof p!="string")throw new Error("Channel Name must be provided and must be a string.");if(p.indexOf("/")>=0)throw new Error("Channel Name can not contain slash chars")}},"./src/persmission.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),T={GRANT:"GRANT",DENY:"DENY"},R=function(){function f(w,m){(0,u.default)(this,f),this.permission=w,this.app=m,this.grantUser=this.backwardCompatibility("grantForUser","grantUser"),this.denyUser=this.backwardCompatibility("denyForUser","denyUser"),this.grantRole=this.backwardCompatibility("grantForRole","grantRole"),this.denyRole=this.backwardCompatibility("denyForRole","denyRole"),this.grant=this.backwardCompatibility("grantForAllUsers","grant"),this.deny=this.backwardCompatibility("denyForAllUsers","deny")}return(0,_.default)(f,[{key:"backwardCompatibility",value:function(m,g){var C=this,p=this.constructor.BACKWARD_COMPATIBILITY_LABEL;return function(){var c='"'.concat(p,".").concat(g,'" is deprecated and will be removed in the nearest release.'),y='Please use "'.concat(p,".").concat(m,'" instead of.');return console.warn("".concat(c,`
`).concat(y)),C[m].apply(C,arguments)}}},{key:"grantForUser",value:function(m,g){return this.sendRequest(T.GRANT,g,{userId:m})}},{key:"denyForUser",value:function(m,g){return this.sendRequest(T.DENY,g,{userId:m})}},{key:"grantForRole",value:function(m,g){return this.sendRequest(T.GRANT,g,{roleName:m})}},{key:"denyForRole",value:function(m,g){return this.sendRequest(T.DENY,g,{roleName:m})}},{key:"grantForAllUsers",value:function(m){return this.sendRequest(T.GRANT,m,{userId:"*"})}},{key:"denyForAllUsers",value:function(m){return this.sendRequest(T.DENY,m,{userId:"*"})}},{key:"grantForAllRoles",value:function(m){return this.sendRequest(T.GRANT,m,{roleName:"*"})}},{key:"denyForAllRoles",value:function(m){return this.sendRequest(T.DENY,m,{roleName:"*"})}},{key:"sendRequest",value:function(m,g,C){var p=C.userId,c=C.roleName,y={permission:this.permission};return p?y.user=p:c&&(y.role=c),this.app.request.put({url:this.getRequestURL(m,g),data:y})}},{key:"getRequestURL",value:function(){}}]),f}();s.default=R,(0,I.default)(R,"BACKWARD_COMPATIBILITY_LABEL",null)},"./src/request/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/backendless-request/dist/backendless-request.js"));function R(g,C){var p=Object.keys(g);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(g);C&&(c=c.filter(function(y){return Object.getOwnPropertyDescriptor(g,y).enumerable})),p.push.apply(p,c)}return p}function f(g){for(var C=1;C<arguments.length;C++){var p=arguments[C]!=null?arguments[C]:{};C%2?R(Object(p),!0).forEach(function(c){(0,u.default)(g,c,p[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(p)):R(Object(p)).forEach(function(c){Object.defineProperty(g,c,Object.getOwnPropertyDescriptor(p,c))})}return g}var w={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH"},m=function(){function g(C){(0,_.default)(this,g),this.app=C,this.Methods=w}return(0,I.default)(g,[{key:"send",value:function(p){T.default.verbose=!!this.app.debugMode,T.default.XMLHttpRequest=this.app.XMLHttpRequest;var c=p.method.toLowerCase(),y=p.headers||{},E=this.app.getCurrentUserToken();return E&&(y["user-token"]=E),p.queryString&&(p.url="".concat(p.url,"?").concat(p.queryString)),T.default[c](p.url,p.data).set(y).query(p.query).form(p.form)}},{key:"get",value:function(p){return this.send(f(f({},p),{},{method:w.GET}))}},{key:"post",value:function(p){return this.send(f(f({},p),{},{method:w.POST}))}},{key:"put",value:function(p){return this.send(f(f({},p),{},{method:w.PUT}))}},{key:"delete",value:function(p){return this.send(f(f({},p),{},{method:w.DELETE}))}}]),g}();s.default=m},"./src/rso/connection.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),I=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),T=a(o("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),R=a(o("./node_modules/@babel/runtime/helpers/get.js")),f=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),w=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),g=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),C=a(o("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),p=o("./src/rt.js"),c,y,E,S,v,h,l,d,b,O;function D(P,x){var A=Object.keys(P);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(P);x&&(k=k.filter(function(F){return Object.getOwnPropertyDescriptor(P,F).enumerable})),A.push.apply(A,k)}return A}function N(P){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?D(Object(A),!0).forEach(function(k){(0,g.default)(P,k,A[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(A)):D(Object(A)).forEach(function(k){Object.defineProperty(P,k,Object.getOwnPropertyDescriptor(A,k))})}return P}function L(P){var x=B();return function(){var k=(0,m.default)(P),F;if(x){var j=(0,m.default)(this).constructor;F=Reflect.construct(k,arguments,j)}else F=k.apply(this,arguments);return(0,w.default)(this,F)}}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var G={CHANGES:"CHANGES",CLEARED:"CLEARED",INVOKE:"INVOKE"},V=(c=p.RTScopeConnector.connectionRequired(),y=p.RTScopeConnector.connectionRequired(),E=p.RTScopeConnector.connectionRequired(),S=p.RTScopeConnector.connectionRequired(),v=p.RTScopeConnector.connectionRequired(!0),h=p.RTScopeConnector.connectionRequired(!0),l=p.RTScopeConnector.connectionRequired(!0),d=p.RTScopeConnector.connectionRequired(!0),b=p.RTScopeConnector.connectionRequired(!0),O=function(P){(0,f.default)(A,P);var x=L(A);function A(k,F){var j;return(0,_.default)(this,A),j=x.call(this,k),(0,g.default)((0,T.default)(j),"onInvoke",function(U){var z,H=U.method,$=U.args;M(j.invocationTarget,H),(z=j.invocationTarget)[H].apply(z,(0,u.default)($))}),j.app=F,j.invocationTarget=null,j.connect(),j}return(0,I.default)(A,[{key:"connectSubscriber",get:function(){return this.app.RT.subscriptions.connectToRSO}},{key:"usersSubscriber",get:function(){return this.app.RT.subscriptions.onRSOUserStatus}},{key:"commandSubscriber",get:function(){return this.app.RT.subscriptions.onRSOCommand}},{key:"commandSender",get:function(){return this.app.RT.methods.sendRSOCommand}},{key:"setInvocationTarget",value:function(F){this.invocationTarget=F}},{key:"connect",value:function(){if(this.app)return(0,R.default)((0,m.default)(A.prototype),"connect",this).call(this)}},{key:"onConnect",value:function(){(0,R.default)((0,m.default)(A.prototype),"onConnect",this).apply(this,arguments),this.addSubscription(G.INVOKE,this.app.RT.subscriptions.onRSOInvoke,{callback:this.onInvoke})}},{key:"onDisconnect",value:function(){this.stopSubscription(G.INVOKE,{callback:this.onInvoke}),(0,R.default)((0,m.default)(A.prototype),"onDisconnect",this).apply(this,arguments)}},{key:"addChangesListener",value:function(F,j){this.addSubscription(G.CHANGES,this.app.RT.subscriptions.onRSOChanges,{callback:F,onError:j})}},{key:"removeChangesListeners",value:function(F){this.stopSubscription(G.CHANGES,{callback:F})}},{key:"addClearListener",value:function(F,j){this.addSubscription(G.CLEARED,this.app.RT.subscriptions.onRSOClear,{callback:F,onError:j})}},{key:"removeClearListeners",value:function(F){this.stopSubscription(G.CLEARED,{callback:F})}},{key:"addCommandListener",value:function(F,j){return(0,R.default)((0,m.default)(A.prototype),"addCommandListener",this).call(this,F,j),this}},{key:"removeCommandListener",value:function(F){return(0,R.default)((0,m.default)(A.prototype),"removeCommandListeners",this).call(this,F),this}},{key:"removeCommandListeners",value:function(F){return(0,R.default)((0,m.default)(A.prototype),"removeCommandListeners",this).call(this,F),this}},{key:"addUserStatusListener",value:function(F,j){return(0,R.default)((0,m.default)(A.prototype),"addUserStatusListener",this).call(this,F,j),this}},{key:"removeUserStatusListeners",value:function(F){return(0,R.default)((0,m.default)(A.prototype),"removeUserStatusListeners",this).call(this,F),this}},{key:"addConnectListener",value:function(F,j){return(0,R.default)((0,m.default)(A.prototype),"addConnectListener",this).call(this,F,j),this}},{key:"removeConnectListeners",value:function(F,j){return(0,R.default)((0,m.default)(A.prototype),"removeConnectListeners",this).call(this,F,j),this}},{key:"removeAllListeners",value:function(){return(0,R.default)((0,m.default)(A.prototype),"removeAllListeners",this).call(this),this}},{key:"get",value:function(F){return this.app.RT.methods.getRSO(N(N({},this.getScopeOptions()),{},{key:F}))}},{key:"set",value:function(F,j){return this.app.RT.methods.setRSO(N(N({},this.getScopeOptions()),{},{key:F,data:j}))}},{key:"clear",value:function(){return this.app.RT.methods.clearRSO(this.getScopeOptions())}},{key:"invoke",value:function(F){for(var j=arguments.length,U=new Array(j>1?j-1:0),z=1;z<j;z++)U[z-1]=arguments[z];return this.invokeOn.apply(this,[F,void 0].concat(U))}},{key:"invokeOn",value:function(F,j){for(var U=this,z=arguments.length,H=new Array(z>2?z-2:0),$=2;$<z;$++)H[$-2]=arguments[$];return Promise.resolve().then(function(){return M(U.invocationTarget,F)}).then(function(){return U.app.RT.methods.invokeRSOMethod(N(N({},U.getScopeOptions()),{},{method:F,targets:j,args:H}))})}}]),A}(p.RTScopeConnector),(0,C.default)(O.prototype,"addChangesListener",[c],Object.getOwnPropertyDescriptor(O.prototype,"addChangesListener"),O.prototype),(0,C.default)(O.prototype,"removeChangesListeners",[y],Object.getOwnPropertyDescriptor(O.prototype,"removeChangesListeners"),O.prototype),(0,C.default)(O.prototype,"addClearListener",[E],Object.getOwnPropertyDescriptor(O.prototype,"addClearListener"),O.prototype),(0,C.default)(O.prototype,"removeClearListeners",[S],Object.getOwnPropertyDescriptor(O.prototype,"removeClearListeners"),O.prototype),(0,C.default)(O.prototype,"get",[v],Object.getOwnPropertyDescriptor(O.prototype,"get"),O.prototype),(0,C.default)(O.prototype,"set",[h],Object.getOwnPropertyDescriptor(O.prototype,"set"),O.prototype),(0,C.default)(O.prototype,"clear",[l],Object.getOwnPropertyDescriptor(O.prototype,"clear"),O.prototype),(0,C.default)(O.prototype,"invoke",[d],Object.getOwnPropertyDescriptor(O.prototype,"invoke"),O.prototype),(0,C.default)(O.prototype,"invokeOn",[b],Object.getOwnPropertyDescriptor(O.prototype,"invokeOn"),O.prototype),O);s.default=V;function M(P,x){if(!P)throw new Error('"invocationTarget" is not specified');if(typeof P[x]!="function")throw new Error('Method "'.concat(x,'" of invocationTarget is not function'))}},"./src/rso/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=a(o("./src/rso/connection.js")),T=function(){function R(f){(0,u.default)(this,R),this.app=f}return(0,_.default)(R,[{key:"connect",value:function(w){return new I.default({name:w},this.app)}}]),R}();s.default=T},"./src/rt.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.RTScopeConnector=s.RTListeners=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),f=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),w=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=a(o("./node_modules/backendless-request/dist/backendless-request.js")),g=a(o("./node_modules/backendless-rt-client/dist/backendless-rt-client.js")),C=a(o("./src/utils.js"));function p(h){var l=c();return function(){var b=(0,w.default)(h),O;if(l){var D=(0,w.default)(this).constructor;O=Reflect.construct(b,arguments,D)}else O=b.apply(this,arguments);return(0,f.default)(this,O)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y=g.default.Listeners;s.RTListeners=y;var E=g.default.ScopeConnector;s.RTScopeConnector=E;function S(h){return m.default.get("".concat(h,"/info"))}var v=function(h){(0,R.default)(d,h);var l=p(d);function d(b){var O;(0,I.default)(this,d);var D=b.appId,N=b.apiKey,L=b.appPath,B=b.debugMode,G=C.default.uuid(),V="".concat(L,"/rt/lookup");return O=l.call(this,{appId:D||void 0,lookupPath:V,debugMode:B,connectQuery:function(){var P=b.getCurrentUserToken();return{apiKey:N||void 0,clientId:G,userToken:P}},socketConfigTransform:function(){var M=(0,_.default)(u.default.mark(function x(A){var k;return u.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(D){j.next=7;break}return j.next=3,S(L);case 3:k=j.sent,A.url="".concat(A.host,"/").concat(k.appId),A.options.path="/".concat(k.appId),A.options.query.apiKey=k.apiKey;case 7:return j.abrupt("return",A);case 8:case"end":return j.stop()}},x)}));function P(x){return M.apply(this,arguments)}return P}()}),O.app=b,O}return(0,T.default)(d,[{key:"updateUserTokenIfNeeded",value:function(){if(this.session){var O=this.app.getCurrentUserToken();this.methods.setUserToken({userToken:O})}}},{key:"setDebugMode",value:function(O){this.setConfig({debugMode:O})}}]),d}(g.default);s.default=v},"./src/unit-of-work/constants.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.OperationType=s.IsolationLevelEnum=void 0;var o={CREATE:"CREATE",CREATE_BULK:"CREATE_BULK",UPDATE:"UPDATE",UPDATE_BULK:"UPDATE_BULK",DELETE:"DELETE",DELETE_BULK:"DELETE_BULK",UPSERT:"UPSERT",UPSERT_BULK:"UPSERT_BULK",FIND:"FIND",ADD_RELATION:"ADD_RELATION",SET_RELATION:"SET_RELATION",DELETE_RELATION:"DELETE_RELATION"};s.OperationType=o;var a={READ_UNCOMMITTED:"READ_UNCOMMITTED",READ_COMMITTED:"READ_COMMITTED",REPEATABLE_READ:"REPEATABLE_READ",SERIALIZABLE:"SERIALIZABLE"};s.IsolationLevelEnum=a},"./src/unit-of-work/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=G;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),R=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),w=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),m=a(o("./node_modules/@babel/runtime/helpers/inherits.js")),g=a(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),C=a(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=a(o("./node_modules/@babel/runtime/helpers/wrapNativeSuper.js")),c=a(o("./src/utils.js")),y=a(o("./src/data/data-query-builder.js")),E=o("./src/unit-of-work/constants.js"),S=o("./src/unit-of-work/json-adapter.js"),v=o("./src/unit-of-work/op-result.js"),h=o("./src/unit-of-work/op-result-value-reference.js"),l=["meta"];function d(V,M){var P=Object.keys(V);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(V);M&&(x=x.filter(function(A){return Object.getOwnPropertyDescriptor(V,A).enumerable})),P.push.apply(P,x)}return P}function b(V){for(var M=1;M<arguments.length;M++){var P=arguments[M]!=null?arguments[M]:{};M%2?d(Object(P),!0).forEach(function(x){(0,R.default)(V,x,P[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(P)):d(Object(P)).forEach(function(x){Object.defineProperty(V,x,Object.getOwnPropertyDescriptor(P,x))})}return V}function O(V){var M=D();return function(){var x=(0,C.default)(V),A;if(M){var k=(0,C.default)(this).constructor;A=Reflect.construct(x,arguments,k)}else A=x.apply(this,arguments);return(0,g.default)(this,A)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var N=function(V){(0,m.default)(P,V);var M=O(P);function P(x,A){var k;return(0,f.default)(this,P),k=M.call(this,x.message),k.code=x.code,k.operation=A,k}return(0,w.default)(P,[{key:"toJSON",value:function(){return{message:this.message,operation:this.operation}}}]),P}((0,p.default)(Error)),L=function(){function V(M){var P=M.success,x=M.error,A=M.results;(0,f.default)(this,V),this.success=P,this.error=x,this.results=A}return(0,w.default)(V,[{key:"isSuccess",value:function(){return this.success}},{key:"getError",value:function(){return this.error}},{key:"getResults",value:function(){return this.results}}]),V}(),B=function(){function V(M,P){(0,f.default)(this,V),this.app=P,this.payload={isolationLevelEnum:M,operations:[]},this.usedOpIds={}}return(0,w.default)(V,[{key:"getOpResultById",value:function(P){var x=this.payload.operations.find(function(A){return A.meta.opResult.getOpResultId()===P});return x.meta.opResult}},{key:"setIsolationLevel",value:function(P){this.payload.isolationLevelEnum=P}},{key:"getOpStackName",value:function(P,x){return"".concat(P.toLowerCase()).concat(x)}},{key:"getNextOpResultIndex",value:function(P){return this.usedOpIds[P]||(this.usedOpIds[P]=0),++this.usedOpIds[P]}},{key:"addOperations",value:function(P,x,A){Array.isArray(A)?A=A.map(function(F){return delete F.___jsonclass,F}):delete A.___jsonclass;var k=new v.OpResult(this,{operationType:P,table:x,payload:A});return this.payload.operations.push({operationType:P,table:x,payload:A,meta:{opResult:k}}),k}},{key:"composePayload",value:function(){return b(b({},this.payload),{},{operations:this.payload.operations.map(function(P){var x=P.meta,A=(0,T.default)(P,l);return b(b({},A),{},{opResultId:x.opResult.getOpResultId()})})})}},{key:"execute",value:function(){var M=(0,I.default)(u.default.mark(function x(){var A;return u.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.app.request.post({url:this.app.urls.transactions(),data:this.composePayload()});case 2:return A=F.sent,F.abrupt("return",this.setResult(A));case 4:case"end":return F.stop()}},x,this)}));function P(){return M.apply(this,arguments)}return P}()},{key:"setResult",value:function(P){if(P.results&&this.payload.operations.forEach(function(A){var k=A.meta.opResult.getOpResultId();P.results[k]&&A.meta.opResult.setResult(P.results[k].result)}),P.error){var x=this.payload.operations.find(function(A){return P.error.operation.opResultId===A.meta.opResult.getOpResultId()});P.error=new N(P.error,x.meta.opResult),x.meta.opResult.setError(P.error)}return new L(P)}},{key:"find",value:function(P,x){var A=x instanceof y.default?x.toJSON():x||{};if(!P||typeof P!="string")throw new Error("Invalid arguments");if((0,_.default)(A)!=="object"||Array.isArray(A))throw new Error("Invalid arguments");var k={queryOptions:{}};return A.pageSize>0&&(k.pageSize=A.pageSize),A.offset>0&&(k.offset=A.offset),A.properties&&(k.properties=A.properties),A.excludeProps&&(k.excludeProps=A.excludeProps),A.excludeProps&&(k.excludeProps=A.excludeProps),A.where&&(k.whereClause=A.where),A.having&&(k.havingClause=A.having),A.groupBy&&(k.groupBy=A.groupBy),A.sortBy&&(k.queryOptions.sortBy=A.sortBy),A.relations&&(k.queryOptions.related=A.relations),A.relationsDepth&&(k.queryOptions.relationsDepth=A.relationsDepth),A.relationsPageSize>0&&(k.queryOptions.relationsPageSize=A.relationsPageSize),this.addOperations(E.OperationType.FIND,P,k)}},{key:"upsert",value:function(){var P,x;if(arguments.length===1)P=c.default.getClassName(arguments.length<=0?void 0:arguments[0]),x=arguments.length<=0?void 0:arguments[0];else if(arguments.length===2)P=arguments.length<=0?void 0:arguments[0],x=arguments.length<=1?void 0:arguments[1];else throw new Error("Invalid arguments");if(!P||typeof P!="string")throw new Error("Invalid arguments");if(!x||(0,_.default)(x)!=="object"||Array.isArray(x))throw new Error("Invalid arguments");return this.addOperations(E.OperationType.UPSERT,P,x)}},{key:"create",value:function(){var P,x;if(arguments.length===1)P=c.default.getClassName(arguments.length<=0?void 0:arguments[0]),x=arguments.length<=0?void 0:arguments[0];else if(arguments.length===2)P=arguments.length<=0?void 0:arguments[0],x=arguments.length<=1?void 0:arguments[1];else throw new Error("Invalid arguments");if(!P||typeof P!="string")throw new Error("Invalid arguments");if(!x||(0,_.default)(x)!=="object"||Array.isArray(x))throw new Error("Invalid arguments");return this.addOperations(E.OperationType.CREATE,P,x)}},{key:"update",value:function(){for(var P,x,A=arguments.length,k=new Array(A),F=0;F<A;F++)k[F]=arguments[F];if(k.length===1)P=c.default.getClassName(k[0]),x=k[0];else if(k.length===2&&typeof k[0]=="string")P=k[0],x=k[1];else if(k[0]instanceof v.OpResult||k[0]instanceof h.OpResultValueReference)if(P=k[0].getTableName(),x={objectId:k[0]},k.length===3&&typeof k[1]=="string")x[k[1]]=k[2];else if(k.length===2)x=b(b({},x),k[1]);else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!P||typeof P!="string")throw new Error("Invalid arguments");return this.addOperations(E.OperationType.UPDATE,P,x)}},{key:"delete",value:function(){for(var P,x,A=arguments.length,k=new Array(A),F=0;F<A;F++)k[F]=arguments[F];if(k.length===1)k[0]instanceof v.OpResult||k[0]instanceof h.OpResultValueReference?(P=k[0].getTableName(),x=k[0]):k[0]&&(0,_.default)(k[0])==="object"&&!Array.isArray(k[0])&&(P=c.default.getClassName(k[0]),x=k[0].objectId);else if(k.length===2)P=k[0],x=k[1]&&k[1].objectId||k[1];else throw new Error("Invalid arguments");if(!x||Array.isArray(x)||typeof x!="string"&&(0,_.default)(x)!=="object")throw new Error("Invalid arguments");if(!P||typeof P!="string")throw new Error("Table Name must be a string.");return this.addOperations(E.OperationType.DELETE,P,x)}},{key:"bulkUpsert",value:function(P,x){if(Array.isArray(P)&&(x=P,P=c.default.getClassName(x[0])),!x||!Array.isArray(x))throw new Error("Objects must be an array of objects.");if(!P||typeof P!="string")throw new Error("Table Name must be a string.");return this.addOperations(E.OperationType.UPSERT_BULK,P,x)}},{key:"bulkCreate",value:function(P,x){if(Array.isArray(P)&&(x=P,P=c.default.getClassName(x[0])),!x||!Array.isArray(x))throw new Error("Objects must be an array of objects.");if(!P||typeof P!="string")throw new Error("Table Name must be a string.");return this.addOperations(E.OperationType.CREATE_BULK,P,x)}},{key:"bulkUpdate",value:function(){for(var P,x={},A=arguments.length,k=new Array(A),F=0;F<A;F++)k[F]=arguments[F];if(k.length===2)x.changes=k[1],typeof k[0]=="string"?(P=c.default.getClassName(k[1]),x.conditional=k[0]):k[0]instanceof v.OpResult&&(P=k[0].getTableName(),x.unconditional=k[0]);else if(k.length===3)if(P=k[0],x.changes=k[2],typeof k[1]=="string")x.conditional=k[1];else if(Array.isArray(k[1]))x.unconditional=k[1].map(function(j){return j.objectId||j});else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!P||typeof P!="string")throw new Error("Table Name must be a string.");return this.addOperations(E.OperationType.UPDATE_BULK,P,x)}},{key:"bulkDelete",value:function(){for(var P={},x,A=arguments.length,k=new Array(A),F=0;F<A;F++)k[F]=arguments[F];if(k.length===1)if(k[0]instanceof v.OpResult)x=k[0].getTableName(),P.unconditional=k[0];else if(Array.isArray(k[0]))x=c.default.getClassName(k[0][0]),P.unconditional=k[0].map(function(j){return j.objectId});else throw new Error("Invalid arguments");else if(k.length===2)if(x=k[0],typeof k[1]=="string")P.conditional=k[1];else if(Array.isArray(k[1]))P.unconditional=k[1].map(function(j){return j.objectId||j});else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!x||typeof x!="string")throw new Error("Table Name must be a string.");return this.addOperations(E.OperationType.DELETE_BULK,x,P)}},{key:"addToRelation",value:function(){for(var P=arguments.length,x=new Array(P),A=0;A<P;A++)x[A]=arguments[A];return this.relationsOperation(E.OperationType.ADD_RELATION,x)}},{key:"setRelation",value:function(){for(var P=arguments.length,x=new Array(P),A=0;A<P;A++)x[A]=arguments[A];return this.relationsOperation(E.OperationType.SET_RELATION,x)}},{key:"deleteRelation",value:function(){for(var P=arguments.length,x=new Array(P),A=0;A<P;A++)x[A]=arguments[A];return this.relationsOperation(E.OperationType.DELETE_RELATION,x)}},{key:"relationsOperation",value:function(P,x){var A,k,F,j,U,z;if(x.length===3)if(F=x[0],k=x[1],z=x[2],F instanceof v.OpResult||F instanceof h.OpResultValueReference)A=F.getTableName();else if(F&&(0,_.default)(F)==="object")A=c.default.getClassName(F);else throw new Error("Invalid the first argument, it must be an instance of [OpResult|OpResultValueReference|Object]");else if(x.length===4)if(A=x[0],k=x[2],z=x[3],typeof x[1]=="string")F=x[1];else if(x[1]&&(0,_.default)(x[1])==="object")F=x[1];else throw new Error("Invalid the second argument, it must be an Object or objectId");else throw new Error("Invalid arguments");if(F&&F.objectId&&(F=F.objectId),typeof z=="string"?j=z:z instanceof v.OpResult&&z.isCollectionRef()?U=z:(Array.isArray(z)||(z=[z]),U=z.map(function($){if($){if($ instanceof v.OpResult||$ instanceof h.OpResultValueReference||typeof $=="string")return $;if($.objectId)return $.objectId}throw new Error("Invalid child argument, it must be an instance of [OpResult|OpResultValueReference|Object] or objectId")})),!k||typeof k!="string")throw new Error('Invalid "relationColumn" parameter, check passed arguments');if(!U&&!j)throw new Error('Neither "unconditional" nor "conditional" parameter is specified, check passed arguments');if(!A||typeof A!="string")throw new Error("Table Name must be a string.");var H={parentObject:F,relationColumn:k};return j?H.conditional=j:H.unconditional=U,this.addOperations(P,A,H)}}]),V}();(0,R.default)(B,"IsolationLevelEnum",E.IsolationLevelEnum),(0,R.default)(B,"OpResult",v.OpResult),(0,R.default)(B,"OpResultValueReference",h.OpResultValueReference);function G(V){return function(M){(0,m.default)(x,M);var P=O(x);function x(A){return(0,f.default)(this,x),P.call(this,A,V)}return(0,w.default)(x,null,[{key:"initFromJSON",value:function(k){var F=new this(k.transactionIsolation);return k.operations.forEach(function(j){var U=S.OperationJSONAdapter[j.operationType](F,j);U.setOpResultId(j.opResultId)}),F}}]),x}(B)}},"./src/unit-of-work/json-adapter.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.OperationJSONAdapter=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),_=o("./src/unit-of-work/constants.js"),I=o("./src/unit-of-work/op-result.js");function T(m,g){if(Array.isArray(g))return g.map(function(y){return T(m,y)});if(g&&(0,u.default)(g)==="object"){if(g.___ref){var C=m.getOpResultById(g.opResultId);return g.resultIndex!==void 0?C.resolveTo(g.resultIndex,g.propName):g.propName!==void 0?C.resolveTo(g.propName):C}var p={};for(var c in g)p[c]=T(m,g[c]);return p}return g}var R={CREATE:function(g,C){var p=C.table,c=C.payload;return g.create.call(g,p,T(g,c))},DELETE:function(g,C){var p=C.table,c=C.payload;return g.delete.call(g,p,T(g,c))},UPDATE:function(g,C){var p=C.table,c=C.payload;return g.update.call(g,p,T(g,c))},UPSERT:function(g,C){var p=C.table,c=C.payload;return g.upsert.call(g,p,T(g,c))},UPDATE_BULK:function(g,C){var p=C.table,c=C.payload,y=f(g,{table:p,payload:c});return y.push(T(g,c.changes)),g.bulkUpdate.apply(g,y)},DELETE_BULK:function(g,C){var p=C.table,c=C.payload,y=f(g,{table:p,payload:c});return g.bulkDelete.apply(g,y)},CREATE_BULK:function(g,C){var p=C.table,c=C.payload;return g.bulkCreate.call(g,p,T(g,c))},UPSERT_BULK:function(g,C){var p=C.table,c=C.payload;return g.bulkUpsert.call(g,p,T(g,c))},SET_RELATION:function(g,C){var p=C.table,c=C.payload;return w(g,"setRelation",{table:p,payload:c})},DELETE_RELATION:function(g,C){var p=C.table,c=C.payload;return w(g,"deleteRelation",{table:p,payload:c})},ADD_RELATION:function(g,C){var p=C.table,c=C.payload;return w(g,"addToRelation",{table:p,payload:c})},FIND:function(g,C){var p=C.table,c=C.payload;return g.addOperations(_.OperationType.FIND,p,c)}};s.OperationJSONAdapter=R;function f(m,g){var C=g.table,p=g.payload,c=[];if(p.conditional)c.push(C),c.push(p.conditional);else{var y=T(m,p.unconditional);y instanceof I.OpResult||c.push(C),c.push(y)}return c}function w(m,g,C){var p=C.table,c=C.payload,y=[p];return typeof c.parentObject=="string"?y.push({objectId:c.parentObject}):y.push(T(m,c.parentObject)),y.push(c.relationColumn),y.push(c.conditional||T(m,c.unconditional)),m[g].apply(m,y)}},"./src/unit-of-work/op-result-value-reference.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.OpResultValueReference=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R,f){var w=f.resultIndex,m=f.propName;(0,u.default)(this,T),this.opResult=R,this.resultIndex=w,this.propName=m}return(0,_.default)(T,[{key:"getTableName",value:function(){return this.opResult.getTableName()}},{key:"toJSON",value:function(){var f=this.opResult.toJSON();return this.resultIndex!==void 0&&(f.resultIndex=this.resultIndex),this.propName!==void 0&&(f.propName=this.propName),!f.propName&&this.opResult.isFindRef()&&(f.propName="objectId"),f}}]),T}();s.OpResultValueReference=I},"./src/unit-of-work/op-result.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.OpResult=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=o("./src/unit-of-work/constants.js"),T=o("./src/unit-of-work/op-result-value-reference.js"),R=function(){function f(w,m){var g=m.operationType,C=m.table,p=m.payload;(0,u.default)(this,f),this.uow=w,this.operationType=g,this.table=C,this.payload=p;var c=this.uow.getOpStackName(g,C),y=this.uow.getNextOpResultIndex(c);this.opResultId="".concat(c).concat(y),this.result=null}return(0,_.default)(f,[{key:"setResult",value:function(m){this.result=m}},{key:"getResult",value:function(){return this.result}},{key:"setError",value:function(m){this.error=m}},{key:"getError",value:function(){return this.error}},{key:"getType",value:function(){return this.operationType}},{key:"isFindRef",value:function(){return this.operationType===I.OperationType.FIND}},{key:"isCollectionRef",value:function(){return this.operationType===I.OperationType.FIND||this.operationType===I.OperationType.CREATE_BULK}},{key:"isObjectRef",value:function(){return this.operationType===I.OperationType.CREATE||this.operationType===I.OperationType.UPDATE||this.operationType===I.OperationType.UPSERT}},{key:"setOpResultId",value:function(m){return this.opResultId=m,this}},{key:"getOpResultId",value:function(){return this.opResultId}},{key:"getTableName",value:function(){return this.table}},{key:"resolveTo",value:function(m,g){return typeof m=="string"&&(g=m,m=void 0),new T.OpResultValueReference(this,{resultIndex:m,propName:g})}},{key:"toJSON",value:function(){var m={___ref:!0,opResultId:this.opResultId};return this.isObjectRef()&&(m.propName="objectId"),m}}]),f}();s.OpResult=R},"./src/urls.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R){(0,u.default)(this,T),this.app=R}return(0,_.default)(T,[{key:"root",value:function(){return this.app.appPath}},{key:"automation",value:function(){return"".concat(this.app.automationPath,"/automation")}},{key:"automationFlow",value:function(){return"".concat(this.automation(),"/flow")}},{key:"automationFlowTrigger",value:function(){return"".concat(this.automationFlow(),"/trigger")}},{key:"blServices",value:function(){return"".concat(this.root(),"/services")}},{key:"blServiceMethod",value:function(f,w){return"".concat(this.blServices(),"/").concat(f,"/").concat(w)}},{key:"blEvent",value:function(f){return"".concat(this.root(),"/servercode/events/").concat(f)}},{key:"logging",value:function(){return"".concat(this.root(),"/log")}},{key:"loggingLevels",value:function(){return"".concat(this.logging(),"/logger")}},{key:"cache",value:function(){return"".concat(this.root(),"/cache")}},{key:"cacheItem",value:function(f){return"".concat(this.cache(),"/").concat(f)}},{key:"cacheItemExpireIn",value:function(f){return"".concat(this.cacheItem(f),"/expireIn")}},{key:"cacheItemExpireAt",value:function(f){return"".concat(this.cacheItem(f),"/expireAt")}},{key:"cacheItemCheck",value:function(f){return"".concat(this.cacheItem(f),"/check")}},{key:"counters",value:function(){return"".concat(this.root(),"/counters")}},{key:"countersList",value:function(f){return"".concat(this.counters(),"/").concat(f||"*","/list")}},{key:"counter",value:function(f){return"".concat(this.counters(),"/").concat(f)}},{key:"counterAddAndGet",value:function(f){return"".concat(this.counter(f),"/incrementby/get")}},{key:"counterGetAndAdd",value:function(f){return"".concat(this.counter(f),"/get/incrementby")}},{key:"counterIncrementAndGet",value:function(f){return"".concat(this.counter(f),"/increment/get")}},{key:"counterDecrementAndGet",value:function(f){return"".concat(this.counter(f),"/decrement/get")}},{key:"counterGetAndDecrement",value:function(f){return"".concat(this.counter(f),"/get/decrement")}},{key:"counterGetAndIncrement",value:function(f){return"".concat(this.counter(f),"/get/increment")}},{key:"counterCompareAndSet",value:function(f){return"".concat(this.counter(f),"/get/compareandset")}},{key:"counterReset",value:function(f){return"".concat(this.counter(f),"/reset")}},{key:"data",value:function(){return"".concat(this.root(),"/data")}},{key:"dataGrouping",value:function(f){return"".concat(this.data(),"/data-grouping/").concat(f)}},{key:"dataTable",value:function(f){return"".concat(this.data(),"/").concat(f)}},{key:"dataTableUpsert",value:function(f){return"".concat(this.data(),"/").concat(f,"/upsert")}},{key:"dataTableDeepSave",value:function(f){return"".concat(this.data(),"/").concat(f,"/deep-save")}},{key:"dataTableFind",value:function(f){return"".concat(this.dataTable(f),"/find")}},{key:"dataTablePrimaryKey",value:function(f){return"".concat(this.dataTable(f),"/pk")}},{key:"dataTableObject",value:function(f,w){return"".concat(this.dataTable(f),"/").concat(encodeURIComponent(w))}},{key:"dataTableObjectRelation",value:function(f,w,m){return"".concat(this.dataTableObject(f,w),"/").concat(m)}},{key:"dataTableCount",value:function(f){return"".concat(this.dataTable(f),"/count")}},{key:"dataTableProps",value:function(f){return"".concat(this.dataTable(f),"/properties")}},{key:"dataBulkTable",value:function(f){return"".concat(this.data(),"/bulk/").concat(f)}},{key:"dataBulkTableUpsert",value:function(f){return"".concat(this.data(),"/bulkupsert/").concat(f)}},{key:"dataBulkTableDelete",value:function(f){return"".concat(this.dataBulkTable(f),"/delete")}},{key:"dataObjectPermission",value:function(f,w,m){return"".concat(this.dataTable(f),"/permissions/").concat(w,"/").concat(m)}},{key:"dataTableNameById",value:function(f){return"".concat(this.data(),"/").concat(f,"/table-name")}},{key:"transactions",value:function(){return"".concat(this.root(),"/transaction/unit-of-work")}},{key:"dataHives",value:function(){return"".concat(this.root(),"/hive")}},{key:"dataHive",value:function(f){return"".concat(this.dataHives(),"/").concat(f)}},{key:"hiveStore",value:function(f,w){return"".concat(this.dataHive(f),"/").concat(w)}},{key:"messaging",value:function(){return"".concat(this.root(),"/messaging")}},{key:"messagingPush",value:function(){return"".concat(this.messaging(),"/push")}},{key:"messagingPushTemplates",value:function(f){return"".concat(this.messaging(),"/pushtemplates/").concat(f)}},{key:"messagingPushWithTemplate",value:function(f){return"".concat(this.messagingPush(),"/").concat(f)}},{key:"messagingEmail",value:function(){return"".concat(this.messaging(),"/email")}},{key:"messagingChannel",value:function(f){return"".concat(this.messaging(),"/").concat(f)}},{key:"messagingChannels",value:function(){return"".concat(this.messaging(),"/channels")}},{key:"messagingChannelName",value:function(f){return"".concat(this.messagingChannels(),"/").concat(f)}},{key:"messagingMessage",value:function(f){return"".concat(this.messaging(),"/").concat(f)}},{key:"messagingRegistrations",value:function(){return"".concat(this.messaging(),"/registrations")}},{key:"messagingRegistrationDevice",value:function(f){return"".concat(this.messagingRegistrations(),"/").concat(f)}},{key:"emailTemplate",value:function(){return"".concat(this.root(),"/emailtemplate")}},{key:"emailTemplateSend",value:function(){return"".concat(this.emailTemplate(),"/send")}},{key:"commerce",value:function(){return"".concat(this.root(),"/commerce/googleplay")}},{key:"commerceValidate",value:function(f,w,m){return"".concat(this.commerce(),"/validate/").concat(f,"/inapp/").concat(w,"/purchases/").concat(m)}},{key:"commerceSubCancel",value:function(f,w,m){return"".concat(this.commerce(),"/").concat(f,"/subscription/").concat(w,"/purchases/").concat(m,"/cancel")}},{key:"commerceSubStatus",value:function(f,w,m){return"".concat(this.commerce(),"/").concat(f,"/subscription/").concat(w,"/purchases/").concat(m)}},{key:"files",value:function(){return"".concat(this.root(),"/files")}},{key:"filePath",value:function(f){return"".concat(this.files(),"/").concat(f)}},{key:"directoryPath",value:function(f){return"".concat(this.files(),"/").concat(f,"/")}},{key:"fileCopy",value:function(){return"".concat(this.files(),"/copy")}},{key:"fileMove",value:function(){return"".concat(this.files(),"/move")}},{key:"fileRename",value:function(){return"".concat(this.files(),"/rename")}},{key:"filePermissions",value:function(){return"".concat(this.files(),"/permissions")}},{key:"filePermission",value:function(f,w){return"".concat(this.filePermissions(),"/").concat(f,"/").concat(encodeURIComponent(w))}},{key:"fileBinaryPath",value:function(f){return"".concat(this.files(),"/binary/").concat(f)}},{key:"fileAppendPath",value:function(f){return"".concat(this.files(),"/append/").concat(f)}},{key:"fileAppendBinaryPath",value:function(f){return"".concat(this.files(),"/append/binary/").concat(f)}},{key:"users",value:function(){return"".concat(this.root(),"/users")}},{key:"userObject",value:function(f){return"".concat(this.users(),"/").concat(f)}},{key:"userRegister",value:function(){return"".concat(this.users(),"/register")}},{key:"userLogin",value:function(){return"".concat(this.users(),"/login")}},{key:"userLogout",value:function(){return"".concat(this.users(),"/logout")}},{key:"userRoles",value:function(f){return"".concat(this.users(),"/userroles").concat(f?"/".concat(f):"")}},{key:"usersRole",value:function(f){return"".concat(this.users(),"/role/").concat(f)}},{key:"userRoleOperation",value:function(f){return"".concat(this.users(),"/").concat(f)}},{key:"userClassProps",value:function(){return"".concat(this.users(),"/userclassprops")}},{key:"userRestorePassword",value:function(f){return"".concat(this.users(),"/restorepassword/").concat(encodeURIComponent(f))}},{key:"userTokenCheck",value:function(f){return"".concat(this.users(),"/isvalidusertoken/").concat(f)}},{key:"userVerifyPassowrd",value:function(){return"".concat(this.users(),"/verifypassowrd")}},{key:"userResendConfirmation",value:function(f){return"".concat(this.users(),"/resendconfirmation/").concat(f)}},{key:"userCreateConfirmationURL",value:function(f){return"".concat(this.users(),"/createEmailConfirmationURL/").concat(f)}},{key:"userSocial",value:function(){return"".concat(this.users(),"/social")}},{key:"userSocialOAuth",value:function(f){return"".concat(this.userSocial(),"/oauth/").concat(f.toLowerCase(),"/request_url")}},{key:"userSocialLogin",value:function(f){return"".concat(this.userSocial(),"/").concat(f.toLowerCase(),"/sdk/login")}},{key:"userOAuthLogin",value:function(f){return"".concat(this.userSocial(),"/").concat(f.toLowerCase(),"/login")}},{key:"userAuthorizationURL",value:function(f){return"".concat(this.users(),"/oauth/").concat(f.toLowerCase(),"/request_url")}},{key:"guestLogin",value:function(){return"".concat(this.users(),"/register/guest")}},{key:"userStatus",value:function(f){return"".concat(this.userObject(f),"/status")}},{key:"management",value:function(){return"".concat(this.root(),"/management")}},{key:"managementData",value:function(){return"".concat(this.management(),"/data")}},{key:"managementDataTable",value:function(){return"".concat(this.managementData(),"/table")}}]),T}();s.default=I},"./src/user-agent.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.getUserAgent=_;var u=a(o("./src/utils.js"));function _(){var I="NodeJS";u.default.isBrowser&&(I=navigator.userAgent?navigator.userAgent.toLowerCase():"hybrid-app");var T=/(chrome)[ \/]([\w.]+)/.exec(I)||/(webkit)[ \/]([\w.]+)/.exec(I)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(I)||/(msie) ([\w.]+)/.exec(I)||I.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(I)||[],R={browser:T[1]||"",version:T[2]||"0"},f={};return R.browser&&(f[R.browser]=!0,f.version=R.version),f}},"./src/users/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=o("./src/users/utils.js"),w=a(o("./src/users/user.js")),m=a(o("./src/users/roles.js")),g=a(o("./src/users/social/index.js"));function C(y,E){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);E&&(v=v.filter(function(h){return Object.getOwnPropertyDescriptor(y,h).enumerable})),S.push.apply(S,v)}return S}function p(y){for(var E=1;E<arguments.length;E++){var S=arguments[E]!=null?arguments[E]:{};E%2?C(Object(S),!0).forEach(function(v){(0,_.default)(y,v,S[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):C(Object(S)).forEach(function(v){Object.defineProperty(y,v,Object.getOwnPropertyDescriptor(S,v))})}return y}var c=function(){function y(E){(0,T.default)(this,y),this.app=E,this.roles=new m.default(this),this.social=new g.default(this),this.dataStore=this.app.Data.of(w.default)}return(0,R.default)(y,[{key:"Utils",get:function(){return f.UsersUtils}},{key:"register",value:function(){var E=(0,I.default)(u.default.mark(function v(h){var l=this,d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return h=p({},h),h.blUserLocale||(d=this.Utils.getClientUserLocale(),d&&(h.blUserLocale=d)),O.abrupt("return",this.app.request.post({url:this.app.urls.userRegister(),data:h}).then(function(D){return l.dataStore.parseResponse(D)}));case 3:case"end":return O.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"login",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d){var b=this,O;return u.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(O={},!(typeof h!="string"&&typeof h!="number")){N.next=3;break}throw new Error("the first argument must be either a string or a number");case 3:if(h){N.next=5;break}throw new Error("the first argument cannot be an empty value");case 5:if(typeof l=="boolean"&&(d=l,l=void 0),!(typeof h=="string"&&l===void 0)){N.next=10;break}O.objectId=h,N.next=14;break;case 10:if(l){N.next=12;break}throw new Error('the "password" value cannot be an empty value');case 12:O.login=h,O.password=l;case 14:return d=d===!0,N.abrupt("return",this.app.request.post({url:this.app.urls.userLogin(),data:O}).then(function(L){return b.setCurrentUser(L,d)}));case 16:case"end":return N.stop()}},v,this)}));function S(v,h,l){return E.apply(this,arguments)}return S}()},{key:"loginAsGuest",value:function(){var E=(0,I.default)(u.default.mark(function v(h){var l=this;return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return h=h===!0,b.abrupt("return",this.app.request.post({url:this.app.urls.guestLogin()}).then(function(O){return l.setCurrentUser(O,h)}));case 2:case"end":return b.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"loginWithFacebook",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d){return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",this.social.loginWithFacebook(h,l,d));case 1:case"end":return O.stop()}},v,this)}));function S(v,h,l){return E.apply(this,arguments)}return S}()},{key:"loginWithFacebookSdk",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d,b){return u.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.social.loginWithFacebookSdk(h,l,d,b));case 1:case"end":return D.stop()}},v,this)}));function S(v,h,l,d){return E.apply(this,arguments)}return S}()},{key:"loginWithGooglePlus",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d,b){return u.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.social.loginWithGooglePlus(h,l,d,b));case 1:case"end":return D.stop()}},v,this)}));function S(v,h,l,d){return E.apply(this,arguments)}return S}()},{key:"loginWithGooglePlusSdk",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d){return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",this.social.loginWithGooglePlusSdk(h,l,d));case 1:case"end":return O.stop()}},v,this)}));function S(v,h,l){return E.apply(this,arguments)}return S}()},{key:"loginWithTwitter",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l){return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",this.social.loginWithTwitter(h,l));case 1:case"end":return b.stop()}},v,this)}));function S(v,h){return E.apply(this,arguments)}return S}()},{key:"loginWithOauth2",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d,b,O){return u.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",this.social.loginWithOauth2(h,l,d,b,O));case 1:case"end":return N.stop()}},v,this)}));function S(v,h,l,d,b){return E.apply(this,arguments)}return S}()},{key:"loginWithOauth1",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d,b,O,D){return u.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",this.social.loginWithOauth1(h,l,d,b,O,D));case 1:case"end":return L.stop()}},v,this)}));function S(v,h,l,d,b,O){return E.apply(this,arguments)}return S}()},{key:"logout",value:function(){var E=(0,I.default)(u.default.mark(function v(){var h=this;return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.app.request.get({url:this.app.urls.userLogout()}).then(function(){h.setCurrentUser(null)}).catch(function(b){throw[3023,3064,3090,3091].includes(b.code)&&h.setCurrentUser(null),b}));case 1:case"end":return d.stop()}},v,this)}));function S(){return E.apply(this,arguments)}return S}()},{key:"getCurrentUser",value:function(){var E=(0,I.default)(u.default.mark(function v(h){var l=this,d;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(this.currentUser&&!h)){O.next=2;break}return O.abrupt("return",this.currentUser);case 2:if(!this.currentUserRequest){O.next=4;break}return O.abrupt("return",this.currentUserRequest);case 4:if(d=this.getCurrentUserId(),!d){O.next=7;break}return O.abrupt("return",this.currentUserRequest=this.dataStore.findById(d).then(function(D){return l.currentUserRequest=null,D["user-token"]=l.currentUser&&l.currentUser["user-token"]||void 0,l.currentUser=D}).catch(function(D){throw l.currentUserRequest=null,D}));case 7:return O.abrupt("return",null);case 8:case"end":return O.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"setCurrentUser",value:function(S,v){return this.app.LocalCache.remove(this.app.LocalCache.Keys.USER_TOKEN),this.app.LocalCache.remove(this.app.LocalCache.Keys.CURRENT_USER_ID),this.app.LocalCache.remove(this.app.LocalCache.Keys.STAY_LOGGED_IN),this.currentUser=S||null,this.currentUser&&(this.currentUser instanceof w.default||(this.currentUser=this.dataStore.parseResponse(this.currentUser)),v&&(this.app.LocalCache.set(this.app.LocalCache.Keys.STAY_LOGGED_IN,!0),this.app.LocalCache.set(this.app.LocalCache.Keys.USER_TOKEN,this.currentUser["user-token"]),this.app.LocalCache.set(this.app.LocalCache.Keys.CURRENT_USER_ID,this.currentUser.objectId))),this.app.__RT&&this.app.RT.updateUserTokenIfNeeded(),this.currentUser}},{key:"isValidLogin",value:function(){var E=(0,I.default)(u.default.mark(function v(){var h;return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(h=this.getCurrentUserToken(),!h){d.next=3;break}return d.abrupt("return",this.app.request.get({url:this.app.urls.userTokenCheck(h)}));case 3:return d.abrupt("return",!1);case 4:case"end":return d.stop()}},v,this)}));function S(){return E.apply(this,arguments)}return S}()},{key:"verifyPassword",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!h||typeof h!="string")){d.next=2;break}throw new Error("Password has to be a non empty string");case 2:if(this.getCurrentUserToken()){d.next=4;break}throw new Error("In order to check password you have to be logged in");case 4:return d.abrupt("return",this.app.request.post({url:this.app.urls.userVerifyPassowrd(),data:{password:h}}).then(function(b){return!!(b&&b.valid)}));case 5:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"restorePassword",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!h||typeof h!="string")){d.next=2;break}throw new Error("Email Address must be provided and must be a string.");case 2:return d.abrupt("return",this.app.request.get({url:this.app.urls.userRestorePassword(h)}));case 3:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"resendEmailConfirmation",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(typeof h!="string"){d.next=5;break}if(h){d.next=3;break}throw new Error("Identity can not be an empty string.");case 3:d.next=7;break;case 5:if(typeof h=="number"){d.next=7;break}throw new Error("Identity must be a string or number.");case 7:return d.abrupt("return",this.app.request.post({url:this.app.urls.userResendConfirmation(h)}));case 8:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"createEmailConfirmationURL",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(typeof h!="string"){d.next=5;break}if(h){d.next=3;break}throw new Error("Identity can not be an empty string.");case 3:d.next=7;break;case 5:if(typeof h=="number"){d.next=7;break}throw new Error("Identity must be a string or number.");case 7:return d.abrupt("return",this.app.request.post({url:this.app.urls.userCreateConfirmationURL(h)}));case 8:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"update",value:function(){var E=(0,I.default)(u.default.mark(function v(h){var l=this;return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",this.app.request.put({url:this.app.urls.userObject(h.objectId),data:h}).then(function(O){return l.dataStore.parseResponse(O)}));case 1:case"end":return b.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"findByRole",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l,d){return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",this.roles.findByRole(h,l,d));case 1:case"end":return O.stop()}},v,this)}));function S(v,h,l){return E.apply(this,arguments)}return S}()},{key:"getUserRoles",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.roles.getUserRoles(h));case 1:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"assignRole",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l){return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",this.roles.assignRole(h,l));case 1:case"end":return b.stop()}},v,this)}));function S(v,h){return E.apply(this,arguments)}return S}()},{key:"unassignRole",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l){return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",this.roles.unassignRole(h,l));case 1:case"end":return b.stop()}},v,this)}));function S(v,h){return E.apply(this,arguments)}return S}()},{key:"describeUserClass",value:function(){var E=(0,I.default)(u.default.mark(function v(){return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.app.request.get({url:this.app.urls.userClassProps()}));case 1:case"end":return l.stop()}},v,this)}));function S(){return E.apply(this,arguments)}return S}()},{key:"enableUser",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.updateUserStatus(h,"ENABLED"));case 1:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"disableUser",value:function(){var E=(0,I.default)(u.default.mark(function v(h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.updateUserStatus(h,"DISABLED"));case 1:case"end":return d.stop()}},v,this)}));function S(v){return E.apply(this,arguments)}return S}()},{key:"updateUserStatus",value:function(){var E=(0,I.default)(u.default.mark(function v(h,l){return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!h||typeof h!="string"&&typeof h!="number")){b.next=2;break}throw new Error("User objectId must be non empty string/number");case 2:if(!(!l||typeof l!="string")){b.next=4;break}throw new Error("User Status must be a valid string");case 4:return b.abrupt("return",this.app.request.put({url:this.app.urls.userStatus(h),data:{userStatus:l}}));case 5:case"end":return b.stop()}},v,this)}));function S(v,h){return E.apply(this,arguments)}return S}()},{key:"getAuthorizationUrlLink",value:function(S,v,h,l,d,b){return this.app.request.post({url:this.app.urls.userAuthorizationURL(S),data:{fieldsMapping:v,permissions:h,redirect:l,redirectAfterLoginUrl:d,callbackUrlDomain:b}})}},{key:"loggedInUser",value:function(){return this.getCurrentUserId()}},{key:"getCurrentUserToken",value:function(){return this.currentUser&&this.currentUser["user-token"]?this.currentUser["user-token"]:this.app.LocalCache.get(this.app.LocalCache.Keys.USER_TOKEN)||null}},{key:"setCurrentUserToken",value:function(S){S=S||null,this.currentUser&&(this.currentUser["user-token"]=S),this.app.LocalCache.get("user-token")&&this.app.LocalCache.set("user-token",S),this.app.__RT&&this.app.RT.updateUserTokenIfNeeded()}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.objectId:this.app.LocalCache.get(this.app.LocalCache.Keys.CURRENT_USER_ID)||null}},{key:"getLocalCurrentUser",value:function(){return this.currentUser}},{key:"setLocalCurrentUser",value:function(S,v){return this.setCurrentUser(S,v)}}]),y}();s.default=c},"./src/users/roles.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),I=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),T=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),R=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),f=a(o("./src/data/data-query-builder.js")),w=function(){function m(g){(0,T.default)(this,m),this.users=g,this.app=g.app}return(0,R.default)(m,[{key:"findByRole",value:function(){var g=(0,I.default)(u.default.mark(function p(c,y,E){var S=this,v;return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!c||typeof c!="string")){l.next=2;break}throw new Error("Role Name must be a string and can not be empty");case 2:if(!(y!=null&&typeof y!="boolean")){l.next=4;break}throw new Error('The second argument "loadRoles" can be a boolean only');case 4:if(!(E!=null&&(Array.isArray(E)||(0,_.default)(E)!=="object"))){l.next=6;break}throw new Error('The third argument "query" can be an instance of DataQueryBuilder or a plain object only');case 6:return v=[],typeof y=="boolean"&&v.push("loadRoles=".concat(y)),E&&v.push(f.default.toQueryString(E)),l.abrupt("return",this.app.request.get({url:this.app.urls.usersRole(c),queryString:v.join("&")}).then(function(d){return S.users.dataStore.parseResponse(d)}));case 10:case"end":return l.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()},{key:"getUserRoles",value:function(){var g=(0,I.default)(u.default.mark(function p(c){return u.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",this.app.request.get({url:this.app.urls.userRoles(c)}));case 1:case"end":return E.stop()}},p,this)}));function C(p){return g.apply(this,arguments)}return C}()},{key:"assignRole",value:function(){var g=(0,I.default)(u.default.mark(function p(c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.changeRole(c,y,"assignRole"));case 1:case"end":return S.stop()}},p,this)}));function C(p,c){return g.apply(this,arguments)}return C}()},{key:"unassignRole",value:function(){var g=(0,I.default)(u.default.mark(function p(c,y){return u.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.changeRole(c,y,"unassignRole"));case 1:case"end":return S.stop()}},p,this)}));function C(p,c){return g.apply(this,arguments)}return C}()},{key:"changeRole",value:function(){var g=(0,I.default)(u.default.mark(function p(c,y,E){return u.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!c||!(typeof c=="string"||typeof c=="number"))){v.next=2;break}throw new Error("User identity must be a string or number and can not be empty.");case 2:if(!(!y||typeof y!="string")){v.next=4;break}throw new Error("Role Name must be a string and can not be empty.");case 4:return v.abrupt("return",this.app.request.post({url:this.app.urls.userRoleOperation(E),data:{user:c,roleName:y}}));case 5:case"end":return v.stop()}},p,this)}));function C(p,c,y){return g.apply(this,arguments)}return C}()}]),m}();s.default=w},"./src/users/social/container.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.SocialContainer=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R,f){(0,u.default)(this,T),this.socialType=R,this.container=f,f?this.processContainer():this.createContainer()}return(0,_.default)(T,[{key:"processContainer",value:function(){var f=this,w,m=this.container[0]||this.container,g=document.createElement("div");g.innerHTML="Loading...",m.appendChild(g),m.style.cursor="wait",this.closeContainer=function(){m.style.cursor="default",m.removeChild(w)},this.removeLoading=function(){m.removeChild(g)},this.doAuthorizationActivity=function(C){f.removeLoading(),w=document.createElement("iframe"),w.frameBorder=0,w.width=m.style.width,w.height=m.style.height,w.id="SocialAuthFrame",w.setAttribute("src",C+"&amp;output=embed"),m.appendChild(w),w.onload=function(){m.style.cursor="default"}}}},{key:"createContainer",value:function(){var f=window.open("",this.socialType+" authorization","resizable=yes, scrollbars=yes, titlebar=yes, top=10, left=10"),w=f.document.getElementsByTagName("body")[0];w.innerHTML="Loading...",f.document.getElementsByTagName("html")[0].style.cursor="wait",this.closeContainer=function(){f.close()},this.doAuthorizationActivity=function(m){f.location.href=m,f.onload=function(){f.document.getElementsByTagName("html")[0].style.cursor="default"}}}}]),T}();s.SocialContainer=I},"./src/users/social/index.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/regenerator/index.js")),_=a(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),I=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),R=a(o("./src/users/user.js")),f=o("./src/users/social/container.js"),w=function(){function C(p){(0,I.default)(this,C),this.users=p,this.app=p.app}return(0,T.default)(C,[{key:"loginWithFacebook",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v){return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.loginWithContainer("facebook",E,S,null,v));case 1:case"end":return l.stop()}},y,this)}));function c(y,E,S){return p.apply(this,arguments)}return c}()},{key:"loginWithGooglePlus",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v,h){return u.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.loginWithContainer("googleplus",E,S,v,h));case 1:case"end":return d.stop()}},y,this)}));function c(y,E,S,v){return p.apply(this,arguments)}return c}()},{key:"loginWithTwitter",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S){return u.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",this.loginWithContainer("twitter",E,null,null,S));case 1:case"end":return h.stop()}},y,this)}));function c(y,E){return p.apply(this,arguments)}return c}()},{key:"loginWithFacebookSdk",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v){return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.sendWithAccessToken("facebook",E,S,v));case 1:case"end":return l.stop()}},y,this)}));function c(y,E,S){return p.apply(this,arguments)}return c}()},{key:"loginWithGooglePlusSdk",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v){return u.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.sendWithAccessToken("googleplus",E,S,v));case 1:case"end":return l.stop()}},y,this)}));function c(y,E,S){return p.apply(this,arguments)}return c}()},{key:"sendWithAccessToken",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v,h){var l=this;return u.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!S||typeof S!="string")){b.next=2;break}throw new Error('"accessToken" must be non empty string.');case 2:return typeof v=="boolean"&&(h=v,v=void 0),b.abrupt("return",this.app.request.post({url:this.app.urls.userSocialLogin(E),data:{accessToken:S,fieldsMapping:v}}).then(function(O){return l.users.setCurrentUser(O,h)}));case 4:case"end":return b.stop()}},y,this)}));function c(y,E,S,v){return p.apply(this,arguments)}return c}()},{key:"loginWithContainer",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v,h,l){var d=this,b,O;return u.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return b=new f.SocialContainer(E,h),O=function(){return new Promise(function(B,G){var V=function M(P){if(P.origin===d.app.serverURL){var x=JSON.parse(P.data);x.fault?G(new Error(x.fault)):B(x),g("message",window,M),b.closeContainer()}};m("message",window,V)})},N.abrupt("return",this.app.request.post({url:this.app.urls.userSocialOAuth(E),data:{fieldsMapping:S||{},permissions:v||[]}}).then(function(L){return b.doAuthorizationActivity(L)}).catch(function(L){throw b.closeContainer(),L}).then(O).then(function(L){return d.users.setCurrentUser(L,l)}));case 3:case"end":return N.stop()}},y,this)}));function c(y,E,S,v,h){return p.apply(this,arguments)}return c}()},{key:"loginWithOauth2",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v,h,l){var d=this;return u.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!E||typeof E!="string")){O.next=2;break}throw new Error('"providerCode" must be non empty string.');case 2:if(!(!S||typeof S!="string")){O.next=4;break}throw new Error('"accessToken" must be non empty string.');case 4:return v&&!(v instanceof R.default)&&(l=h,h=v,v=void 0),typeof h=="boolean"&&(l=h,h=void 0),O.abrupt("return",this.app.request.post({url:this.app.urls.userOAuthLogin(E),data:{accessToken:S,fieldsMapping:h,guestUser:v}}).then(function(D){return d.users.setCurrentUser(D,l)}));case 7:case"end":return O.stop()}},y,this)}));function c(y,E,S,v,h){return p.apply(this,arguments)}return c}()},{key:"loginWithOauth1",value:function(){var p=(0,_.default)(u.default.mark(function y(E,S,v,h,l,d){var b=this;return u.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!E||typeof E!="string")){D.next=2;break}throw new Error('"providerCode" must be non empty string.');case 2:if(!(!S||typeof S!="string")){D.next=4;break}throw new Error('"accessToken" must be non empty string.');case 4:if(!(!v||typeof v!="string")){D.next=6;break}throw new Error('"accessTokenSecret" must be non empty string.');case 6:return h&&!(h instanceof R.default)&&(d=l,l=h,h=void 0),typeof l=="boolean"&&(d=l,l=void 0),D.abrupt("return",this.app.request.post({url:this.app.urls.userOAuthLogin(E),data:{accessToken:S,accessTokenSecret:v,fieldsMapping:l,guestUser:h}}).then(function(N){return b.users.setCurrentUser(N,d)}));case 9:case"end":return D.stop()}},y,this)}));function c(y,E,S,v,h,l){return p.apply(this,arguments)}return c}()}]),C}();s.default=w;function m(C,p,c){p.addEventListener?p.addEventListener(C,c,!1):p.attachEvent?p.attachEvent("on"+C,c):p[C]=c}function g(C,p,c){p.removeEventListener?p.removeEventListener(C,c,!1):p.detachEvent&&p.detachEvent("on"+C,c),p[C]=null}},"./src/users/user.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),_=a(o("./node_modules/@babel/runtime/helpers/createClass.js")),I=function(){function T(R){var f=this;(0,u.default)(this,T),R=R||{},Object.keys(R).map(function(w){f[w]=R[w]}),this.___class=T.className}return(0,_.default)(T,null,[{key:"className",get:function(){return"Users"}}]),T}();s.default=I,I.prototype.___class=I.className},"./src/users/utils.js":(i,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.UsersUtils=void 0;var o={getClientUserLocale:function(){if(!(typeof navigator>"u")){var u="";return navigator.languages&&navigator.languages.length?u=navigator.languages[0]:u=navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"",u.slice(0,2).toLowerCase()}}};s.UsersUtils=o},"./src/utils.js":(i,s,o)=>{"use strict";var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=a(o("./node_modules/@babel/runtime/helpers/typeof.js")),_={isBrowser:I(),isLocalStorageSupported:T(),globalScope:(typeof self>"u"?"undefined":(0,u.default)(self))==="object"&&self.self===self&&self||(typeof o.g>"u"?"undefined":(0,u.default)(o.g))==="object"&&o.g.global===o.g&&o.g,castArray:function(w){return Array.isArray(w)?w:typeof w>"u"?[]:[w]},isCustomClassInstance:function(w){return!w||(0,u.default)(w)!=="object"||Array.isArray(w)?!1:w.constructor!==Object},getClassName:function(w){if(w&&w.className)return w.className;if(typeof w=="function"&&w.name)return w.name;if(w&&(0,u.default)(w)==="object"&&!Array.isArray(w)){if(w.___class)return w.___class;if(w.constructor!==Object)return _.getClassName(w.constructor)}return null},uuid:function(){var w=function(){return Math.random().toString(16).slice(-4).toUpperCase()},m=function(){return"".concat(w()).concat(w())},g=function(){return"".concat(w()).concat(w()).concat(w())};return"".concat(m(),"-").concat(w(),"-").concat(w(),"-").concat(w(),"-").concat(g())},isObject:function(w){return w!=null&&w.constructor.name==="Object"}};function I(){return(typeof self>"u"?"undefined":(0,u.default)(self))==="object"&&self.self===self&&(typeof window>"u"?"undefined":(0,u.default)(window))==="object"&&window===self}function T(){try{if(I()&&window.localStorage)return localStorage.setItem("localStorageTest",!0),localStorage.removeItem("localStorageTest"),!0}catch{}return!1}var R=_;s.default=R},"./node_modules/backendless-request/dist/backendless-request.js":function(i,s){(function(a,u){typeof s=="object"&&typeof i=="object"?i.exports=u():typeof define=="function"&&define.amd?define([],u):typeof s=="object"?s.BackendlessRequest=u():a.BackendlessRequest=u()})(typeof self<"u"?self:this,function(){return function(o){var a={};function u(_){if(a[_])return a[_].exports;var I=a[_]={i:_,l:!1,exports:{}};return o[_].call(I.exports,I,I.exports,u),I.l=!0,I.exports}return u.m=o,u.c=a,u.d=function(_,I,T){u.o(_,I)||Object.defineProperty(_,I,{configurable:!1,enumerable:!0,get:T})},u.n=function(_){var I=_&&_.__esModule?function(){return _.default}:function(){return _};return u.d(I,"a",I),I},u.o=function(_,I){return Object.prototype.hasOwnProperty.call(_,I)},u.p="",u(u.s=3)}([function(o,a,u){"use strict";(function(_){Object.defineProperty(a,"__esModule",{value:!0}),a.castArray=void 0,a.ensureEncoding=h,a.getFormData=p,a.isStream=a.isObject=a.isNodeJS=a.isFormData=a.isBrowser=void 0,a.setFormData=c;function I(l){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},I(l)}var T=a.castArray=function(d){return Array.isArray(d)?d:[d]},R=a.isObject=function(d){return d!=null&&I(d)==="object"},f=a.isFormData=function(d){if(!d)return!1;var b=p();return d instanceof b?!0:d&&d.constructor&&d.constructor.toString().trim().indexOf("function FormData")===0},w=a.isStream=function(d){var b=u(6);return d instanceof b.Stream},m=a.isNodeJS=function(){return typeof _<"u"&&_.versions!=null&&_.versions.node!=null},g=a.isBrowser=function(){return typeof window<"u"&&typeof window.document<"u"},C=null;function p(){return C||(m()||typeof FormData>"u"?u(7):FormData)}function c(l){C=l}var y=["%40","%3A","%2F"];function E(l,d){var b=d[0];if(b){var O=l.split(b).map(function(D){return E(D,d.slice(1))});return O.join(b)}return encodeURI(l)}function S(l){return l===decodeURI(l)?E(l,y):l}function v(l){return l.split("/").map(S).join("/")}function h(l){try{var d=new URL(l);return d.origin+v(d.pathname)+d.search}catch{return v(l)}}}).call(a,u(5))},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a,u){"use strict";function _(j){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_(j)}Object.defineProperty(a,"__esModule",{value:!0}),a.Request=void 0;var I=u(12),T=C(u(13)),R=g(u(14)),f=u(0),w=u(15);function m(j){if(typeof WeakMap!="function")return null;var U=new WeakMap,z=new WeakMap;return(m=function($){return $?z:U})(j)}function g(j,U){if(!U&&j&&j.__esModule)return j;if(j===null||_(j)!=="object"&&typeof j!="function")return{default:j};var z=m(U);if(z&&z.has(j))return z.get(j);var H={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in j)if(q!=="default"&&Object.prototype.hasOwnProperty.call(j,q)){var K=$?Object.getOwnPropertyDescriptor(j,q):null;K&&(K.get||K.set)?Object.defineProperty(H,q,K):H[q]=j[q]}return H.default=j,z&&z.set(j,H),H}function C(j){return j&&j.__esModule?j:{default:j}}function p(j,U){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(j);U&&(H=H.filter(function($){return Object.getOwnPropertyDescriptor(j,$).enumerable})),z.push.apply(z,H)}return z}function c(j){for(var U=1;U<arguments.length;U++){var z=arguments[U]!=null?arguments[U]:{};U%2?p(Object(z),!0).forEach(function(H){y(j,H,z[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(z)):p(Object(z)).forEach(function(H){Object.defineProperty(j,H,Object.getOwnPropertyDescriptor(z,H))})}return j}function y(j,U,z){return U=h(U),U in j?Object.defineProperty(j,U,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[U]=z,j}function E(j,U){if(!(j instanceof U))throw new TypeError("Cannot call a class as a function")}function S(j,U){for(var z=0;z<U.length;z++){var H=U[z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,h(H.key),H)}}function v(j,U,z){return U&&S(j.prototype,U),z&&S(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j}function h(j){var U=l(j,"string");return _(U)==="symbol"?U:String(U)}function l(j,U){if(_(j)!=="object"||j===null)return j;var z=j[Symbol.toPrimitive];if(z!==void 0){var H=z.call(j,U||"default");if(_(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(j)}function d(j,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(U&&U.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),U&&b(j,U)}function b(j,U){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,$){return H.__proto__=$,H},b(j,U)}function O(j){var U=L();return function(){var H=B(j),$;if(U){var q=B(this).constructor;$=Reflect.construct(H,arguments,q)}else $=H.apply(this,arguments);return D(this,$)}}function D(j,U){if(U&&(_(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(j)}function N(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(j){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},B(j)}var G="Content-Type",V="request",M="response",P="error",x="done",A=a.Request=function(j){d(z,j);var U=O(z);function z(H,$,q){var K;return E(this,z),K=U.call(this),K.method=$,K.path=(0,f.ensureEncoding)(H),K.body=q,K.tags=void 0,K.unwrap=!0,K.cacheTTL=0,K.headers={},K.queryParams={},K.encoding="utf8",K.timeout=0,K.withCredentials=null,K}return v(z,[{key:"set",value:function($,q){if((0,f.isObject)($))for(var K in $)this.set(K,$[K]);else typeof q<"u"&&(this.headers[$]=q);return this}},{key:"cacheTags",value:function(){for(var $=arguments.length,q=new Array($),K=0;K<$;K++)q[K]=arguments[K];return this.tags=q,this}},{key:"query",value:function($){return Object.assign(this.queryParams,$),this}},{key:"form",value:function($){if($){var q=z.FormData;if($ instanceof q)this.body=$;else{var K=new q,W=function(oe){oe&&(0,f.castArray)($[oe]).forEach(function(re){re&&re.hasOwnProperty("value")&&re.hasOwnProperty("options")?K.append(oe,re.value,re.options):K.append(oe,re)})};for(var Y in $)W(Y);this.body=K}}return this}},{key:"useCache",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15e3;return this.cacheTTL=$,this}},{key:"resetCache",value:function($){return $&&this.tags&&I.cache.deleteByTags(this.tags),this}},{key:"type",value:function($){return this.set(G,$),this}},{key:"unwrapBody",value:function($){return this.unwrap=$,this}},{key:"setEncoding",value:function($){return this.encoding=$,this}},{key:"setWithCredentials",value:function($){return this.withCredentials=$,this}},{key:"setTimeout",value:function($){return this.timeout=$,this}},{key:"send",value:function($){var q=this;this.emit(V,this);var K=this.path,W=R.stringify(this.queryParams);if(W&&(K+="?"+W),this.cacheTTL){var Y=I.cache.get(K);if(Y!==void 0)return Promise.resolve(Y)}var se=this.headers[G];if(!se&&(0,f.isObject)($)&&!(0,f.isFormData)($)&&this.type("application/json"),$){var oe=this.headers[G]==="application/json";$=oe&&typeof $!="string"?JSON.stringify($):$}var re=function(nt){return q.unwrap?nt.body:nt},le=function(nt){return q.cacheTTL&&I.cache.set(K,nt,q.tags,q.cacheTTL),nt},ue=function(nt){return q.tags&&q.method!=="get"&&I.cache.deleteByTags(q.tags),nt};z.verbose&&console.log(this.method.toUpperCase(),decodeURIComponent(K),$,this.headers);var Be=typeof this.withCredentials=="boolean"?this.withCredentials:z.withCredentials,Nt=z.send(K,this.method.toUpperCase(),this.headers,$,this.encoding,this.timeout,Be).then(k).then(F).then(re).then(le).then(ue);return Nt.then(function(Je){q.emit(M,Je),q.emit(x,null,Je)}).catch(function(Je){q.emit(P,Je),q.emit(x,Je)}),Nt}},{key:"then",value:function($,q){return this.promise=this.promise||this.send(this.body),this.promise.then($,q)}},{key:"catch",value:function($){return this.promise=this.promise||this.send(this.body),this.promise.catch($)}}]),z}(T.default);function k(j){try{return c(c({},j),{},{body:JSON.parse(j.body)})}catch{return j}}function F(j){if(j.status>=200&&j.status<300)return j;throw new w.ResponseError(j)}},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var _=u(4),I=u(11),T=u(2),R=u(0);Object.defineProperty(T.Request,"FormData",{get:function(){return(0,R.getFormData)()},set:function(m){(0,R.setFormData)(m)}}),T.Request.XMLHttpRequest=typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0,T.Request.send=function(w,m,g,C,p,c,y){var E=typeof T.Request.XMLHttpRequest<"u"?I.sendXmlHttpRequest:_.sendNodeAPIRequest;return E(w,m,g,C,p,c,y)},T.Request.verbose=!1,T.Request.withCredentials=!1,T.Request.methods=["get","post","put","patch","delete"],T.Request.methods.forEach(function(w){T.Request[w]=function(m,g){return new T.Request(m,w,g)}}),a=o.exports=T.Request;var f=a.default=T.Request},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.sendNodeAPIRequest=I;var _=u(0);function I(T,R,f,w,m,g,C){return new Promise(function(p,c){var y=u(8).parse(T),E=(0,_.isFormData)(w)&&w,S=y.protocol==="https:",v={host:y.hostname,port:y.port||(S?443:80),path:y.pathname+(y.search||""),method:R,headers:f,timeout:g};typeof C=="boolean"&&(v.withCredentials=C);var h=function(){var b=u(1).Buffer,O=u(S?9:10),D=O.request(v,function(N){var L=[],B=[],G=0,V="",M=N.statusCode,P=N.statusMessage,x=N.headers;N.on("data",function(A){b.isBuffer(A)?A.length&&(G+=A.length,B.push(A)):L.push(A)}),N.on("end",function(){G?(V=b.concat(B,G),m!=null&&(V=V.toString(m))):L.length&&(V=L.join()),p({status:M,statusText:P,headers:x,body:V})}),N.on("error",c)});if(D.on("error",c),D.on("timeout",function(){D.destroy(new Error("Connection aborted due to timeout"))}),w){if((0,_.isStream)(w)){w.pipe(D);return}D.write(w)}D.end()};if(E)Object.assign(v.headers,E.getHeaders()),E.getLength(function(d,b){!d&&!isNaN(b)&&(v.headers["content-length"]=b),h()});else{if(w&&!v.headers["content-length"]){var l=u(1).Buffer;v.headers["content-length"]=l.byteLength(w)}h()}})}},function(o,a){var u=o.exports={},_,I;function T(){throw new Error("setTimeout has not been defined")}function R(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_=setTimeout:_=T}catch{_=T}try{typeof clearTimeout=="function"?I=clearTimeout:I=R}catch{I=R}})();function f(v){if(_===setTimeout)return setTimeout(v,0);if((_===T||!_)&&setTimeout)return _=setTimeout,setTimeout(v,0);try{return _(v,0)}catch{try{return _.call(null,v,0)}catch{return _.call(this,v,0)}}}function w(v){if(I===clearTimeout)return clearTimeout(v);if((I===R||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(v);try{return I(v)}catch{try{return I.call(null,v)}catch{return I.call(this,v)}}}var m=[],g=!1,C,p=-1;function c(){!g||!C||(g=!1,C.length?m=C.concat(m):p=-1,m.length&&y())}function y(){if(!g){var v=f(c);g=!0;for(var h=m.length;h;){for(C=m,m=[];++p<h;)C&&C[p].run();p=-1,h=m.length}C=null,g=!1,w(v)}}u.nextTick=function(v){var h=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)h[l-1]=arguments[l];m.push(new E(v,h)),m.length===1&&!g&&f(y)};function E(v,h){this.fun=v,this.array=h}E.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function S(){}u.on=S,u.addListener=S,u.once=S,u.off=S,u.removeListener=S,u.removeAllListeners=S,u.emit=S,u.prependListener=S,u.prependOnceListener=S,u.listeners=function(v){return[]},u.binding=function(v){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(v){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.sendXmlHttpRequest=I;var _=u(2);function I(R,f,w,m,g,C,p){return new Promise(function(y,E){var S=new _.Request.XMLHttpRequest;S.timeout=C,g||(S.responseType="arraybuffer"),S.open(f.toUpperCase(),R,!0),typeof p=="boolean"&&(S.withCredentials=p),S.onload=function(){var h=T(S.getAllResponseHeaders()),l=S,d=l.status,b=l.statusText,O={status:d,statusText:b,headers:h};g==="utf8"?O.body=S.response||S.responseText:S.response&&(O.body=new Uint8Array(S.response)),y(O),S=null},S.onerror=function(){E(new Error("Network Error")),S=null},S.ontimeout=function(){E(new Error("Connection aborted due to timeout")),S=null},Object.keys(w).forEach(function(v){S.setRequestHeader(v,w[v])}),S.send(m)})}function T(R){var f={};return R&&R.split(`
`).forEach(function(w){var m=w.indexOf(":"),g=w.substr(0,m).trim(),C=w.substr(m+1).trim();g&&(f[g]=f[g]?f[g]+", "+C:C)}),f}},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.cache=void 0;function _(D){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},_(D)}function I(D,N){return f(D)||R(D,N)||m(D,N)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(D,N){var L=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(L!=null){var B,G,V,M,P=[],x=!0,A=!1;try{if(V=(L=L.call(D)).next,N===0){if(Object(L)!==L)return;x=!1}else for(;!(x=(B=V.call(L)).done)&&(P.push(B.value),P.length!==N);x=!0);}catch(k){A=!0,G=k}finally{try{if(!x&&L.return!=null&&(M=L.return(),Object(M)!==M))return}finally{if(A)throw G}}return P}}function f(D){if(Array.isArray(D))return D}function w(D,N){var L=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!L){if(Array.isArray(D)||(L=m(D))||N&&D&&typeof D.length=="number"){L&&(D=L);var B=0,G=function(){};return{s:G,n:function(){return B>=D.length?{done:!0}:{done:!1,value:D[B++]}},e:function(A){throw A},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V=!0,M=!1,P;return{s:function(){L=L.call(D)},n:function(){var A=L.next();return V=A.done,A},e:function(A){M=!0,P=A},f:function(){try{!V&&L.return!=null&&L.return()}finally{if(M)throw P}}}}function m(D,N){if(D){if(typeof D=="string")return g(D,N);var L=Object.prototype.toString.call(D).slice(8,-1);if(L==="Object"&&D.constructor&&(L=D.constructor.name),L==="Map"||L==="Set")return Array.from(D);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return g(D,N)}}function g(D,N){(N==null||N>D.length)&&(N=D.length);for(var L=0,B=new Array(N);L<N;L++)B[L]=D[L];return B}function C(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function p(D,N){for(var L=0;L<N.length;L++){var B=N[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(D,y(B.key),B)}}function c(D,N,L){return N&&p(D.prototype,N),L&&p(D,L),Object.defineProperty(D,"prototype",{writable:!1}),D}function y(D){var N=E(D,"string");return _(N)==="symbol"?N:String(N)}function E(D,N){if(_(D)!=="object"||D===null)return D;var L=D[Symbol.toPrimitive];if(L!==void 0){var B=L.call(D,N||"default");if(_(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(D)}var S=function(N,L,B){return{value:N,tags:L,ttl:B}},v=function(){return new Date().getTime()},h=function(N,L){var B=N==L;return!B&&N instanceof RegExp&&(B=N.test(L)),!B&&L instanceof RegExp&&(B=L.test(N)),B},l=function(N,L){return!!N.find(function(B){return L.find(function(G){return h(B,G)})})},d=function(){function D(N){C(this,D),this.setFlushInterval(N),this.map=new Map}return c(D,[{key:"setFlushInterval",value:function(L){this.flushInterval=L,this.flushTimer&&(clearInterval(this.flushTimer),delete this.flushTimer)}},{key:"get",value:function(L){var B=this.map.get(L);if(B){if(B.ttl>v())return B.value;this.map.delete(L)}}},{key:"set",value:function(L,B,G,V){this.map.set(L,S(B,G,v()+V)),this.flushInterval&&!this.flushTimer&&(this.flushTimer=setInterval(this.flush.bind(this),this.flushInterval),this.flushTimer.unref&&this.flushTimer.unref())}},{key:"delete",value:function(L){this.map.delete(L)}},{key:"deleteAll",value:function(){var L=w(this.map),B;try{for(L.s();!(B=L.n()).done;){var G=I(B.value,1),V=G[0];this.delete(V)}}catch(M){L.e(M)}finally{L.f()}}},{key:"deleteByTags",value:function(L){var B=w(this.map),G;try{for(B.s();!(G=B.n()).done;){var V=I(G.value,2),M=V[0],P=V[1];P.tags&&l(L,P.tags)&&this.delete(M)}}catch(x){B.e(x)}finally{B.f()}}},{key:"flush",value:function(){var L=v(),B=w(this.map),G;try{for(B.s();!(G=B.n()).done;){var V=I(G.value,2),M=V[0],P=V[1];P.ttl<L&&this.delete(M)}}catch(x){B.e(x)}finally{B.f()}}}]),D}(),b=6e4,O=a.cache=new d(b)},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;function _(g){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},_(g)}function I(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")}function T(g,C){for(var p=0;p<C.length;p++){var c=C[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,f(c.key),c)}}function R(g,C,p){return C&&T(g.prototype,C),p&&T(g,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function f(g){var C=w(g,"string");return _(C)==="symbol"?C:String(C)}function w(g,C){if(_(g)!=="object"||g===null)return g;var p=g[Symbol.toPrimitive];if(p!==void 0){var c=p.call(g,C||"default");if(_(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(g)}var m=a.default=function(){function g(){I(this,g),this.events={}}return R(g,[{key:"on",value:function(p,c){return this.events[p]=this.events[p]||[],this.events[p].push(c),this}},{key:"off",value:function(p,c){return p?this.events[p]&&(c?this.events[p]=this.events[p].filter(function(y){return y!==c}):delete this.events[p]):this.events={},this}},{key:"emit",value:function(p){for(var c=arguments.length,y=new Array(c>1?c-1:0),E=1;E<c;E++)y[E-1]=arguments[E];this.events[p]&&this.events[p].forEach(function(S){return S.apply(void 0,y)})}}]),g}()},function(o,a,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.stringify=void 0;var _=u(0),I=a.stringify=function(R){var f=[];return Object.keys(R).forEach(function(w){var m=R[w];m!==void 0&&(0,_.castArray)(m).forEach(function(g){f.push("".concat(encodeURIComponent(w),"=").concat(encodeURIComponent(g)))})}),f.join("&")}},function(o,a,u){"use strict";function _(b){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},_(b)}Object.defineProperty(a,"__esModule",{value:!0}),a.ResponseError=void 0;function I(b,O){for(var D=0;D<O.length;D++){var N=O[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,R(N.key),N)}}function T(b,O,D){return O&&I(b.prototype,O),D&&I(b,D),Object.defineProperty(b,"prototype",{writable:!1}),b}function R(b){var O=f(b,"string");return _(O)==="symbol"?O:String(O)}function f(b,O){if(_(b)!=="object"||b===null)return b;var D=b[Symbol.toPrimitive];if(D!==void 0){var N=D.call(b,O||"default");if(_(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(b)}function w(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function m(b,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(O&&O.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),O&&v(b,O)}function g(b){var O=E();return function(){var N=h(b),L;if(O){var B=h(this).constructor;L=Reflect.construct(N,arguments,B)}else L=N.apply(this,arguments);return C(this,L)}}function C(b,O){if(O&&(_(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(b)}function p(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(b){var O=typeof Map=="function"?new Map:void 0;return c=function(N){if(N===null||!S(N))return N;if(typeof N!="function")throw new TypeError("Super expression must either be null or a function");if(typeof O<"u"){if(O.has(N))return O.get(N);O.set(N,L)}function L(){return y(N,arguments,h(this).constructor)}return L.prototype=Object.create(N.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),v(L,N)},c(b)}function y(b,O,D){return E()?y=Reflect.construct.bind():y=function(L,B,G){var V=[null];V.push.apply(V,B);var M=Function.bind.apply(L,V),P=new M;return G&&v(P,G.prototype),P},y.apply(null,arguments)}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(b){return Function.toString.call(b).indexOf("[native code]")!==-1}function v(b,O){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,L){return N.__proto__=L,N},v(b,O)}function h(b){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},h(b)}var l=a.ResponseError=function(b){m(D,b);var O=g(D);function D(N){var L;w(this,D),L=O.call(this);var B=d(N);return L.message=B.message||B,L.code=B.code,L.status=N.status,L.headers=N.headers,L.body=N.body,L}return T(D)}(c(Error));function d(b){return b.status===502?"No connection with server":b.body||"Status Code ".concat(b.status," (").concat(b.statusText,")")}}])})},"./node_modules/backendless-rt-client/dist/backendless-rt-client.js":(i,s)=>{var o,a,u;(function(I,T){i.exports=T()})(self,()=>(()=>{var _={"./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js":f=>{function w(m,g,C,p,c){var y={};return Object.keys(p).forEach(function(E){y[E]=p[E]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=C.slice().reverse().reduce(function(E,S){return S(m,g,E)||E},y),c&&y.initializer!==void 0&&(y.value=y.initializer?y.initializer.call(c):void 0,y.initializer=void 0),y.initializer===void 0&&(Object.defineProperty(m,g,y),y=null),y}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":f=>{function w(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":f=>{function w(g,C,p,c,y,E,S){try{var v=g[E](S),h=v.value}catch(l){p(l);return}v.done?C(h):Promise.resolve(h).then(c,y)}function m(g){return function(){var C=this,p=arguments;return new Promise(function(c,y){var E=g.apply(C,p);function S(h){w(E,c,y,S,v,"next",h)}function v(h){w(E,c,y,S,v,"throw",h)}S(void 0)})}}f.exports=m,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":f=>{function w(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/createClass.js":f=>{function w(g,C){for(var p=0;p<C.length;p++){var c=C[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}function m(g,C,p){return C&&w(g.prototype,C),p&&w(g,p),Object.defineProperty(g,"prototype",{writable:!1}),g}f.exports=m,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":f=>{function w(m,g,C){return g in m?Object.defineProperty(m,g,{value:C,enumerable:!0,configurable:!0,writable:!0}):m[g]=C,m}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/get.js":(f,w,m)=>{var g=m("./node_modules/@babel/runtime/helpers/superPropBase.js");function C(){return typeof Reflect<"u"&&Reflect.get?(f.exports=C=Reflect.get.bind(),f.exports.__esModule=!0,f.exports.default=f.exports):(f.exports=C=function(c,y,E){var S=g(c,y);if(S){var v=Object.getOwnPropertyDescriptor(S,y);return v.get?v.get.call(arguments.length<3?c:E):v.value}},f.exports.__esModule=!0,f.exports.default=f.exports),C.apply(this,arguments)}f.exports=C,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":f=>{function w(m){return f.exports=w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},f.exports.__esModule=!0,f.exports.default=f.exports,w(m)}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/inherits.js":(f,w,m)=>{var g=m("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function C(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),c&&g(p,c)}f.exports=C,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":f=>{function w(m){return m&&m.__esModule?m:{default:m}}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(f,w,m)=>{var g=m("./node_modules/@babel/runtime/helpers/typeof.js").default,C=m("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");function p(c,y){if(y&&(g(y)==="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(c)}f.exports=p,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(f,w,m)=>{var g=m("./node_modules/@babel/runtime/helpers/typeof.js").default;function C(){"use strict";f.exports=C=function(){return p},f.exports.__esModule=!0,f.exports.default=f.exports;var p={},c=Object.prototype,y=c.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},S=E.iterator||"@@iterator",v=E.asyncIterator||"@@asyncIterator",h=E.toStringTag||"@@toStringTag";function l(H,$,q){return Object.defineProperty(H,$,{value:q,enumerable:!0,configurable:!0,writable:!0}),H[$]}try{l({},"")}catch{l=function(q,K,W){return q[K]=W}}function d(H,$,q,K){var W=$&&$.prototype instanceof D?$:D,Y=Object.create(W.prototype),se=new j(K||[]);return Y._invoke=function(oe,re,le){var ue="suspendedStart";return function(Be,Nt){if(ue==="executing")throw new Error("Generator is already running");if(ue==="completed"){if(Be==="throw")throw Nt;return z()}for(le.method=Be,le.arg=Nt;;){var Je=le.delegate;if(Je){var nt=A(Je,le);if(nt){if(nt===O)continue;return nt}}if(le.method==="next")le.sent=le._sent=le.arg;else if(le.method==="throw"){if(ue==="suspendedStart")throw ue="completed",le.arg;le.dispatchException(le.arg)}else le.method==="return"&&le.abrupt("return",le.arg);ue="executing";var ft=b(oe,re,le);if(ft.type==="normal"){if(ue=le.done?"completed":"suspendedYield",ft.arg===O)continue;return{value:ft.arg,done:le.done}}ft.type==="throw"&&(ue="completed",le.method="throw",le.arg=ft.arg)}}}(H,q,se),Y}function b(H,$,q){try{return{type:"normal",arg:H.call($,q)}}catch(K){return{type:"throw",arg:K}}}p.wrap=d;var O={};function D(){}function N(){}function L(){}var B={};l(B,S,function(){return this});var G=Object.getPrototypeOf,V=G&&G(G(U([])));V&&V!==c&&y.call(V,S)&&(B=V);var M=L.prototype=D.prototype=Object.create(B);function P(H){["next","throw","return"].forEach(function($){l(H,$,function(q){return this._invoke($,q)})})}function x(H,$){function q(W,Y,se,oe){var re=b(H[W],H,Y);if(re.type!=="throw"){var le=re.arg,ue=le.value;return ue&&g(ue)=="object"&&y.call(ue,"__await")?$.resolve(ue.__await).then(function(Be){q("next",Be,se,oe)},function(Be){q("throw",Be,se,oe)}):$.resolve(ue).then(function(Be){le.value=Be,se(le)},function(Be){return q("throw",Be,se,oe)})}oe(re.arg)}var K;this._invoke=function(W,Y){function se(){return new $(function(oe,re){q(W,Y,oe,re)})}return K=K?K.then(se,se):se()}}function A(H,$){var q=H.iterator[$.method];if(q===void 0){if($.delegate=null,$.method==="throw"){if(H.iterator.return&&($.method="return",$.arg=void 0,A(H,$),$.method==="throw"))return O;$.method="throw",$.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var K=b(q,H.iterator,$.arg);if(K.type==="throw")return $.method="throw",$.arg=K.arg,$.delegate=null,O;var W=K.arg;return W?W.done?($[H.resultName]=W.value,$.next=H.nextLoc,$.method!=="return"&&($.method="next",$.arg=void 0),$.delegate=null,O):W:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,O)}function k(H){var $={tryLoc:H[0]};1 in H&&($.catchLoc=H[1]),2 in H&&($.finallyLoc=H[2],$.afterLoc=H[3]),this.tryEntries.push($)}function F(H){var $=H.completion||{};$.type="normal",delete $.arg,H.completion=$}function j(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(k,this),this.reset(!0)}function U(H){if(H){var $=H[S];if($)return $.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var q=-1,K=function W(){for(;++q<H.length;)if(y.call(H,q))return W.value=H[q],W.done=!1,W;return W.value=void 0,W.done=!0,W};return K.next=K}}return{next:z}}function z(){return{value:void 0,done:!0}}return N.prototype=L,l(M,"constructor",L),l(L,"constructor",N),N.displayName=l(L,h,"GeneratorFunction"),p.isGeneratorFunction=function(H){var $=typeof H=="function"&&H.constructor;return!!$&&($===N||($.displayName||$.name)==="GeneratorFunction")},p.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,L):(H.__proto__=L,l(H,h,"GeneratorFunction")),H.prototype=Object.create(M),H},p.awrap=function(H){return{__await:H}},P(x.prototype),l(x.prototype,v,function(){return this}),p.AsyncIterator=x,p.async=function(H,$,q,K,W){W===void 0&&(W=Promise);var Y=new x(d(H,$,q,K),W);return p.isGeneratorFunction($)?Y:Y.next().then(function(se){return se.done?se.value:Y.next()})},P(M),l(M,h,"Generator"),l(M,S,function(){return this}),l(M,"toString",function(){return"[object Generator]"}),p.keys=function(H){var $=[];for(var q in H)$.push(q);return $.reverse(),function K(){for(;$.length;){var W=$.pop();if(W in H)return K.value=W,K.done=!1,K}return K.done=!0,K}},p.values=U,j.prototype={constructor:j,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!$)for(var q in this)q.charAt(0)==="t"&&y.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=void 0)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var q=this;function K(le,ue){return se.type="throw",se.arg=$,q.next=le,ue&&(q.method="next",q.arg=void 0),!!ue}for(var W=this.tryEntries.length-1;W>=0;--W){var Y=this.tryEntries[W],se=Y.completion;if(Y.tryLoc==="root")return K("end");if(Y.tryLoc<=this.prev){var oe=y.call(Y,"catchLoc"),re=y.call(Y,"finallyLoc");if(oe&&re){if(this.prev<Y.catchLoc)return K(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return K(Y.finallyLoc)}else if(oe){if(this.prev<Y.catchLoc)return K(Y.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return K(Y.finallyLoc)}}}},abrupt:function($,q){for(var K=this.tryEntries.length-1;K>=0;--K){var W=this.tryEntries[K];if(W.tryLoc<=this.prev&&y.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var Y=W;break}}Y&&($==="break"||$==="continue")&&Y.tryLoc<=q&&q<=Y.finallyLoc&&(Y=null);var se=Y?Y.completion:{};return se.type=$,se.arg=q,Y?(this.method="next",this.next=Y.finallyLoc,O):this.complete(se)},complete:function($,q){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&q&&(this.next=q),O},finish:function($){for(var q=this.tryEntries.length-1;q>=0;--q){var K=this.tryEntries[q];if(K.finallyLoc===$)return this.complete(K.completion,K.afterLoc),F(K),O}},catch:function($){for(var q=this.tryEntries.length-1;q>=0;--q){var K=this.tryEntries[q];if(K.tryLoc===$){var W=K.completion;if(W.type==="throw"){var Y=W.arg;F(K)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function($,q,K){return this.delegate={iterator:U($),resultName:q,nextLoc:K},this.method==="next"&&(this.arg=void 0),O}},p}f.exports=C,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":f=>{function w(m,g){return f.exports=w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,c){return p.__proto__=c,p},f.exports.__esModule=!0,f.exports.default=f.exports,w(m,g)}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/superPropBase.js":(f,w,m)=>{var g=m("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");function C(p,c){for(;!Object.prototype.hasOwnProperty.call(p,c)&&(p=g(p),p!==null););return p}f.exports=C,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/helpers/typeof.js":f=>{function w(m){"@babel/helpers - typeof";return f.exports=w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},f.exports.__esModule=!0,f.exports.default=f.exports,w(m)}f.exports=w,f.exports.__esModule=!0,f.exports.default=f.exports},"./node_modules/@babel/runtime/regenerator/index.js":(f,w,m)=>{let g=m("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();f.exports=g;try{regeneratorRuntime=g}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}},"./node_modules/after/index.js":f=>{f.exports=w;function w(g,C,p){var c=!1;return p=p||m,y.count=g,g===0?C():y;function y(E,S){if(y.count<=0)throw new Error("after called too many times");--y.count,E?(c=!0,C(E),C=p):y.count===0&&!c&&C(null,S)}}function m(){}},"./node_modules/arraybuffer.slice/index.js":f=>{f.exports=function(w,m,g){var C=w.byteLength;if(m=m||0,g=g||C,w.slice)return w.slice(m,g);if(m<0&&(m+=C),g<0&&(g+=C),g>C&&(g=C),m>=C||m>=g||C===0)return new ArrayBuffer(0);for(var p=new Uint8Array(w),c=new Uint8Array(g-m),y=m,E=0;y<g;y++,E++)c[E]=p[y];return c.buffer}},"./src/client.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/regenerator/index.js")),p=g(m("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),E=g(m("./node_modules/@babel/runtime/helpers/defineProperty.js")),S=m("./src/constants.js"),v=g(m("./src/config.js")),h=g(m("./src/subscriptions.js")),l=g(m("./src/methods.js")),d=g(m("./src/session.js")),b=[S.NativeSocketEvents.CONNECTING,S.NativeSocketEvents.CONNECT,S.NativeSocketEvents.CONNECT_ERROR,S.NativeSocketEvents.DISCONNECT,S.NativeSocketEvents.RECONNECT_ATTEMPT],O=function(){function D(N){var L=this;(0,c.default)(this,D),(0,E.default)(this,"onConnectError",function(){!L.subscriptions.hasActivity()&&!L.methods.hasActivity()&&(L.disconnect("There are no active subscriptions and methods"),L.connectible=!0)}),(0,E.default)(this,"connectOnMethod",function(G){return function(){for(var V=arguments.length,M=new Array(V),P=0;P<V;P++)M[P]=arguments[P];if(L.connectible){var x=L.provideConnection();L.connected&&x.then(function(A){return A[G].apply(A,M)})}}}),(0,E.default)(this,"on",this.connectOnMethod("on")),(0,E.default)(this,"emit",this.connectOnMethod("emit")),(0,E.default)(this,"onSessionDisconnect",function(){L.subscriptions.stop(),L.methods.stop(),delete L.session,L.provideConnection()}),(0,E.default)(this,"emitSocketEventListeners",function(G){for(var V=arguments.length,M=new Array(V>1?V-1:0),P=1;P<V;P++)M[P-1]=arguments[P];L.socketEvents[G]&&L.socketEvents[G].forEach(function(x){return x.apply(void 0,M)})}),(0,E.default)(this,"addConnectingEventListener",function(G){return L.addSocketEventListener(S.NativeSocketEvents.CONNECTING,G)}),(0,E.default)(this,"removeConnectingEventListener",function(G){return L.removeSocketEventListener(S.NativeSocketEvents.CONNECTING,G)}),(0,E.default)(this,"addConnectEventListener",function(G){return L.addSocketEventListener(S.NativeSocketEvents.CONNECT,G)}),(0,E.default)(this,"removeConnectEventListener",function(G){return L.removeSocketEventListener(S.NativeSocketEvents.CONNECT,G)}),(0,E.default)(this,"addConnectErrorEventListener",function(G){return L.addSocketEventListener(S.NativeSocketEvents.CONNECT_ERROR,G)}),(0,E.default)(this,"removeConnectErrorEventListener",function(G){return L.removeSocketEventListener(S.NativeSocketEvents.CONNECT_ERROR,G)}),(0,E.default)(this,"addDisconnectEventListener",function(G){return L.addSocketEventListener(S.NativeSocketEvents.DISCONNECT,G)}),(0,E.default)(this,"removeDisconnectEventListener",function(G){return L.removeSocketEventListener(S.NativeSocketEvents.DISCONNECT,G)}),(0,E.default)(this,"addReconnectAttemptEventListener",function(G){return L.addSocketEventListener(S.NativeSocketEvents.RECONNECT_ATTEMPT,G)}),(0,E.default)(this,"removeReconnectAttemptEventListener",function(G){return L.removeSocketEventListener(S.NativeSocketEvents.RECONNECT_ATTEMPT,G)}),(0,E.default)(this,"removeConnectionListeners",function(){b.forEach(function(G){return L.removeSocketEventListener(G)})}),this.config=new v.default(N),this.resetSocketEvents();var B={onMessage:this.on.bind(this),emitMessage:this.emit.bind(this)};this.subscriptions=new h.default(B),this.methods=new l.default(B),this.connectible=!0,this.connected=!1}return(0,y.default)(D,[{key:"resetSocketEvents",value:function(){this.socketEvents={},this.addConnectErrorEventListener(this.onConnectError)}},{key:"setConfig",value:function(L){this.config.set(L),this.session&&(this.disconnect("Re-config socket connection"),this.connect())}},{key:"provideConnection",value:function(){var L=this;return this.session||(this.session=new d.default(this.config,this.emitSocketEventListeners,this.onSessionDisconnect),this.session.getSocket().then(function(){L.connected=!0,L.methods.initialize(),L.methods.restore(),L.subscriptions.initialize(),L.subscriptions.restore()})),this.session.getSocket()}},{key:"getConnectionId",value:function(){var N=(0,p.default)(C.default.mark(function B(){return C.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!this.session){V.next=4;break}return V.next=3,this.session.getConnectionId();case 3:return V.abrupt("return",V.sent);case 4:return V.abrupt("return",null);case 5:case"end":return V.stop()}},B,this)}));function L(){return N.apply(this,arguments)}return L}()},{key:"connect",value:function(){this.connectible=!0,this.provideConnection()}},{key:"disconnect",value:function(L){this.session&&(this.subscriptions.stop(),this.methods.stop(),this.session.terminate(),delete this.session,this.emitSocketEventListeners(S.NativeSocketEvents.DISCONNECT,L||"disconnected by client")),this.connectible=!1,this.connected=!1}},{key:"terminate",value:function(L){this.resetSocketEvents(),this.subscriptions.reset(),this.methods.reset(),this.disconnect(L||"Terminated by client")}},{key:"addSocketEventListener",value:function(L,B){return this.socketEvents[L]=this.socketEvents[L]||[],this.socketEvents[L].push(B),this}},{key:"removeSocketEventListener",value:function(L,B){return this.socketEvents[L]&&(this.socketEvents[L]=B?this.socketEvents[L].filter(function(G){return G!==B}):[],this.socketEvents[L].length||delete this.socketEvents[L]),this}}]),D}();w.default=O},"./src/config.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/regenerator/index.js")),p=g(m("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),E=g(m("./node_modules/@babel/runtime/helpers/typeof.js")),S=g(m("./node_modules/backendless-request/dist/backendless-request.js")),v=function(D){return typeof D>"u"},h=function(D){return typeof D=="string"},l=function(D){return typeof D=="function"},d=function(D){return(0,E.default)(D)==="object"&&D!==null},b=function(){function O(D){(0,c.default)(this,O),this.appId=null,this.lookupPath=null,this.lookupHeaders={},this.debugMode=!1,this.connectQuery={},this.socketConfigTransform=null,this.socketConfig=null,this.set(D)}return(0,y.default)(O,[{key:"set",value:function(N){if(N){if(!v(N.appId)){if(!h(N.appId))throw new Error('"appId" must be String.');this.appId=N.appId}if(!v(N.lookupPath)){if(!h(N.lookupPath))throw new Error('"lookupPath" must be String.');this.lookupPath=N.lookupPath}if(!v(N.lookupHeaders)){if(!d(N.lookupHeaders))throw new Error('"lookupHeaders" must be Object.');this.lookupHeaders=N.lookupHeaders}if(v(N.debugMode)||(this.debugMode=!!N.debugMode),!v(N.connectQuery))if(l(N.connectQuery))this.getConnectQuery=N.connectQuery;else if(d(N.connectQuery))this.connectQuery=N.connectQuery;else throw new Error('"connectQuery" must be Function or Object.');if(!v(N.socketConfigTransform))if(l(N.socketConfigTransform))this.socketConfigTransform=N.socketConfigTransform;else throw new Error('"socketConfigTransform" must be Function.')}}},{key:"getConnectQuery",value:function(){return this.connectQuery}},{key:"prepare",value:function(){var D=(0,p.default)(C.default.mark(function L(){var B,G,V,M,P;return C.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(h(this.lookupPath)){A.next=2;break}throw new Error("lookupPath must be String");case 2:return A.next=4,S.default.get(this.lookupPath).set(this.lookupHeaders);case 4:if(B=A.sent,G=this.appId?"".concat(B,"/").concat(this.appId):B,V=this.appId?"/".concat(this.appId):void 0,M=this.getConnectQuery(),this.socketConfig={host:B,url:G,options:{path:V,query:M,forceNew:!0,autoConnect:!1,reconnection:!1}},!this.socketConfigTransform){A.next=14;break}return A.next=12,this.socketConfigTransform(this.socketConfig);case 12:P=A.sent,P&&(this.socketConfig=P);case 14:case"end":return A.stop()}},L,this)}));function N(){return D.apply(this,arguments)}return N}()},{key:"getSocketConfig",value:function(){return this.socketConfig}}]),O}();w.default=b},"./src/constants.js":(f,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.RTSubscriptionTypes=w.RTSocketEvents=w.RTMethodTypes=w.NativeSocketEvents=void 0;var m={CONNECTING:"connecting",CONNECT:"connect",CONNECT_ERROR:"connect_error",CONNECT_TIMEOUT:"connect_timeout",DISCONNECT:"disconnect",RECONNECT:"reconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECTING:"reconnecting",RECONNECT_ERROR:"reconnect_error",RECONNECT_FAILED:"reconnect_failed",ERROR:"error",PING:"ping",PONG:"pong"};w.NativeSocketEvents=m;var g={SUB_ON:"SUB_ON",SUB_OFF:"SUB_OFF",SUB_RES:"SUB_RES",SUB_READY:"SUB_READY",MET_REQ:"MET_REQ",MET_RES:"MET_RES"};w.RTSocketEvents=g;var C={OBJECTS_CHANGES:"OBJECTS_CHANGES",RELATIONS_CHANGES:"RELATIONS_CHANGES",PUB_SUB_CONNECT:"PUB_SUB_CONNECT",PUB_SUB_MESSAGES:"PUB_SUB_MESSAGES",PUB_SUB_COMMANDS:"PUB_SUB_COMMANDS",PUB_SUB_USERS:"PUB_SUB_USERS",RSO_CONNECT:"RSO_CONNECT",RSO_CHANGES:"RSO_CHANGES",RSO_CLEARED:"RSO_CLEARED",RSO_COMMANDS:"RSO_COMMANDS",RSO_INVOKE:"RSO_INVOKE",RSO_USERS:"RSO_USERS",LOGGING_MESSAGES:"LOGGING_MESSAGES",CONSOLE_MESSAGES:"CONSOLE_MESSAGES",DEVELOPER_MESSAGES:"DEVELOPER_MESSAGES"};w.RTSubscriptionTypes=C;var p={SET_USER_TOKEN:"SET_USER_TOKEN",RSO_GET:"RSO_GET",RSO_SET:"RSO_SET",RSO_CLEAR:"RSO_CLEAR",RSO_COMMAND:"RSO_COMMAND",RSO_INVOKE:"RSO_INVOKE",PUB_SUB_COMMAND:"PUB_SUB_COMMAND"};w.RTMethodTypes=p},"./src/index.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=w.RTScopeConnector=w.RTListeners=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/typeof.js")),p=g(m("./node_modules/backendless-request/dist/backendless-request.js")),c=g(m("./src/client.js")),y=g(m("./src/listeners.js")),E=g(m("./src/scope-connector.js")),S=(typeof self>"u"?"undefined":(0,C.default)(self))==="object"&&self.self===self&&self||(typeof m.g>"u"?"undefined":(0,C.default)(m.g))==="object"&&m.g.global===m.g&&m.g;c.default.Request=p.default,c.default.Listeners=y.default,c.default.ScopeConnector=E.default,S&&(S.BackendlessRTClient=c.default),f.exports=c.default;var v=c.default;w.default=v;var h=y.default;w.RTListeners=h;var l=E.default;w.RTScopeConnector=l},"./src/listeners.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=g(m("./node_modules/@babel/runtime/helpers/createClass.js"));function y(v,h){var l=Object.keys(v);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(v);h&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(v,b).enumerable})),l.push.apply(l,d)}return l}function E(v){for(var h=1;h<arguments.length;h++){var l=arguments[h]!=null?arguments[h]:{};h%2?y(Object(l),!0).forEach(function(d){(0,C.default)(v,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(l)):y(Object(l)).forEach(function(d){Object.defineProperty(v,d,Object.getOwnPropertyDescriptor(l,d))})}return v}var S=function(){function v(){(0,p.default)(this,v),this.subscriptions={},this.simpleListeners={}}return(0,c.default)(v,[{key:"addSubscription",value:function(l,d,b){var O=this,D=b.callback,N=b.onError,L=b.onReady,B=b.parser,G=b.params;this.subscriptions[l]=this.subscriptions[l]||[];var V=d(E(E({},G),this.getSubscriptionOptions()),{parser:B,onData:D,onError:N,onReady:L,onStop:function(){O.subscriptions[l]=O.subscriptions[l].filter(function(x){return x.subscription!==V})}}),M={callback:D,params:G,subscription:V,stop:function(){return V.stop()}};return this.subscriptions[l].push(M),M}},{key:"getSubscriptionOptions",value:function(){return{}}},{key:"stopSubscription",value:function(l,d){var b=d.callback,O=d.matcher,D=this.subscriptions[l]=this.subscriptions[l]||[];O?D.forEach(function(N){O(N)&&N.subscription.stop()}):D.forEach(function(N){(!b||N.callback===b)&&N.subscription.stop()})}},{key:"addSimpleListener",value:function(l,d){var b=this.simpleListeners[l]=this.simpleListeners[l]||[];b.push(d)}},{key:"removeSimpleListener",value:function(l,d){this.simpleListeners[l]&&(this.simpleListeners[l]=d?this.simpleListeners[l].filter(function(b){return b!==d}):[])}},{key:"runSimpleListeners",value:function(l){for(var d=arguments.length,b=new Array(d>1?d-1:0),O=1;O<d;O++)b[O-1]=arguments[O];this.simpleListeners[l]&&this.simpleListeners[l].forEach(function(D){return D.apply(void 0,b)})}},{key:"removeAllListeners",value:function(){var l=this;Object.keys(this.subscriptions).forEach(function(d){l.subscriptions[d].forEach(function(b){var O=b.subscription;return O.stop()})}),this.simpleListeners={}}}]),v}();w.default=S},"./src/methods.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),c=g(m("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=m("./src/constants.js"),E=g(m("./src/utils.js")),S=function(l){return function(d){return this.send(l,d)}},v=function(){function h(l){var d=this,b=l.onMessage,O=l.emitMessage;(0,C.default)(this,h),(0,c.default)(this,"sendRequest",function(D){d.invocations[D]&&d.emitMessage(y.RTSocketEvents.MET_REQ,d.invocations[D].data)}),(0,c.default)(this,"onResponse",function(D){var N=D.id,L=D.error,B=D.result;if(d.invocations[N]){var G=d.invocations[N];L?G.reject(L):G.resolve(B),delete d.invocations[N]}}),(0,c.default)(this,"setUserToken",S(y.RTMethodTypes.SET_USER_TOKEN).bind(this)),(0,c.default)(this,"sendPubSubCommand",S(y.RTMethodTypes.PUB_SUB_COMMAND).bind(this)),(0,c.default)(this,"getRSO",S(y.RTMethodTypes.RSO_GET).bind(this)),(0,c.default)(this,"setRSO",S(y.RTMethodTypes.RSO_SET).bind(this)),(0,c.default)(this,"clearRSO",S(y.RTMethodTypes.RSO_CLEAR).bind(this)),(0,c.default)(this,"sendRSOCommand",S(y.RTMethodTypes.RSO_COMMAND).bind(this)),(0,c.default)(this,"invokeRSOMethod",S(y.RTMethodTypes.RSO_INVOKE).bind(this)),this.onMessage=b,this.emitMessage=O,this.invocations={}}return(0,p.default)(h,[{key:"initialize",value:function(){this.onMessage(y.RTSocketEvents.MET_RES,this.onResponse)}},{key:"restore",value:function(){var d=this;Object.keys(this.invocations).forEach(function(b){d.sendRequest(b)})}},{key:"stop",value:function(){}},{key:"reset",value:function(){this.invocations={}}},{key:"hasActivity",value:function(){return!!Object.keys(this.invocations).length}},{key:"send",value:function(d,b){var O=this,D=E.default.generateUID();return this.invocations[D]={data:{id:D,name:d,options:b}},this.sendRequest(D),new Promise(function(N,L){O.invocations[D].resolve=N,O.invocations[D].reject=L})}}]),h}();w.default=v},"./src/scope-connector.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),c=g(m("./node_modules/@babel/runtime/helpers/get.js")),y=g(m("./node_modules/@babel/runtime/helpers/inherits.js")),E=g(m("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),S=g(m("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),v=g(m("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=g(m("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),l=g(m("./src/listeners.js")),d,b,O,D,N,L,B;function G(F,j){var U=Object.keys(F);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(F);j&&(z=z.filter(function(H){return Object.getOwnPropertyDescriptor(F,H).enumerable})),U.push.apply(U,z)}return U}function V(F){for(var j=1;j<arguments.length;j++){var U=arguments[j]!=null?arguments[j]:{};j%2?G(Object(U),!0).forEach(function(z){(0,v.default)(F,z,U[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(U)):G(Object(U)).forEach(function(z){Object.defineProperty(F,z,Object.getOwnPropertyDescriptor(U,z))})}return F}function M(F){var j=P();return function(){var z=(0,S.default)(F),H;if(j){var $=(0,S.default)(this).constructor;H=Reflect.construct(z,arguments,$)}else H=z.apply(this,arguments);return(0,E.default)(this,H)}}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x={CONNECT:"CONNECT",ERROR:"ERROR",COMMAND:"COMMAND",USER_STATUS:"USER_STATUS"},A=(d=k(),b=k(),O=k(),D=k(),N=k(!0),L=(B=function(F){(0,y.default)(U,F);var j=M(U);function U(z){var H;return(0,C.default)(this,U),H=j.call(this),H.options=z,H.waitConnection=[],H.connect(),H}return(0,p.default)(U,[{key:"connectSubscriber",get:function(){return null}},{key:"commandSubscriber",get:function(){return null}},{key:"usersSubscriber",get:function(){return null}},{key:"commandSender",get:function(){return null}},{key:"connect",value:function(){var H=this;this.isConnected()||(this.connection=this.connectSubscriber(this.getScopeOptions(),{onError:function(q){return H.onError(q)},onReady:function(){return H.onConnect()},onStop:function(){return H.onDisconnect()}}))}},{key:"disconnect",value:function(){this.isConnected()&&this.connection.stop()}},{key:"isConnected",value:function(){return!!this.connection&&this.connection.isReady()}},{key:"getSubscriptionOptions",value:function(){return this.getScopeOptions()}},{key:"getScopeOptions",value:function(){return this.options}},{key:"onConnect",value:function(){this.waitConnection.forEach(function(H){return H()}),this.waitConnection=[],this.runSimpleListeners(x.CONNECT)}},{key:"onError",value:function(H){this.runSimpleListeners(x.ERROR,H)}},{key:"onDisconnect",value:function(){this.connection=null}},{key:"removeAllListeners",value:function(){return this.waitConnection=[],(0,c.default)((0,S.default)(U.prototype),"removeAllListeners",this).call(this),this}},{key:"addConnectListener",value:function(H,$){return this.addSimpleListener(x.CONNECT,H),$&&this.addSimpleListener(x.ERROR,$),this}},{key:"removeConnectListeners",value:function(H,$){return this.removeSimpleListener(x.CONNECT,H),$&&this.removeSimpleListener(x.ERROR,$),this}},{key:"addCommandListener",value:function(H,$){return this.addSubscription(x.COMMAND,this.commandSubscriber,{callback:H,onError:$}),this}},{key:"removeCommandListeners",value:function(H){return this.stopSubscription(x.COMMAND,{callback:H}),this}},{key:"addUserStatusListener",value:function(H,$){return this.addSubscription(x.USER_STATUS,this.usersSubscriber,{callback:H,onError:$}),this}},{key:"removeUserStatusListeners",value:function(H){return this.stopSubscription(x.USER_STATUS,{callback:H}),this}},{key:"send",value:function(H,$){return this.commandSender(V(V({},this.getScopeOptions()),{},{type:H,data:$}))}}]),U}(l.default),(0,v.default)(B,"connectionRequired",k),B),(0,h.default)(L.prototype,"addCommandListener",[d],Object.getOwnPropertyDescriptor(L.prototype,"addCommandListener"),L.prototype),(0,h.default)(L.prototype,"removeCommandListeners",[b],Object.getOwnPropertyDescriptor(L.prototype,"removeCommandListeners"),L.prototype),(0,h.default)(L.prototype,"addUserStatusListener",[O],Object.getOwnPropertyDescriptor(L.prototype,"addUserStatusListener"),L.prototype),(0,h.default)(L.prototype,"removeUserStatusListeners",[D],Object.getOwnPropertyDescriptor(L.prototype,"removeUserStatusListeners"),L.prototype),(0,h.default)(L.prototype,"send",[N],Object.getOwnPropertyDescriptor(L.prototype,"send"),L.prototype),L);w.default=A;function k(F){return function(j,U,z){var H=z.value;return z.value=function(){var $=arguments,q=this,K=function(){return H.apply(q,$)};return this.isConnected()?K():F?new Promise(function(W,Y){return q.waitConnection.push(function(){return K().then(W,Y)})}):(this.waitConnection.push(K),this)},z}}},"./src/session.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/regenerator/index.js")),p=g(m("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),E=m("./src/constants.js"),S=g(m("./src/socket.js")),v=10,h=200,l=60*1e3,d=function(D){return new Promise(function(N){return setTimeout(N,D)})},b=function(){function O(D,N,L){(0,c.default)(this,O),this.config=D,this.dispatch=N,this.onDisconnect=L,this.connectAttempt=0,this.socketPromise=this.connect()}return(0,y.default)(O,[{key:"terminate",value:function(){this.terminated||(this.terminated=!0,this.dispatch=function(){},this.socketPromise.then(function(N){N&&N.close()}))}},{key:"getSocket",value:function(){var N=this;return this.socketPromise.then(function(L){return N.terminated?new Promise(function(){}):L})}},{key:"getConnectionId",value:function(){var D=(0,p.default)(C.default.mark(function L(){var B,G,V,M;return C.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.getSocket();case 2:return M=x.sent,x.abrupt("return",(M==null||(B=M.ioSocket)===null||B===void 0||(G=B.io)===null||G===void 0||(V=G.engine)===null||V===void 0?void 0:V.id)||null);case 4:case"end":return x.stop()}},L,this)}));function N(){return D.apply(this,arguments)}return N}()},{key:"connect",value:function(){var N=this;if(!this.terminated){this.connectAttempt=this.connectAttempt+1;var L=this.getNextReconnectionTimeout();return this.onConnecting(),this.connectAttempt>1&&this.onReconnectAttempt(this.connectAttempt-1,L),S.default.connect(this.config,this.onSocketDisconnect.bind(this)).then(function(B){return N.connectAttempt=0,N.onConnect(),B}).catch(function(B){if(N.onConnectError(B),!N.terminated)return d(L).then(function(){return N.connect()})})}}},{key:"getNextReconnectionTimeout",value:function(){var N=Math.ceil(this.connectAttempt/v),L=h*Math.pow(2,N);return Math.min(L,l)}},{key:"onSocketDisconnect",value:function(N){this.dispatch(E.NativeSocketEvents.DISCONNECT,N),this.terminated||(this.terminate(),this.onDisconnect())}},{key:"onConnecting",value:function(){this.dispatch(E.NativeSocketEvents.CONNECTING)}},{key:"onConnect",value:function(){this.dispatch(E.NativeSocketEvents.CONNECT)}},{key:"onConnectError",value:function(N){this.dispatch(E.NativeSocketEvents.CONNECT_ERROR,N&&N.message||N)}},{key:"onReconnectAttempt",value:function(N,L){this.dispatch(E.NativeSocketEvents.RECONNECT_ATTEMPT,N,L)}}]),O}();w.default=b},"./src/socket-parser.js":(f,w,m)=>{"use strict";var g=m("./node_modules/component-emitter/index.js");w.protocol=4,w.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],w.CONNECT=0,w.DISCONNECT=1,w.EVENT=2,w.ACK=3,w.ERROR=4,w.BINARY_EVENT=5,w.BINARY_ACK=6,w.Encoder=C,w.Decoder=c;function C(){}C.prototype.encode=function(v,h){h([p(v)])};function p(v){var h=""+v.type;return(w.BINARY_EVENT===v.type||w.BINARY_ACK===v.type)&&(h+=v.attachments+"-"),v.nsp&&v.nsp!=="/"&&(h+=v.nsp+","),v.id!=null&&(h+=v.id),v.data!=null&&(h+=JSON.stringify(v.data)),h}function c(){}g(c.prototype),c.prototype.add=function(v){if(typeof v=="string")this.emit("decoded",y(v));else throw new Error("Unknown type: "+v)};function y(v){var h=0,l={type:Number(v.charAt(0))};if(w.types[l.type]==null)return S();if(w.BINARY_EVENT===l.type||w.BINARY_ACK===l.type){for(var d="";v.charAt(++h)!=="-"&&(d+=v.charAt(h),h!=v.length););if(d!=Number(d)||v.charAt(h)!=="-")throw new Error("Illegal attachments");l.attachments=Number(d)}if(v.charAt(h+1)==="/")for(l.nsp="";++h;){var b=v.charAt(h);if(b===","||(l.nsp+=b,h===v.length))break}else l.nsp="/";var O=v.charAt(h+1);if(O!==""&&Number(O)==O){for(l.id="";++h;){var b=v.charAt(h);if(b==null||Number(b)!=b){--h;break}if(l.id+=v.charAt(h),h===v.length)break}l.id=Number(l.id)}return v.charAt(++h)&&(l=E(l,v.substr(h))),l}function E(v,h){try{v.data=JSON.parse(h)}catch{return S()}return v}c.prototype.destroy=function(){};function S(){return{type:w.ERROR,data:"parser error"}}},"./src/socket.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),c=m("./src/constants.js"),y=function(){function E(S,v){(0,C.default)(this,E);var h=m("./node_modules/socket.io-client/lib/index.js");this.config=S,this.events={};var l=S.getSocketConfig(),d=l.url,b=l.options;this.ioSocket=h(d,b)}return(0,p.default)(E,[{key:"connect",value:function(){this.ioSocket.connect()}},{key:"close",value:function(){this.log("log","close socket"),this.events={},this.ioSocket.off(),this.ioSocket.close()}},{key:"on",value:function(v,h){var l=this;this.events[v]||this.ioSocket.on(v,function(d){return l.onEvent(v,d)}),this.events[v]=this.events[v]||[],this.events[v].push(h)}},{key:"off",value:function(v,h){this.events[v]=h?this.events[v].filter(function(l){return l!==h}):[],this.events[v].length||delete this.events[v],this.events[v]||this.ioSocket.off(v)}},{key:"onEvent",value:function(v,h){this.logMessage("FROM SERVER",v,h),this.events[v]&&this.events[v].forEach(function(l){return l(h)})}},{key:"emit",value:function(v,h){this.logMessage("TO SERVER",v,h),this.ioSocket.emit(v,h)}},{key:"log",value:function(v){if(this.config.debugMode){for(var h,l=arguments.length,d=new Array(l>1?l-1:0),b=1;b<l;b++)d[b-1]=arguments[b];(h=console)[v].apply(h,["[RT Client]:"].concat(d))}}},{key:"logMessage",value:function(v,h,l){this.log("log","[".concat(v,"] - [event: ").concat(h,"] - arguments: ").concat(JSON.stringify(l)," "))}}],[{key:"connect",value:function(v,h){return Promise.resolve().then(function(){return v.prepare()}).then(function(){return new Promise(function(l,d){var b=new E(v);b.on(c.NativeSocketEvents.CONNECT,O),b.on(c.NativeSocketEvents.CONNECT_ERROR,D),b.on(c.NativeSocketEvents.CONNECT_TIMEOUT,D),b.on(c.NativeSocketEvents.ERROR,function(L){b.log("error","received ERROR event while connecting",L),N(L)}),b.connect();function O(){b.log("log","socket connected"),l(b)}function D(L){b.log("error","received one of [CONNECT_ERROR,CONNECT_TIMEOUT] socket event while connecting",L),N(L)}function N(L){b.log("log","close and reject socket with error:",L),b.close(),d(L)}})}).then(function(l){return l.on(c.NativeSocketEvents.DISCONNECT,h),l.on(c.NativeSocketEvents.ERROR,h),l})}}]),E}();w.default=y},"./src/subscriptions.js":(f,w,m)=>{"use strict";var g=m("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var C=g(m("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=g(m("./node_modules/@babel/runtime/helpers/createClass.js")),c=g(m("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=m("./src/constants.js"),E=g(m("./src/utils.js")),S=function(l){return function(d,b){return this.subscribe(l,d,b)}},v=function(){function h(l){var d=l.onMessage,b=l.emitMessage;(0,C.default)(this,h),(0,c.default)(this,"onObjectsChanges",S(y.RTSubscriptionTypes.OBJECTS_CHANGES).bind(this)),(0,c.default)(this,"onRelationsChanges",S(y.RTSubscriptionTypes.RELATIONS_CHANGES).bind(this)),(0,c.default)(this,"connectToPubSub",S(y.RTSubscriptionTypes.PUB_SUB_CONNECT).bind(this)),(0,c.default)(this,"onPubSubMessage",S(y.RTSubscriptionTypes.PUB_SUB_MESSAGES).bind(this)),(0,c.default)(this,"onPubSubCommand",S(y.RTSubscriptionTypes.PUB_SUB_COMMANDS).bind(this)),(0,c.default)(this,"onPubSubUserStatus",S(y.RTSubscriptionTypes.PUB_SUB_USERS).bind(this)),(0,c.default)(this,"connectToRSO",S(y.RTSubscriptionTypes.RSO_CONNECT).bind(this)),(0,c.default)(this,"onRSOChanges",S(y.RTSubscriptionTypes.RSO_CHANGES).bind(this)),(0,c.default)(this,"onRSOClear",S(y.RTSubscriptionTypes.RSO_CLEARED).bind(this)),(0,c.default)(this,"onRSOCommand",S(y.RTSubscriptionTypes.RSO_COMMANDS).bind(this)),(0,c.default)(this,"onRSOInvoke",S(y.RTSubscriptionTypes.RSO_INVOKE).bind(this)),(0,c.default)(this,"onRSOUserStatus",S(y.RTSubscriptionTypes.RSO_USERS).bind(this)),(0,c.default)(this,"onLoggingMessages",S(y.RTSubscriptionTypes.LOGGING_MESSAGES).bind(this)),(0,c.default)(this,"onConsoleMessages",S(y.RTSubscriptionTypes.CONSOLE_MESSAGES).bind(this)),(0,c.default)(this,"onDeveloperMessage",S(y.RTSubscriptionTypes.DEVELOPER_MESSAGES).bind(this)),this.onMessage=d,this.emitMessage=b,this.subscriptions={}}return(0,p.default)(h,[{key:"initialize",value:function(){var d=this;this.onMessage(y.RTSocketEvents.SUB_READY,function(b){return d.onSubscriptionReady(b)}),this.onMessage(y.RTSocketEvents.SUB_RES,function(b){return d.onSubscriptionResponse(b)})}},{key:"stop",value:function(){var d=this;Object.keys(this.subscriptions).forEach(function(b){d.subscriptions[b].ready=!1})}},{key:"reset",value:function(){var d=this;Object.keys(this.subscriptions).forEach(function(b){return d.stopSubscription(b)})}},{key:"restore",value:function(){var d=this;Object.keys(this.subscriptions).forEach(function(b){d.startSubscription(b)})}},{key:"hasActivity",value:function(){return!!Object.keys(this.subscriptions).length}},{key:"subscribe",value:function(d,b,O){var D=this,N=O.parser,L=O.onData,B=O.onError,G=O.onStop,V=O.onReady,M=E.default.generateUID();return this.subscriptions[M]={data:{id:M,name:d,options:b},ready:!1,parser:N,onData:L,onError:B,onStop:G,onReady:V},this.startSubscription(M),{isReady:function(){return!!D.subscriptions[M]&&D.subscriptions[M].ready},stop:function(){D.subscriptions[M]&&D.offSubscription(M)}}}},{key:"startSubscription",value:function(d){var b=this.subscriptions[d];this.emitMessage(y.RTSocketEvents.SUB_ON,b.data)}},{key:"stopSubscription",value:function(d){var b=this.subscriptions[d];b&&(b.onStop&&b.onStop(),delete this.subscriptions[d])}},{key:"offSubscription",value:function(d){var b=this.subscriptions[d];b&&(this.emitMessage(y.RTSocketEvents.SUB_OFF,{id:d}),this.stopSubscription(d))}},{key:"onSubscriptionReady",value:function(d){var b=d.id,O=this.subscriptions[b];O&&!O.ready&&(O.ready=!0,O.onReady&&O.onReady())}},{key:"onSubscriptionResponse",value:function(d){var b=d.id,O=d.data,D=d.error,N=this.subscriptions[b];N&&(D?(N.onError&&N.onError(D),this.stopSubscription(b)):(N.ready||(N.ready=!0,N.onReady&&N.onReady()),N.onData&&(typeof N.parser=="function"&&(O=N.parser(O)),N.onData(O))))}}]),h}();w.default=v},"./src/utils.js":(f,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",g={generateUID:function(){for(var c="",y=0;y<8;y++)c+=m.charAt(Math.floor(Math.random()*m.length));return c+Date.now()}},C=g;w.default=C},"./node_modules/backendless-request/dist/backendless-request.js":function(f,w){(function(g,C){typeof w=="object"&&typeof f=="object"?f.exports=C():(a=[],o=C,u=typeof o=="function"?o.apply(w,a):o,u!==void 0&&(f.exports=u))})(typeof self<"u"?self:this,function(){return function(m){var g={};function C(p){if(g[p])return g[p].exports;var c=g[p]={i:p,l:!1,exports:{}};return m[p].call(c.exports,c,c.exports,C),c.l=!0,c.exports}return C.m=m,C.c=g,C.d=function(p,c,y){C.o(p,c)||Object.defineProperty(p,c,{configurable:!1,enumerable:!0,get:y})},C.n=function(p){var c=p&&p.__esModule?function(){return p.default}:function(){return p};return C.d(c,"a",c),c},C.o=function(p,c){return Object.prototype.hasOwnProperty.call(p,c)},C.p="",C(C.s=3)}([function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.isStream=g.isObject=g.isFormData=g.castArray=void 0;function p(v){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},p(v)}var c=function(h){return Array.isArray(h)?h:[h]};g.castArray=c;var y=function(h){return h!=null&&p(h)==="object"};g.isObject=y;var E=function(h){return h&&h.constructor&&h.constructor.toString().trim().indexOf("function FormData")===0};g.isFormData=E;var S=function(h){var l=C(5);return h instanceof l.Stream};g.isStream=S},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(m,g,C){"use strict";function p(W){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},p(W)}Object.defineProperty(g,"__esModule",{value:!0}),g.Request=void 0;var c=C(10),y=d(C(11)),E=l(C(12)),S=C(0),v=C(13);function h(W){if(typeof WeakMap!="function")return null;var Y=new WeakMap,se=new WeakMap;return(h=function(re){return re?se:Y})(W)}function l(W,Y){if(!Y&&W&&W.__esModule)return W;if(W===null||p(W)!=="object"&&typeof W!="function")return{default:W};var se=h(Y);if(se&&se.has(W))return se.get(W);var oe={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in W)if(le!=="default"&&Object.prototype.hasOwnProperty.call(W,le)){var ue=re?Object.getOwnPropertyDescriptor(W,le):null;ue&&(ue.get||ue.set)?Object.defineProperty(oe,le,ue):oe[le]=W[le]}return oe.default=W,se&&se.set(W,oe),oe}function d(W){return W&&W.__esModule?W:{default:W}}function b(W,Y){var se=Object.keys(W);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(W);Y&&(oe=oe.filter(function(re){return Object.getOwnPropertyDescriptor(W,re).enumerable})),se.push.apply(se,oe)}return se}function O(W){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y]!=null?arguments[Y]:{};Y%2?b(Object(se),!0).forEach(function(oe){D(W,oe,se[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(se)):b(Object(se)).forEach(function(oe){Object.defineProperty(W,oe,Object.getOwnPropertyDescriptor(se,oe))})}return W}function D(W,Y,se){return Y in W?Object.defineProperty(W,Y,{value:se,enumerable:!0,configurable:!0,writable:!0}):W[Y]=se,W}function N(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(W,Y){for(var se=0;se<Y.length;se++){var oe=Y[se];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(W,oe.key,oe)}}function B(W,Y,se){return Y&&L(W.prototype,Y),se&&L(W,se),Object.defineProperty(W,"prototype",{writable:!1}),W}function G(W,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(Y&&Y.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),Y&&V(W,Y)}function V(W,Y){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,re){return oe.__proto__=re,oe},V(W,Y)}function M(W){var Y=A();return function(){var oe=k(W),re;if(Y){var le=k(this).constructor;re=Reflect.construct(oe,arguments,le)}else re=oe.apply(this,arguments);return P(this,re)}}function P(W,Y){if(Y&&(p(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(W)}function x(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(W){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)},k(W)}var F="Content-Type",j="request",U="response",z="error",H="done",$=function(W){G(se,W);var Y=M(se);function se(oe,re,le){var ue;return N(this,se),ue=Y.call(this),ue.method=re,ue.path=oe,ue.body=le,ue.tags=void 0,ue.unwrap=!0,ue.cacheTTL=0,ue.headers={},ue.queryParams={},ue.encoding="utf8",ue.timeout=0,ue}return B(se,[{key:"set",value:function(re,le){if((0,S.isObject)(re))for(var ue in re)this.set(ue,re[ue]);else typeof le<"u"&&(this.headers[re]=le);return this}},{key:"cacheTags",value:function(){for(var re=arguments.length,le=new Array(re),ue=0;ue<re;ue++)le[ue]=arguments[ue];return this.tags=le,this}},{key:"query",value:function(re){return Object.assign(this.queryParams,re),this}},{key:"form",value:function(re){var le=this;if(re){var ue=se.FormData;re instanceof ue?this.body=re:function(){var Be=new ue,Nt=function(ft){ft&&(0,S.castArray)(re[ft]).forEach(function(an){an&&an.hasOwnProperty("value")&&an.hasOwnProperty("options")?Be.append(ft,an.value,an.options):Be.append(ft,an)})};for(var Je in re)Nt(Je);le.body=Be}()}return this}},{key:"useCache",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15e3;return this.cacheTTL=re,this}},{key:"resetCache",value:function(re){return re&&this.tags&&c.cache.deleteByTags(this.tags),this}},{key:"type",value:function(re){return this.set(F,re),this}},{key:"unwrapBody",value:function(re){return this.unwrap=re,this}},{key:"setEncoding",value:function(re){return this.encoding=re,this}},{key:"setTimeout",value:function(re){return this.timeout=re,this}},{key:"send",value:function(re){var le=this;this.emit(j,this);var ue=this.path,Be=E.stringify(this.queryParams);if(Be&&(ue+="?"+Be),this.cacheTTL){var Nt=c.cache.get(ue);if(Nt!==void 0)return Promise.resolve(Nt)}var Je=this.headers[F];if(!Je&&(0,S.isObject)(re)&&!(0,S.isFormData)(re)&&this.type("application/json"),re){var nt=this.headers[F]==="application/json";re=nt&&typeof re!="string"?JSON.stringify(re):re}var ft=function(Tn){return le.unwrap?Tn.body:Tn},an=function(Tn){return le.cacheTTL&&c.cache.set(ue,Tn,le.tags,le.cacheTTL),Tn},Ky=function(Tn){return le.tags&&le.method!=="get"&&c.cache.deleteByTags(le.tags),Tn};se.verbose&&console.log(this.method.toUpperCase(),decodeURIComponent(ue),re,this.headers);var Nd=se.send(ue,this.method.toUpperCase(),this.headers,re,this.encoding,this.timeout).then(q).then(K).then(ft).then(an).then(Ky);return Nd.then(function(ln){le.emit(U,ln),le.emit(H,null,ln)}).catch(function(ln){le.emit(z,ln),le.emit(H,ln)}),Nd}},{key:"then",value:function(re,le){return this.promise=this.promise||this.send(this.body),this.promise.then(re,le)}},{key:"catch",value:function(re){return this.promise=this.promise||this.send(this.body),this.promise.catch(re)}}]),se}(y.default);g.Request=$;function q(W){try{return O(O({},W),{},{body:JSON.parse(W.body)})}catch{return W}}function K(W){if(W.status>=200&&W.status<300)return W;throw new v.ResponseError(W)}},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var p=C(4),c=C(9),y=C(2);Object.defineProperty(y.Request,"FormData",{get:function(){return typeof FormData<"u"?FormData:C(14)}}),y.Request.XMLHttpRequest=typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0,y.Request.send=function(S,v,h,l,d,b){var O=typeof y.Request.XMLHttpRequest<"u"?c.sendXmlHttpRequest:p.sendNodeAPIRequest;return O(S,v,h,l,d,b)},y.Request.verbose=!1,y.Request.methods=["get","post","put","patch","delete"],y.Request.methods.forEach(function(S){y.Request[S]=function(v,h){return new y.Request(v,S,h)}}),g=m.exports=y.Request;var E=y.Request;g.default=E},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.sendNodeAPIRequest=c;var p=C(0);function c(y,E,S,v,h,l){return new Promise(function(d,b){var O=C(6).parse(y),D=(0,p.isFormData)(v)&&v,N=O.protocol==="https:",L={host:O.hostname,port:O.port||(N?443:80),path:O.pathname+(O.search||""),method:E,headers:S,timeout:l},B=function(){var M=C(1).Buffer,P=C(N?7:8),x=P.request(L,function(A){var k=[],F=[],j=0,U="",z=A.statusCode,H=A.statusMessage,$=A.headers;A.on("data",function(q){M.isBuffer(q)?q.length&&(j+=q.length,F.push(q)):k.push(q)}),A.on("end",function(){j?(U=M.concat(F,j),h!=null&&(U=U.toString(h))):k.length&&(U=k.join()),d({status:z,statusText:H,headers:$,body:U})}),A.on("error",b)});if(x.on("error",b),x.on("timeout",function(){x.destroy(new Error("Connection aborted due to timeout"))}),v){if((0,p.isStream)(v)){v.pipe(x);return}x.write(v)}x.end()};if(D)Object.assign(L.headers,D.getHeaders()),D.getLength(function(V,M){!V&&!isNaN(M)&&(L.headers["content-length"]=M),B()});else{if(v&&!L.headers["content-length"]){var G=C(1).Buffer;L.headers["content-length"]=G.byteLength(v)}B()}})}},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.sendXmlHttpRequest=c;var p=C(2);function c(E,S,v,h,l,d){return new Promise(function(O,D){var N=new p.Request.XMLHttpRequest;N.timeout=d,l||(N.responseType="arraybuffer"),N.open(S.toUpperCase(),E,!0),N.onload=function(){var B=y(N.getAllResponseHeaders()),G=N,V=G.status,M=G.statusText,P={status:V,statusText:M,headers:B};l==="utf8"?P.body=N.response||N.responseText:N.response&&(P.body=new Uint8Array(N.response)),O(P),N=null},N.onerror=function(){D(new Error("Network Error")),N=null},N.ontimeout=function(){D(new Error("Connection aborted due to timeout")),N=null},Object.keys(v).forEach(function(L){N.setRequestHeader(L,v[L])}),N.send(h)})}function y(E){var S={};return E&&E.split(`
`).forEach(function(v){var h=v.indexOf(":"),l=v.substr(0,h).trim(),d=v.substr(h+1).trim();l&&(S[l]=S[l]?S[l]+", "+d:d)}),S}},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.cache=void 0;function p(M,P){return E(M)||y(M,P)||v(M,P)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(M,P){var x=M==null?null:typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(x!=null){var A=[],k=!0,F=!1,j,U;try{for(x=x.call(M);!(k=(j=x.next()).done)&&(A.push(j.value),!(P&&A.length===P));k=!0);}catch(z){F=!0,U=z}finally{try{!k&&x.return!=null&&x.return()}finally{if(F)throw U}}return A}}function E(M){if(Array.isArray(M))return M}function S(M,P){var x=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!x){if(Array.isArray(M)||(x=v(M))||P&&M&&typeof M.length=="number"){x&&(M=x);var A=0,k=function(){};return{s:k,n:function(){return A>=M.length?{done:!0}:{done:!1,value:M[A++]}},e:function(H){throw H},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=!0,j=!1,U;return{s:function(){x=x.call(M)},n:function(){var H=x.next();return F=H.done,H},e:function(H){j=!0,U=H},f:function(){try{!F&&x.return!=null&&x.return()}finally{if(j)throw U}}}}function v(M,P){if(M){if(typeof M=="string")return h(M,P);var x=Object.prototype.toString.call(M).slice(8,-1);if(x==="Object"&&M.constructor&&(x=M.constructor.name),x==="Map"||x==="Set")return Array.from(M);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return h(M,P)}}function h(M,P){(P==null||P>M.length)&&(P=M.length);for(var x=0,A=new Array(P);x<P;x++)A[x]=M[x];return A}function l(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}function d(M,P){for(var x=0;x<P.length;x++){var A=P[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}function b(M,P,x){return P&&d(M.prototype,P),x&&d(M,x),Object.defineProperty(M,"prototype",{writable:!1}),M}var O=function(P,x,A){return{value:P,tags:x,ttl:A}},D=function(){return new Date().getTime()},N=function(P,x){var A=P==x;return!A&&P instanceof RegExp&&(A=P.test(x)),!A&&x instanceof RegExp&&(A=x.test(P)),A},L=function(P,x){return!!P.find(function(A){return x.find(function(k){return N(A,k)})})},B=function(){function M(P){l(this,M),this.setFlushInterval(P),this.map=new Map}return b(M,[{key:"setFlushInterval",value:function(x){this.flushInterval=x,this.flushTimer&&(clearInterval(this.flushTimer),delete this.flushTimer)}},{key:"get",value:function(x){var A=this.map.get(x);if(A){if(A.ttl>D())return A.value;this.map.delete(x)}}},{key:"set",value:function(x,A,k,F){this.map.set(x,O(A,k,D()+F)),this.flushInterval&&!this.flushTimer&&(this.flushTimer=setInterval(this.flush.bind(this),this.flushInterval),this.flushTimer.unref&&this.flushTimer.unref())}},{key:"delete",value:function(x){this.map.delete(x)}},{key:"deleteAll",value:function(){var x=S(this.map),A;try{for(x.s();!(A=x.n()).done;){var k=p(A.value,1),F=k[0];this.delete(F)}}catch(j){x.e(j)}finally{x.f()}}},{key:"deleteByTags",value:function(x){var A=S(this.map),k;try{for(A.s();!(k=A.n()).done;){var F=p(k.value,2),j=F[0],U=F[1];U.tags&&L(x,U.tags)&&this.delete(j)}}catch(z){A.e(z)}finally{A.f()}}},{key:"flush",value:function(){var x=D(),A=S(this.map),k;try{for(A.s();!(k=A.n()).done;){var F=p(k.value,2),j=F[0],U=F[1];U.ttl<x&&this.delete(j)}}catch(z){A.e(z)}finally{A.f()}}}]),M}(),G=6e4,V=new B(G);g.cache=V},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;function p(S,v){if(!(S instanceof v))throw new TypeError("Cannot call a class as a function")}function c(S,v){for(var h=0;h<v.length;h++){var l=v[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(S,l.key,l)}}function y(S,v,h){return v&&c(S.prototype,v),h&&c(S,h),Object.defineProperty(S,"prototype",{writable:!1}),S}var E=function(){function S(){p(this,S),this.events={}}return y(S,[{key:"on",value:function(h,l){return this.events[h]=this.events[h]||[],this.events[h].push(l),this}},{key:"off",value:function(h,l){return h?this.events[h]&&(l?this.events[h]=this.events[h].filter(function(d){return d!==l}):delete this.events[h]):this.events={},this}},{key:"emit",value:function(h){for(var l=arguments.length,d=new Array(l>1?l-1:0),b=1;b<l;b++)d[b-1]=arguments[b];this.events[h]&&this.events[h].forEach(function(O){return O.apply(void 0,d)})}}]),S}();g.default=E},function(m,g,C){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.stringify=void 0;var p=C(0),c=function(E){var S=[];return Object.keys(E).forEach(function(v){var h=E[v];h!==void 0&&(0,p.castArray)(h).forEach(function(l){S.push("".concat(encodeURIComponent(v),"=").concat(encodeURIComponent(l)))})}),S.join("&")};g.stringify=c},function(m,g,C){"use strict";function p(V){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},p(V)}Object.defineProperty(g,"__esModule",{value:!0}),g.ResponseError=void 0;function c(V,M){for(var P=0;P<M.length;P++){var x=M[P];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(V,x.key,x)}}function y(V,M,P){return M&&c(V.prototype,M),P&&c(V,P),Object.defineProperty(V,"prototype",{writable:!1}),V}function E(V,M){if(!(V instanceof M))throw new TypeError("Cannot call a class as a function")}function S(V,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(M&&M.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),M&&N(V,M)}function v(V){var M=O();return function(){var x=L(V),A;if(M){var k=L(this).constructor;A=Reflect.construct(x,arguments,k)}else A=x.apply(this,arguments);return h(this,A)}}function h(V,M){if(M&&(p(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(V)}function l(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function d(V){var M=typeof Map=="function"?new Map:void 0;return d=function(x){if(x===null||!D(x))return x;if(typeof x!="function")throw new TypeError("Super expression must either be null or a function");if(typeof M<"u"){if(M.has(x))return M.get(x);M.set(x,A)}function A(){return b(x,arguments,L(this).constructor)}return A.prototype=Object.create(x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),N(A,x)},d(V)}function b(V,M,P){return O()?b=Reflect.construct.bind():b=function(A,k,F){var j=[null];j.push.apply(j,k);var U=Function.bind.apply(A,j),z=new U;return F&&N(z,F.prototype),z},b.apply(null,arguments)}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(V){return Function.toString.call(V).indexOf("[native code]")!==-1}function N(V,M){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,A){return x.__proto__=A,x},N(V,M)}function L(V){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)},L(V)}var B=function(V){S(P,V);var M=v(P);function P(x){var A;E(this,P),A=M.call(this);var k=G(x);return A.message=k.message||k,A.code=k.code,A.status=x.status,A.headers=x.headers,A.body=x.body,A}return y(P)}(d(Error));g.ResponseError=B;function G(V){return V.status===502?"No connection with server":V.body||"Status Code ".concat(V.status," (").concat(V.statusText,")")}},function(m,g){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')}])})},"./node_modules/backo2/index.js":f=>{f.exports=w;function w(m){m=m||{},this.ms=m.min||100,this.max=m.max||1e4,this.factor=m.factor||2,this.jitter=m.jitter>0&&m.jitter<=1?m.jitter:0,this.attempts=0}w.prototype.duration=function(){var m=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var g=Math.random(),C=Math.floor(g*this.jitter*m);m=Math.floor(g*10)&1?m+C:m-C}return Math.min(m,this.max)|0},w.prototype.reset=function(){this.attempts=0},w.prototype.setMin=function(m){this.ms=m},w.prototype.setMax=function(m){this.max=m},w.prototype.setJitter=function(m){this.jitter=m}},"./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":(f,w)=>{(function(){"use strict";for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),C=0;C<m.length;C++)g[m.charCodeAt(C)]=C;w.encode=function(p){var c=new Uint8Array(p),y,E=c.length,S="";for(y=0;y<E;y+=3)S+=m[c[y]>>2],S+=m[(c[y]&3)<<4|c[y+1]>>4],S+=m[(c[y+1]&15)<<2|c[y+2]>>6],S+=m[c[y+2]&63];return E%3===2?S=S.substring(0,S.length-1)+"=":E%3===1&&(S=S.substring(0,S.length-2)+"=="),S},w.decode=function(p){var c=p.length*.75,y=p.length,E,S=0,v,h,l,d;p[p.length-1]==="="&&(c--,p[p.length-2]==="="&&c--);var b=new ArrayBuffer(c),O=new Uint8Array(b);for(E=0;E<y;E+=4)v=g[p.charCodeAt(E)],h=g[p.charCodeAt(E+1)],l=g[p.charCodeAt(E+2)],d=g[p.charCodeAt(E+3)],O[S++]=v<<2|h>>4,O[S++]=(h&15)<<4|l>>2,O[S++]=(l&3)<<6|d&63;return b}})()},"./node_modules/blob/index.js":(f,w,m)=>{var g=m.g.BlobBuilder||m.g.WebKitBlobBuilder||m.g.MSBlobBuilder||m.g.MozBlobBuilder,C=function(){try{var v=new Blob(["hi"]);return v.size===2}catch{return!1}}(),p=C&&function(){try{var v=new Blob([new Uint8Array([1,2])]);return v.size===2}catch{return!1}}(),c=g&&g.prototype.append&&g.prototype.getBlob;function y(v){for(var h=0;h<v.length;h++){var l=v[h];if(l.buffer instanceof ArrayBuffer){var d=l.buffer;if(l.byteLength!==d.byteLength){var b=new Uint8Array(l.byteLength);b.set(new Uint8Array(d,l.byteOffset,l.byteLength)),d=b.buffer}v[h]=d}}}function E(v,h){h=h||{};var l=new g;y(v);for(var d=0;d<v.length;d++)l.append(v[d]);return h.type?l.getBlob(h.type):l.getBlob()}function S(v,h){return y(v),new Blob(v,h||{})}f.exports=function(){return C?p?m.g.Blob:S:c?E:void 0}()},"./node_modules/component-bind/index.js":f=>{var w=[].slice;f.exports=function(m,g){if(typeof g=="string"&&(g=m[g]),typeof g!="function")throw new Error("bind() requires a function");var C=w.call(arguments,2);return function(){return g.apply(m,C.concat(w.call(arguments)))}}},"./node_modules/component-emitter/index.js":f=>{f.exports=w;function w(g){if(g)return m(g)}function m(g){for(var C in w.prototype)g[C]=w.prototype[C];return g}w.prototype.on=w.prototype.addEventListener=function(g,C){return this._callbacks=this._callbacks||{},(this._callbacks["$"+g]=this._callbacks["$"+g]||[]).push(C),this},w.prototype.once=function(g,C){function p(){this.off(g,p),C.apply(this,arguments)}return p.fn=C,this.on(g,p),this},w.prototype.off=w.prototype.removeListener=w.prototype.removeAllListeners=w.prototype.removeEventListener=function(g,C){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var p=this._callbacks["$"+g];if(!p)return this;if(arguments.length==1)return delete this._callbacks["$"+g],this;for(var c,y=0;y<p.length;y++)if(c=p[y],c===C||c.fn===C){p.splice(y,1);break}return this},w.prototype.emit=function(g){this._callbacks=this._callbacks||{};var C=[].slice.call(arguments,1),p=this._callbacks["$"+g];if(p){p=p.slice(0);for(var c=0,y=p.length;c<y;++c)p[c].apply(this,C)}return this},w.prototype.listeners=function(g){return this._callbacks=this._callbacks||{},this._callbacks["$"+g]||[]},w.prototype.hasListeners=function(g){return!!this.listeners(g).length}},"./node_modules/component-inherit/index.js":f=>{f.exports=function(w,m){var g=function(){};g.prototype=m.prototype,w.prototype=new g,w.prototype.constructor=w}},"./node_modules/debug/src/browser.js":(f,w,m)=>{w=f.exports=m("./node_modules/debug/src/debug.js"),w.log=p,w.formatArgs=C,w.save=c,w.load=y,w.useColors=g,w.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:E(),w.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function g(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}w.formatters.j=function(S){try{return JSON.stringify(S)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}};function C(S){var v=this.useColors;if(S[0]=(v?"%c":"")+this.namespace+(v?" %c":" ")+S[0]+(v?"%c ":" ")+"+"+w.humanize(this.diff),!!v){var h="color: "+this.color;S.splice(1,0,h,"color: inherit");var l=0,d=0;S[0].replace(/%[a-zA-Z%]/g,function(b){b!=="%%"&&(l++,b==="%c"&&(d=l))}),S.splice(d,0,h)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(S){try{S==null?w.storage.removeItem("debug"):w.storage.debug=S}catch{}}function y(){var S;try{S=w.storage.debug}catch{}return!S&&typeof process<"u"&&"env"in process&&(S=process.env.DEBUG),S}w.enable(y());function E(){try{return window.localStorage}catch{}}},"./node_modules/debug/src/debug.js":(f,w,m)=>{w=f.exports=p.debug=p.default=p,w.coerce=S,w.disable=y,w.enable=c,w.enabled=E,w.humanize=m("./node_modules/ms/index.js"),w.names=[],w.skips=[],w.formatters={};var g;function C(v){var h=0,l;for(l in v)h=(h<<5)-h+v.charCodeAt(l),h|=0;return w.colors[Math.abs(h)%w.colors.length]}function p(v){function h(){if(h.enabled){var l=h,d=+new Date,b=d-(g||d);l.diff=b,l.prev=g,l.curr=d,g=d;for(var O=new Array(arguments.length),D=0;D<O.length;D++)O[D]=arguments[D];O[0]=w.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var N=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(B,G){if(B==="%%")return B;N++;var V=w.formatters[G];if(typeof V=="function"){var M=O[N];B=V.call(l,M),O.splice(N,1),N--}return B}),w.formatArgs.call(l,O);var L=h.log||w.log||console.log.bind(console);L.apply(l,O)}}return h.namespace=v,h.enabled=w.enabled(v),h.useColors=w.useColors(),h.color=C(v),typeof w.init=="function"&&w.init(h),h}function c(v){w.save(v),w.names=[],w.skips=[];for(var h=(typeof v=="string"?v:"").split(/[\s,]+/),l=h.length,d=0;d<l;d++)h[d]&&(v=h[d].replace(/\*/g,".*?"),v[0]==="-"?w.skips.push(new RegExp("^"+v.substr(1)+"$")):w.names.push(new RegExp("^"+v+"$")))}function y(){w.enable("")}function E(v){var h,l;for(h=0,l=w.skips.length;h<l;h++)if(w.skips[h].test(v))return!1;for(h=0,l=w.names.length;h<l;h++)if(w.names[h].test(v))return!0;return!1}function S(v){return v instanceof Error?v.stack||v.message:v}},"./node_modules/engine.io-client/lib/index.js":(f,w,m)=>{f.exports=m("./node_modules/engine.io-client/lib/socket.js"),f.exports.parser=m("./node_modules/engine.io-parser/lib/browser.js")},"./node_modules/engine.io-client/lib/socket.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/transports/index.js"),C=m("./node_modules/component-emitter/index.js"),p=m("./node_modules/debug/src/browser.js")("engine.io-client:socket"),c=m("./node_modules/indexof/index.js"),y=m("./node_modules/engine.io-parser/lib/browser.js"),E=m("./node_modules/parseuri/index.js"),S=m("./node_modules/parseqs/index.js");f.exports=v;function v(l,d){if(!(this instanceof v))return new v(l,d);d=d||{},l&&typeof l=="object"&&(d=l,l=null),l?(l=E(l),d.hostname=l.host,d.secure=l.protocol==="https"||l.protocol==="wss",d.port=l.port,l.query&&(d.query=l.query)):d.host&&(d.hostname=E(d.host).host),this.secure=d.secure!=null?d.secure:m.g.location&&location.protocol==="https:",d.hostname&&!d.port&&(d.port=this.secure?"443":"80"),this.agent=d.agent||!1,this.hostname=d.hostname||(m.g.location?location.hostname:"localhost"),this.port=d.port||(m.g.location&&location.port?location.port:this.secure?443:80),this.query=d.query||{},typeof this.query=="string"&&(this.query=S.decode(this.query)),this.upgrade=d.upgrade!==!1,this.path=(d.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!d.forceJSONP,this.jsonp=d.jsonp!==!1,this.forceBase64=!!d.forceBase64,this.enablesXDR=!!d.enablesXDR,this.timestampParam=d.timestampParam||"t",this.timestampRequests=d.timestampRequests,this.transports=d.transports||["polling","websocket"],this.transportOptions=d.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=d.policyPort||843,this.rememberUpgrade=d.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=d.onlyBinaryUpgrades,this.perMessageDeflate=d.perMessageDeflate!==!1?d.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=d.pfx||null,this.key=d.key||null,this.passphrase=d.passphrase||null,this.cert=d.cert||null,this.ca=d.ca||null,this.ciphers=d.ciphers||null,this.rejectUnauthorized=d.rejectUnauthorized===void 0?!0:d.rejectUnauthorized,this.forceNode=!!d.forceNode;var b=typeof m.g=="object"&&m.g;b.global===b&&(d.extraHeaders&&Object.keys(d.extraHeaders).length>0&&(this.extraHeaders=d.extraHeaders),d.localAddress&&(this.localAddress=d.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}v.priorWebsocketSuccess=!1,C(v.prototype),v.protocol=y.protocol,v.Socket=v,v.Transport=m("./node_modules/engine.io-client/lib/transport.js"),v.transports=m("./node_modules/engine.io-client/lib/transports/index.js"),v.parser=m("./node_modules/engine.io-parser/lib/browser.js"),v.prototype.createTransport=function(l){p('creating transport "%s"',l);var d=h(this.query);d.EIO=y.protocol,d.transport=l;var b=this.transportOptions[l]||{};this.id&&(d.sid=this.id);var O=new g[l]({query:d,socket:this,agent:b.agent||this.agent,hostname:b.hostname||this.hostname,port:b.port||this.port,secure:b.secure||this.secure,path:b.path||this.path,forceJSONP:b.forceJSONP||this.forceJSONP,jsonp:b.jsonp||this.jsonp,forceBase64:b.forceBase64||this.forceBase64,enablesXDR:b.enablesXDR||this.enablesXDR,timestampRequests:b.timestampRequests||this.timestampRequests,timestampParam:b.timestampParam||this.timestampParam,policyPort:b.policyPort||this.policyPort,pfx:b.pfx||this.pfx,key:b.key||this.key,passphrase:b.passphrase||this.passphrase,cert:b.cert||this.cert,ca:b.ca||this.ca,ciphers:b.ciphers||this.ciphers,rejectUnauthorized:b.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:b.perMessageDeflate||this.perMessageDeflate,extraHeaders:b.extraHeaders||this.extraHeaders,forceNode:b.forceNode||this.forceNode,localAddress:b.localAddress||this.localAddress,requestTimeout:b.requestTimeout||this.requestTimeout,protocols:b.protocols||void 0});return O};function h(l){var d={};for(var b in l)l.hasOwnProperty(b)&&(d[b]=l[b]);return d}v.prototype.open=function(){var l;if(this.rememberUpgrade&&v.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)l="websocket";else if(this.transports.length===0){var d=this;setTimeout(function(){d.emit("error","No transports available")},0);return}else l=this.transports[0];this.readyState="opening";try{l=this.createTransport(l)}catch{this.transports.shift(),this.open();return}l.open(),this.setTransport(l)},v.prototype.setTransport=function(l){p("setting transport %s",l.name);var d=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=l,l.on("drain",function(){d.onDrain()}).on("packet",function(b){d.onPacket(b)}).on("error",function(b){d.onError(b)}).on("close",function(){d.onClose("transport close")})},v.prototype.probe=function(l){p('probing transport "%s"',l);var d=this.createTransport(l,{probe:1}),b=!1,O=this;v.priorWebsocketSuccess=!1;function D(){if(O.onlyBinaryUpgrades){var P=!this.supportsBinary&&O.transport.supportsBinary;b=b||P}b||(p('probe transport "%s" opened',l),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(x){if(!b)if(x.type==="pong"&&x.data==="probe"){if(p('probe transport "%s" pong',l),O.upgrading=!0,O.emit("upgrading",d),!d)return;v.priorWebsocketSuccess=d.name==="websocket",p('pausing current transport "%s"',O.transport.name),O.transport.pause(function(){b||O.readyState!=="closed"&&(p("changing transport and sending upgrade packet"),M(),O.setTransport(d),d.send([{type:"upgrade"}]),O.emit("upgrade",d),d=null,O.upgrading=!1,O.flush())})}else{p('probe transport "%s" failed',l);var A=new Error("probe error");A.transport=d.name,O.emit("upgradeError",A)}}))}function N(){b||(b=!0,M(),d.close(),d=null)}function L(P){var x=new Error("probe error: "+P);x.transport=d.name,N(),p('probe transport "%s" failed because of error: %s',l,P),O.emit("upgradeError",x)}function B(){L("transport closed")}function G(){L("socket closed")}function V(P){d&&P.name!==d.name&&(p('"%s" works - aborting "%s"',P.name,d.name),N())}function M(){d.removeListener("open",D),d.removeListener("error",L),d.removeListener("close",B),O.removeListener("close",G),O.removeListener("upgrading",V)}d.once("open",D),d.once("error",L),d.once("close",B),this.once("close",G),this.once("upgrading",V),d.open()},v.prototype.onOpen=function(){if(p("socket open"),this.readyState="open",v.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var l=0,d=this.upgrades.length;l<d;l++)this.probe(this.upgrades[l])}},v.prototype.onPacket=function(l){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(p('socket receive: type "%s", data "%s"',l.type,l.data),this.emit("packet",l),this.emit("heartbeat"),l.type){case"open":this.onHandshake(JSON.parse(l.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var d=new Error("server error");d.code=l.data,this.onError(d);break;case"message":this.emit("data",l.data),this.emit("message",l.data);break}else p('packet received with socket readyState "%s"',this.readyState)},v.prototype.onHandshake=function(l){this.emit("handshake",l),this.id=l.sid,this.transport.query.sid=l.sid,this.upgrades=this.filterUpgrades(l.upgrades),this.pingInterval=l.pingInterval,this.pingTimeout=l.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},v.prototype.onHeartbeat=function(l){clearTimeout(this.pingTimeoutTimer);var d=this;d.pingTimeoutTimer=setTimeout(function(){d.readyState!=="closed"&&d.onClose("ping timeout")},l||d.pingInterval+d.pingTimeout)},v.prototype.setPing=function(){var l=this;clearTimeout(l.pingIntervalTimer),l.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",l.pingTimeout),l.ping(),l.onHeartbeat(l.pingTimeout)},l.pingInterval)},v.prototype.ping=function(){var l=this;this.sendPacket("ping",function(){l.emit("ping")})},v.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},v.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},v.prototype.write=v.prototype.send=function(l,d,b){return this.sendPacket("message",l,d,b),this},v.prototype.sendPacket=function(l,d,b,O){if(typeof d=="function"&&(O=d,d=void 0),typeof b=="function"&&(O=b,b=null),!(this.readyState==="closing"||this.readyState==="closed")){b=b||{},b.compress=b.compress!==!1;var D={type:l,data:d,options:b};this.emit("packetCreate",D),this.writeBuffer.push(D),O&&this.once("flush",O),this.flush()}},v.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var l=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?O():d()}):this.upgrading?O():d()}function d(){l.onClose("forced close"),p("socket closing - telling transport to close"),l.transport.close()}function b(){l.removeListener("upgrade",b),l.removeListener("upgradeError",b),d()}function O(){l.once("upgrade",b),l.once("upgradeError",b)}return this},v.prototype.onError=function(l){p("socket error %j",l),v.priorWebsocketSuccess=!1,this.emit("error",l),this.onClose("transport error",l)},v.prototype.onClose=function(l,d){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){p('socket close with reason: "%s"',l);var b=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",l,d),b.writeBuffer=[],b.prevBufferLen=0}},v.prototype.filterUpgrades=function(l){for(var d=[],b=0,O=l.length;b<O;b++)~c(this.transports,l[b])&&d.push(l[b]);return d}},"./node_modules/engine.io-client/lib/transport.js":(f,w,m)=>{var g=m("./node_modules/engine.io-parser/lib/browser.js"),C=m("./node_modules/component-emitter/index.js");f.exports=p;function p(c){this.path=c.path,this.hostname=c.hostname,this.port=c.port,this.secure=c.secure,this.query=c.query,this.timestampParam=c.timestampParam,this.timestampRequests=c.timestampRequests,this.readyState="",this.agent=c.agent||!1,this.socket=c.socket,this.enablesXDR=c.enablesXDR,this.pfx=c.pfx,this.key=c.key,this.passphrase=c.passphrase,this.cert=c.cert,this.ca=c.ca,this.ciphers=c.ciphers,this.rejectUnauthorized=c.rejectUnauthorized,this.forceNode=c.forceNode,this.extraHeaders=c.extraHeaders,this.localAddress=c.localAddress}C(p.prototype),p.prototype.onError=function(c,y){var E=new Error(c);return E.type="TransportError",E.description=y,this.emit("error",E),this},p.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},p.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},p.prototype.send=function(c){if(this.readyState==="open")this.write(c);else throw new Error("Transport not open")},p.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},p.prototype.onData=function(c){var y=g.decodePacket(c,this.socket.binaryType);this.onPacket(y)},p.prototype.onPacket=function(c){this.emit("packet",c)},p.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},"./node_modules/engine.io-client/lib/transports/index.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/xmlhttprequest.js"),C=m("./node_modules/engine.io-client/lib/transports/polling-xhr.js"),p=m("./node_modules/engine.io-client/lib/transports/polling-jsonp.js"),c=m("./node_modules/engine.io-client/lib/transports/websocket.js");w.polling=y,w.websocket=c;function y(E){var S,v=!1,h=!1,l=E.jsonp!==!1;if(m.g.location){var d=location.protocol==="https:",b=location.port;b||(b=d?443:80),v=E.hostname!==location.hostname||b!==E.port,h=E.secure!==d}if(E.xdomain=v,E.xscheme=h,S=new g(E),"open"in S&&!E.forceJSONP)return new C(E);if(!l)throw new Error("JSONP disabled");return new p(E)}},"./node_modules/engine.io-client/lib/transports/polling-jsonp.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/transports/polling.js"),C=m("./node_modules/component-inherit/index.js");f.exports=S;var p=/\n/g,c=/\\n/g,y;function E(){}function S(v){g.call(this,v),this.query=this.query||{},y||(m.g.___eio||(m.g.___eio=[]),y=m.g.___eio),this.index=y.length;var h=this;y.push(function(l){h.onData(l)}),this.query.j=this.index,m.g.document&&m.g.addEventListener&&m.g.addEventListener("beforeunload",function(){h.script&&(h.script.onerror=E)},!1)}C(S,g),S.prototype.supportsBinary=!1,S.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),g.prototype.doClose.call(this)},S.prototype.doPoll=function(){var v=this,h=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),h.async=!0,h.src=this.uri(),h.onerror=function(b){v.onError("jsonp poll error",b)};var l=document.getElementsByTagName("script")[0];l?l.parentNode.insertBefore(h,l):(document.head||document.body).appendChild(h),this.script=h;var d=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var b=document.createElement("iframe");document.body.appendChild(b),document.body.removeChild(b)},100)},S.prototype.doWrite=function(v,h){var l=this;if(!this.form){var d=document.createElement("form"),b=document.createElement("textarea"),O=this.iframeId="eio_iframe_"+this.index,D;d.className="socketio",d.style.position="absolute",d.style.top="-1000px",d.style.left="-1000px",d.target=O,d.method="POST",d.setAttribute("accept-charset","utf-8"),b.name="d",d.appendChild(b),document.body.appendChild(d),this.form=d,this.area=b}this.form.action=this.uri();function N(){L(),h()}function L(){if(l.iframe)try{l.form.removeChild(l.iframe)}catch(G){l.onError("jsonp polling iframe removal error",G)}try{var B='<iframe src="javascript:0" name="'+l.iframeId+'">';D=document.createElement(B)}catch{D=document.createElement("iframe"),D.name=l.iframeId,D.src="javascript:0"}D.id=l.iframeId,l.form.appendChild(D),l.iframe=D}L(),v=v.replace(c,`\\
`),this.area.value=v.replace(p,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){l.iframe.readyState==="complete"&&N()}:this.iframe.onload=N}},"./node_modules/engine.io-client/lib/transports/polling-xhr.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/xmlhttprequest.js"),C=m("./node_modules/engine.io-client/lib/transports/polling.js"),p=m("./node_modules/component-emitter/index.js"),c=m("./node_modules/component-inherit/index.js"),y=m("./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr");f.exports=S,f.exports.Request=v;function E(){}function S(l){if(C.call(this,l),this.requestTimeout=l.requestTimeout,this.extraHeaders=l.extraHeaders,m.g.location){var d=location.protocol==="https:",b=location.port;b||(b=d?443:80),this.xd=l.hostname!==m.g.location.hostname||b!==l.port,this.xs=l.secure!==d}}c(S,C),S.prototype.supportsBinary=!0,S.prototype.request=function(l){return l=l||{},l.uri=this.uri(),l.xd=this.xd,l.xs=this.xs,l.agent=this.agent||!1,l.supportsBinary=this.supportsBinary,l.enablesXDR=this.enablesXDR,l.pfx=this.pfx,l.key=this.key,l.passphrase=this.passphrase,l.cert=this.cert,l.ca=this.ca,l.ciphers=this.ciphers,l.rejectUnauthorized=this.rejectUnauthorized,l.requestTimeout=this.requestTimeout,l.extraHeaders=this.extraHeaders,new v(l)},S.prototype.doWrite=function(l,d){var b=typeof l!="string"&&l!==void 0,O=this.request({method:"POST",data:l,isBinary:b}),D=this;O.on("success",d),O.on("error",function(N){D.onError("xhr post error",N)}),this.sendXhr=O},S.prototype.doPoll=function(){y("xhr poll");var l=this.request(),d=this;l.on("data",function(b){d.onData(b)}),l.on("error",function(b){d.onError("xhr poll error",b)}),this.pollXhr=l};function v(l){this.method=l.method||"GET",this.uri=l.uri,this.xd=!!l.xd,this.xs=!!l.xs,this.async=l.async!==!1,this.data=l.data!==void 0?l.data:null,this.agent=l.agent,this.isBinary=l.isBinary,this.supportsBinary=l.supportsBinary,this.enablesXDR=l.enablesXDR,this.requestTimeout=l.requestTimeout,this.pfx=l.pfx,this.key=l.key,this.passphrase=l.passphrase,this.cert=l.cert,this.ca=l.ca,this.ciphers=l.ciphers,this.rejectUnauthorized=l.rejectUnauthorized,this.extraHeaders=l.extraHeaders,this.create()}p(v.prototype),v.prototype.create=function(){var l={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};l.pfx=this.pfx,l.key=this.key,l.passphrase=this.passphrase,l.cert=this.cert,l.ca=this.ca,l.ciphers=this.ciphers,l.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new g(l),b=this;try{y("xhr open %s: %s",this.method,this.uri),d.open(this.method,this.uri,this.async);try{if(this.extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var O in this.extraHeaders)this.extraHeaders.hasOwnProperty(O)&&d.setRequestHeader(O,this.extraHeaders[O])}}catch{}if(this.method==="POST")try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{d.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in d&&(d.withCredentials=!0),this.requestTimeout&&(d.timeout=this.requestTimeout),this.hasXDR()?(d.onload=function(){b.onLoad()},d.onerror=function(){b.onError(d.responseText)}):d.onreadystatechange=function(){if(d.readyState===2){var D;try{D=d.getResponseHeader("Content-Type")}catch{}D==="application/octet-stream"&&(d.responseType="arraybuffer")}d.readyState===4&&(d.status===200||d.status===1223?b.onLoad():setTimeout(function(){b.onError(d.status)},0))},y("xhr data %s",this.data),d.send(this.data)}catch(D){setTimeout(function(){b.onError(D)},0);return}m.g.document&&(this.index=v.requestsCount++,v.requests[this.index]=this)},v.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},v.prototype.onData=function(l){this.emit("data",l),this.onSuccess()},v.prototype.onError=function(l){this.emit("error",l),this.cleanup(!0)},v.prototype.cleanup=function(l){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=E:this.xhr.onreadystatechange=E,l)try{this.xhr.abort()}catch{}m.g.document&&delete v.requests[this.index],this.xhr=null}},v.prototype.onLoad=function(){var l;try{var d;try{d=this.xhr.getResponseHeader("Content-Type")}catch{}d==="application/octet-stream"?l=this.xhr.response||this.xhr.responseText:l=this.xhr.responseText}catch(b){this.onError(b)}l!=null&&this.onData(l)},v.prototype.hasXDR=function(){return typeof m.g.XDomainRequest<"u"&&!this.xs&&this.enablesXDR},v.prototype.abort=function(){this.cleanup()},v.requestsCount=0,v.requests={},m.g.document&&(m.g.attachEvent?m.g.attachEvent("onunload",h):m.g.addEventListener&&m.g.addEventListener("beforeunload",h,!1));function h(){for(var l in v.requests)v.requests.hasOwnProperty(l)&&v.requests[l].abort()}},"./node_modules/engine.io-client/lib/transports/polling.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/transport.js"),C=m("./node_modules/parseqs/index.js"),p=m("./node_modules/engine.io-parser/lib/browser.js"),c=m("./node_modules/component-inherit/index.js"),y=m("./node_modules/yeast/index.js"),E=m("./node_modules/debug/src/browser.js")("engine.io-client:polling");f.exports=v;var S=function(){var h=m("./node_modules/engine.io-client/lib/xmlhttprequest.js"),l=new h({xdomain:!1});return l.responseType!=null}();function v(h){var l=h&&h.forceBase64;(!S||l)&&(this.supportsBinary=!1),g.call(this,h)}c(v,g),v.prototype.name="polling",v.prototype.doOpen=function(){this.poll()},v.prototype.pause=function(h){var l=this;this.readyState="pausing";function d(){E("paused"),l.readyState="paused",h()}if(this.polling||!this.writable){var b=0;this.polling&&(E("we are currently polling - waiting to pause"),b++,this.once("pollComplete",function(){E("pre-pause polling complete"),--b||d()})),this.writable||(E("we are currently writing - waiting to pause"),b++,this.once("drain",function(){E("pre-pause writing complete"),--b||d()}))}else d()},v.prototype.poll=function(){E("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},v.prototype.onData=function(h){var l=this;E("polling got data %s",h);var d=function(b,O,D){if(l.readyState==="opening"&&l.onOpen(),b.type==="close")return l.onClose(),!1;l.onPacket(b)};p.decodePayload(h,this.socket.binaryType,d),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():E('ignoring poll - transport state "%s"',this.readyState))},v.prototype.doClose=function(){var h=this;function l(){E("writing close packet"),h.write([{type:"close"}])}this.readyState==="open"?(E("transport open - closing"),l()):(E("transport not open - deferring close"),this.once("open",l))},v.prototype.write=function(h){var l=this;this.writable=!1;var d=function(){l.writable=!0,l.emit("drain")};p.encodePayload(h,this.supportsBinary,function(b){l.doWrite(b,d)})},v.prototype.uri=function(){var h=this.query||{},l=this.secure?"https":"http",d="";this.timestampRequests!==!1&&(h[this.timestampParam]=y()),!this.supportsBinary&&!h.sid&&(h.b64=1),h=C.encode(h),this.port&&(l==="https"&&Number(this.port)!==443||l==="http"&&Number(this.port)!==80)&&(d=":"+this.port),h.length&&(h="?"+h);var b=this.hostname.indexOf(":")!==-1;return l+"://"+(b?"["+this.hostname+"]":this.hostname)+d+this.path+h}},"./node_modules/engine.io-client/lib/transports/websocket.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/transport.js"),C=m("./node_modules/engine.io-parser/lib/browser.js"),p=m("./node_modules/parseqs/index.js"),c=m("./node_modules/component-inherit/index.js"),y=m("./node_modules/yeast/index.js"),E=m("./node_modules/debug/src/browser.js")("engine.io-client:websocket"),S=m.g.WebSocket||m.g.MozWebSocket,v;if(typeof window>"u")try{v=m("?1bcf")}catch{}var h=S;!h&&typeof window>"u"&&(h=v),f.exports=l;function l(d){var b=d&&d.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=d.perMessageDeflate,this.usingBrowserWebSocket=S&&!d.forceNode,this.protocols=d.protocols,this.usingBrowserWebSocket||(h=v),g.call(this,d)}c(l,g),l.prototype.name="websocket",l.prototype.supportsBinary=!0,l.prototype.doOpen=function(){if(this.check()){var d=this.uri(),b=this.protocols,O={agent:this.agent,perMessageDeflate:this.perMessageDeflate};O.pfx=this.pfx,O.key=this.key,O.passphrase=this.passphrase,O.cert=this.cert,O.ca=this.ca,O.ciphers=this.ciphers,O.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(O.headers=this.extraHeaders),this.localAddress&&(O.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?b?new h(d,b):new h(d):new h(d,b,O)}catch(D){return this.emit("error",D)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},l.prototype.addEventListeners=function(){var d=this;this.ws.onopen=function(){d.onOpen()},this.ws.onclose=function(){d.onClose()},this.ws.onmessage=function(b){d.onData(b.data)},this.ws.onerror=function(b){d.onError("websocket error",b)}},l.prototype.write=function(d){var b=this;this.writable=!1;for(var O=d.length,D=0,N=O;D<N;D++)(function(B){C.encodePacket(B,b.supportsBinary,function(G){if(!b.usingBrowserWebSocket){var V={};if(B.options&&(V.compress=B.options.compress),b.perMessageDeflate){var M=typeof G=="string"?m.g.Buffer.byteLength(G):G.length;M<b.perMessageDeflate.threshold&&(V.compress=!1)}}try{b.usingBrowserWebSocket?b.ws.send(G):b.ws.send(G,V)}catch{E("websocket closed before onclose event")}--O||L()})})(d[D]);function L(){b.emit("flush"),setTimeout(function(){b.writable=!0,b.emit("drain")},0)}},l.prototype.onClose=function(){g.prototype.onClose.call(this)},l.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},l.prototype.uri=function(){var d=this.query||{},b=this.secure?"wss":"ws",O="";this.port&&(b==="wss"&&Number(this.port)!==443||b==="ws"&&Number(this.port)!==80)&&(O=":"+this.port),this.timestampRequests&&(d[this.timestampParam]=y()),this.supportsBinary||(d.b64=1),d=p.encode(d),d.length&&(d="?"+d);var D=this.hostname.indexOf(":")!==-1;return b+"://"+(D?"["+this.hostname+"]":this.hostname)+O+this.path+d},l.prototype.check=function(){return!!h&&!("__initialize"in h&&this.name===l.prototype.name)}},"./node_modules/engine.io-client/lib/xmlhttprequest.js":(f,w,m)=>{var g=m("./node_modules/has-cors/index.js");f.exports=function(C){var p=C.xdomain,c=C.xscheme,y=C.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!p||g))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!c&&y)return new XDomainRequest}catch{}if(!p)try{return new m.g[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},"./node_modules/engine.io-parser/lib/browser.js":(f,w,m)=>{var g=m("./node_modules/engine.io-parser/lib/keys.js"),C=m("./node_modules/has-binary2/index.js"),p=m("./node_modules/arraybuffer.slice/index.js"),c=m("./node_modules/after/index.js"),y=m("./node_modules/engine.io-parser/lib/utf8.js"),E;m.g&&m.g.ArrayBuffer&&(E=m("./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"));var S=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),v=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),h=S||v;w.protocol=3;var l=w.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=g(l),b={type:"error",data:"parser error"},O=m("./node_modules/blob/index.js");w.encodePacket=function(M,P,x,A){typeof P=="function"&&(A=P,P=!1),typeof x=="function"&&(A=x,x=null);var k=M.data===void 0?void 0:M.data.buffer||M.data;if(m.g.ArrayBuffer&&k instanceof ArrayBuffer)return N(M,P,A);if(O&&k instanceof m.g.Blob)return B(M,P,A);if(k&&k.base64)return D(M,A);var F=l[M.type];return M.data!==void 0&&(F+=x?y.encode(String(M.data),{strict:!1}):String(M.data)),A(""+F)};function D(M,P){var x="b"+w.packets[M.type]+M.data.data;return P(x)}function N(M,P,x){if(!P)return w.encodeBase64Packet(M,x);var A=M.data,k=new Uint8Array(A),F=new Uint8Array(1+A.byteLength);F[0]=l[M.type];for(var j=0;j<k.length;j++)F[j+1]=k[j];return x(F.buffer)}function L(M,P,x){if(!P)return w.encodeBase64Packet(M,x);var A=new FileReader;return A.onload=function(){M.data=A.result,w.encodePacket(M,P,!0,x)},A.readAsArrayBuffer(M.data)}function B(M,P,x){if(!P)return w.encodeBase64Packet(M,x);if(h)return L(M,P,x);var A=new Uint8Array(1);A[0]=l[M.type];var k=new O([A.buffer,M.data]);return x(k)}w.encodeBase64Packet=function(M,P){var x="b"+w.packets[M.type];if(O&&M.data instanceof m.g.Blob){var A=new FileReader;return A.onload=function(){var z=A.result.split(",")[1];P(x+z)},A.readAsDataURL(M.data)}var k;try{k=String.fromCharCode.apply(null,new Uint8Array(M.data))}catch{for(var F=new Uint8Array(M.data),j=new Array(F.length),U=0;U<F.length;U++)j[U]=F[U];k=String.fromCharCode.apply(null,j)}return x+=m.g.btoa(k),P(x)},w.decodePacket=function(M,P,x){if(M===void 0)return b;if(typeof M=="string"){if(M.charAt(0)==="b")return w.decodeBase64Packet(M.substr(1),P);if(x&&(M=G(M),M===!1))return b;var k=M.charAt(0);return Number(k)!=k||!d[k]?b:M.length>1?{type:d[k],data:M.substring(1)}:{type:d[k]}}var A=new Uint8Array(M),k=A[0],F=p(M,1);return O&&P==="blob"&&(F=new O([F])),{type:d[k],data:F}};function G(M){try{M=y.decode(M,{strict:!1})}catch{return!1}return M}w.decodeBase64Packet=function(M,P){var x=d[M.charAt(0)];if(!E)return{type:x,data:{base64:!0,data:M.substr(1)}};var A=E.decode(M.substr(1));return P==="blob"&&O&&(A=new O([A])),{type:x,data:A}},w.encodePayload=function(M,P,x){typeof P=="function"&&(x=P,P=null);var A=C(M);if(P&&A)return O&&!h?w.encodePayloadAsBlob(M,x):w.encodePayloadAsArrayBuffer(M,x);if(!M.length)return x("0:");function k(j){return j.length+":"+j}function F(j,U){w.encodePacket(j,A?P:!1,!1,function(z){U(null,k(z))})}V(M,F,function(j,U){return x(U.join(""))})};function V(M,P,x){for(var A=new Array(M.length),k=c(M.length,x),F=function(U,z,H){P(z,function($,q){A[U]=q,H($,A)})},j=0;j<M.length;j++)F(j,M[j],k)}w.decodePayload=function(M,P,x){if(typeof M!="string")return w.decodePayloadAsBinary(M,P,x);typeof P=="function"&&(x=P,P=null);var A;if(M==="")return x(b,0,1);for(var k="",F,j,U=0,z=M.length;U<z;U++){var H=M.charAt(U);if(H!==":"){k+=H;continue}if(k===""||k!=(F=Number(k))||(j=M.substr(U+1,F),k!=j.length))return x(b,0,1);if(j.length){if(A=w.decodePacket(j,P,!1),b.type===A.type&&b.data===A.data)return x(b,0,1);var $=x(A,U+F,z);if($===!1)return}U+=F,k=""}if(k!=="")return x(b,0,1)},w.encodePayloadAsArrayBuffer=function(M,P){if(!M.length)return P(new ArrayBuffer(0));function x(A,k){w.encodePacket(A,!0,!0,function(F){return k(null,F)})}V(M,x,function(A,k){var F=k.reduce(function(z,H){var $;return typeof H=="string"?$=H.length:$=H.byteLength,z+$.toString().length+$+2},0),j=new Uint8Array(F),U=0;return k.forEach(function(z){var H=typeof z=="string",$=z;if(H){for(var W=new Uint8Array(z.length),q=0;q<z.length;q++)W[q]=z.charCodeAt(q);$=W.buffer}H?j[U++]=0:j[U++]=1;for(var K=$.byteLength.toString(),q=0;q<K.length;q++)j[U++]=parseInt(K[q]);j[U++]=255;for(var W=new Uint8Array($),q=0;q<W.length;q++)j[U++]=W[q]}),P(j.buffer)})},w.encodePayloadAsBlob=function(M,P){function x(A,k){w.encodePacket(A,!0,!0,function(F){var j=new Uint8Array(1);if(j[0]=1,typeof F=="string"){for(var U=new Uint8Array(F.length),z=0;z<F.length;z++)U[z]=F.charCodeAt(z);F=U.buffer,j[0]=0}for(var H=F instanceof ArrayBuffer?F.byteLength:F.size,$=H.toString(),q=new Uint8Array($.length+1),z=0;z<$.length;z++)q[z]=parseInt($[z]);if(q[$.length]=255,O){var K=new O([j.buffer,q.buffer,F]);k(null,K)}})}V(M,x,function(A,k){return P(new O(k))})},w.decodePayloadAsBinary=function(M,P,x){typeof P=="function"&&(x=P,P=null);for(var A=M,k=[];A.byteLength>0;){for(var F=new Uint8Array(A),j=F[0]===0,U="",z=1;F[z]!==255;z++){if(U.length>310)return x(b,0,1);U+=F[z]}A=p(A,2+U.length),U=parseInt(U);var H=p(A,0,U);if(j)try{H=String.fromCharCode.apply(null,new Uint8Array(H))}catch{var $=new Uint8Array(H);H="";for(var z=0;z<$.length;z++)H+=String.fromCharCode($[z])}k.push(H),A=p(A,U)}var q=k.length;k.forEach(function(K,W){x(w.decodePacket(K,P,!0),W,q)})}},"./node_modules/engine.io-parser/lib/keys.js":f=>{f.exports=Object.keys||function(m){var g=[],C=Object.prototype.hasOwnProperty;for(var p in m)C.call(m,p)&&g.push(p);return g}},"./node_modules/engine.io-parser/lib/utf8.js":function(f,w,m){f=m.nmd(f);var g;(function(C){var p=w,c=f&&f.exports==p&&f,y=typeof m.g=="object"&&m.g;(y.global===y||y.window===y)&&(C=y);var E=String.fromCharCode;function S(A){for(var k=[],F=0,j=A.length,U,z;F<j;)U=A.charCodeAt(F++),U>=55296&&U<=56319&&F<j?(z=A.charCodeAt(F++),(z&64512)==56320?k.push(((U&1023)<<10)+(z&1023)+65536):(k.push(U),F--)):k.push(U);return k}function v(A){for(var k=A.length,F=-1,j,U="";++F<k;)j=A[F],j>65535&&(j-=65536,U+=E(j>>>10&1023|55296),j=56320|j&1023),U+=E(j);return U}function h(A,k){if(A>=55296&&A<=57343){if(k)throw Error("Lone surrogate U+"+A.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(A,k){return E(A>>k&63|128)}function d(A,k){if(!(A&4294967168))return E(A);var F="";return A&4294965248?A&4294901760?A&4292870144||(F=E(A>>18&7|240),F+=l(A,12),F+=l(A,6)):(h(A,k)||(A=65533),F=E(A>>12&15|224),F+=l(A,6)):F=E(A>>6&31|192),F+=E(A&63|128),F}function b(A,k){k=k||{};for(var F=k.strict!==!1,j=S(A),U=j.length,z=-1,H,$="";++z<U;)H=j[z],$+=d(H,F);return $}function O(){if(B>=L)throw Error("Invalid byte index");var A=N[B]&255;if(B++,(A&192)==128)return A&63;throw Error("Invalid continuation byte")}function D(A){var k,F,j,U,z;if(B>L)throw Error("Invalid byte index");if(B==L)return!1;if(k=N[B]&255,B++,!(k&128))return k;if((k&224)==192){if(F=O(),z=(k&31)<<6|F,z>=128)return z;throw Error("Invalid continuation byte")}if((k&240)==224){if(F=O(),j=O(),z=(k&15)<<12|F<<6|j,z>=2048)return h(z,A)?z:65533;throw Error("Invalid continuation byte")}if((k&248)==240&&(F=O(),j=O(),U=O(),z=(k&7)<<18|F<<12|j<<6|U,z>=65536&&z<=1114111))return z;throw Error("Invalid UTF-8 detected")}var N,L,B;function G(A,k){k=k||{};var F=k.strict!==!1;N=S(A),L=N.length,B=0;for(var j=[],U;(U=D(F))!==!1;)j.push(U);return v(j)}var V={version:"2.1.2",encode:b,decode:G};if(1)g=function(){return V}.call(w,m,w,f),g!==void 0&&(f.exports=g);else var M,P,x})(this)},"./node_modules/has-binary2/index.js":(f,w,m)=>{var g=m("./node_modules/isarray/index.js"),C=Object.prototype.toString,p=typeof m.g.Blob=="function"||C.call(m.g.Blob)==="[object BlobConstructor]",c=typeof m.g.File=="function"||C.call(m.g.File)==="[object FileConstructor]";f.exports=y;function y(E){if(!E||typeof E!="object")return!1;if(g(E)){for(var S=0,v=E.length;S<v;S++)if(y(E[S]))return!0;return!1}if(typeof m.g.Buffer=="function"&&m.g.Buffer.isBuffer&&m.g.Buffer.isBuffer(E)||typeof m.g.ArrayBuffer=="function"&&E instanceof ArrayBuffer||p&&E instanceof Blob||c&&E instanceof File)return!0;if(E.toJSON&&typeof E.toJSON=="function"&&arguments.length===1)return y(E.toJSON(),!0);for(var h in E)if(Object.prototype.hasOwnProperty.call(E,h)&&y(E[h]))return!0;return!1}},"./node_modules/has-cors/index.js":f=>{try{f.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{f.exports=!1}},"./node_modules/indexof/index.js":f=>{var w=[].indexOf;f.exports=function(m,g){if(w)return m.indexOf(g);for(var C=0;C<m.length;++C)if(m[C]===g)return C;return-1}},"./node_modules/isarray/index.js":f=>{var w={}.toString;f.exports=Array.isArray||function(m){return w.call(m)=="[object Array]"}},"./node_modules/ms/index.js":f=>{var w=1e3,m=w*60,g=m*60,C=g*24,p=C*365.25;f.exports=function(v,h){h=h||{};var l=typeof v;if(l==="string"&&v.length>0)return c(v);if(l==="number"&&isNaN(v)===!1)return h.long?E(v):y(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function c(v){if(v=String(v),!(v.length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(h){var l=parseFloat(h[1]),d=(h[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return l*p;case"days":case"day":case"d":return l*C;case"hours":case"hour":case"hrs":case"hr":case"h":return l*g;case"minutes":case"minute":case"mins":case"min":case"m":return l*m;case"seconds":case"second":case"secs":case"sec":case"s":return l*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function y(v){return v>=C?Math.round(v/C)+"d":v>=g?Math.round(v/g)+"h":v>=m?Math.round(v/m)+"m":v>=w?Math.round(v/w)+"s":v+"ms"}function E(v){return S(v,C,"day")||S(v,g,"hour")||S(v,m,"minute")||S(v,w,"second")||v+" ms"}function S(v,h,l){if(!(v<h))return v<h*1.5?Math.floor(v/h)+" "+l:Math.ceil(v/h)+" "+l+"s"}},"./node_modules/parseqs/index.js":(f,w)=>{w.encode=function(m){var g="";for(var C in m)m.hasOwnProperty(C)&&(g.length&&(g+="&"),g+=encodeURIComponent(C)+"="+encodeURIComponent(m[C]));return g},w.decode=function(m){for(var g={},C=m.split("&"),p=0,c=C.length;p<c;p++){var y=C[p].split("=");g[decodeURIComponent(y[0])]=decodeURIComponent(y[1])}return g}},"./node_modules/parseuri/index.js":f=>{var w=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];f.exports=function(C){var p=C,c=C.indexOf("["),y=C.indexOf("]");c!=-1&&y!=-1&&(C=C.substring(0,c)+C.substring(c,y).replace(/:/g,";")+C.substring(y,C.length));for(var E=w.exec(C||""),S={},v=14;v--;)S[m[v]]=E[v]||"";return c!=-1&&y!=-1&&(S.source=p,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S}},"./node_modules/socket.io-client/lib/index.js":(f,w,m)=>{var g=m("./node_modules/socket.io-client/lib/url.js"),C=m("./src/socket-parser.js"),p=m("./node_modules/socket.io-client/lib/manager.js"),c=m("./node_modules/debug/src/browser.js")("socket.io-client");f.exports=w=E;var y=w.managers={};function E(S,v){typeof S=="object"&&(v=S,S=void 0),v=v||{};var h=g(S),l=h.source,d=h.id,b=h.path,O=y[d]&&b in y[d].nsps,D=v.forceNew||v["force new connection"]||v.multiplex===!1||O,N;return D?(c("ignoring socket cache for %s",l),N=p(l,v)):(y[d]||(c("new io instance for %s",l),y[d]=p(l,v)),N=y[d]),h.query&&!v.query&&(v.query=h.query),N.socket(h.path,v)}w.protocol=C.protocol,w.connect=E,w.Manager=m("./node_modules/socket.io-client/lib/manager.js"),w.Socket=m("./node_modules/socket.io-client/lib/socket.js")},"./node_modules/socket.io-client/lib/manager.js":(f,w,m)=>{var g=m("./node_modules/engine.io-client/lib/index.js"),C=m("./node_modules/socket.io-client/lib/socket.js"),p=m("./node_modules/component-emitter/index.js"),c=m("./src/socket-parser.js"),y=m("./node_modules/socket.io-client/lib/on.js"),E=m("./node_modules/component-bind/index.js"),S=m("./node_modules/debug/src/browser.js")("socket.io-client:manager"),v=m("./node_modules/indexof/index.js"),h=m("./node_modules/backo2/index.js"),l=Object.prototype.hasOwnProperty;f.exports=d;function d(b,O){if(!(this instanceof d))return new d(b,O);b&&typeof b=="object"&&(O=b,b=void 0),O=O||{},O.path=O.path||"/socket.io",this.nsps={},this.subs=[],this.opts=O,this.reconnection(O.reconnection!==!1),this.reconnectionAttempts(O.reconnectionAttempts||1/0),this.reconnectionDelay(O.reconnectionDelay||1e3),this.reconnectionDelayMax(O.reconnectionDelayMax||5e3),this.randomizationFactor(O.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(O.timeout==null?2e4:O.timeout),this.readyState="closed",this.uri=b,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var D=O.parser||c;this.encoder=new D.Encoder,this.decoder=new D.Decoder,this.autoConnect=O.autoConnect!==!1,this.autoConnect&&this.open()}d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var b in this.nsps)l.call(this.nsps,b)&&this.nsps[b].emit.apply(this.nsps[b],arguments)},d.prototype.updateSocketIds=function(){for(var b in this.nsps)l.call(this.nsps,b)&&(this.nsps[b].id=this.generateId(b))},d.prototype.generateId=function(b){return(b==="/"?"":b+"#")+this.engine.id},p(d.prototype),d.prototype.reconnection=function(b){return arguments.length?(this._reconnection=!!b,this):this._reconnection},d.prototype.reconnectionAttempts=function(b){return arguments.length?(this._reconnectionAttempts=b,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(b){return arguments.length?(this._reconnectionDelay=b,this.backoff&&this.backoff.setMin(b),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(b){return arguments.length?(this._randomizationFactor=b,this.backoff&&this.backoff.setJitter(b),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(b){return arguments.length?(this._reconnectionDelayMax=b,this.backoff&&this.backoff.setMax(b),this):this._reconnectionDelayMax},d.prototype.timeout=function(b){return arguments.length?(this._timeout=b,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},d.prototype.open=d.prototype.connect=function(b,O){if(S("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;S("opening %s",this.uri),this.engine=g(this.uri,this.opts);var D=this.engine,N=this;this.readyState="opening",this.skipReconnect=!1;var L=y(D,"open",function(){N.onopen(),b&&b()}),B=y(D,"error",function(M){if(S("connect_error"),N.cleanup(),N.readyState="closed",N.emitAll("connect_error",M),b){var P=new Error("Connection error");P.data=M,b(P)}else N.maybeReconnectOnOpen()});if(this._timeout!==!1){var G=this._timeout;S("connect attempt will timeout after %d",G);var V=setTimeout(function(){S("connect attempt timed out after %d",G),L.destroy(),D.close(),D.emit("error","timeout"),N.emitAll("connect_timeout",G)},G);this.subs.push({destroy:function(){clearTimeout(V)}})}return this.subs.push(L),this.subs.push(B),this},d.prototype.onopen=function(){S("open"),this.cleanup(),this.readyState="open",this.emit("open");var b=this.engine;this.subs.push(y(b,"data",E(this,"ondata"))),this.subs.push(y(b,"ping",E(this,"onping"))),this.subs.push(y(b,"pong",E(this,"onpong"))),this.subs.push(y(b,"error",E(this,"onerror"))),this.subs.push(y(b,"close",E(this,"onclose"))),this.subs.push(y(this.decoder,"decoded",E(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(b){this.decoder.add(b)},d.prototype.ondecoded=function(b){this.emit("packet",b)},d.prototype.onerror=function(b){S("error",b),this.emitAll("error",b)},d.prototype.socket=function(b,O){var D=this.nsps[b];if(!D){D=new C(this,b,O),this.nsps[b]=D;var N=this;D.on("connecting",L),D.on("connect",function(){D.id=N.generateId(b)}),this.autoConnect&&L()}function L(){~v(N.connecting,D)||N.connecting.push(D)}return D},d.prototype.destroy=function(b){var O=v(this.connecting,b);~O&&this.connecting.splice(O,1),!this.connecting.length&&this.close()},d.prototype.packet=function(b){S("writing packet %j",b);var O=this;b.query&&b.type===0&&(b.nsp+="?"+b.query),O.encoding?O.packetBuffer.push(b):(O.encoding=!0,this.encoder.encode(b,function(D){for(var N=0;N<D.length;N++)O.engine.write(D[N],b.options);O.encoding=!1,O.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var b=this.packetBuffer.shift();this.packet(b)}},d.prototype.cleanup=function(){S("cleanup");for(var b=this.subs.length,O=0;O<b;O++){var D=this.subs.shift();D.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){S("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(b){S("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",b),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var b=this;if(this.backoff.attempts>=this._reconnectionAttempts)S("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var O=this.backoff.duration();S("will wait %dms before reconnect attempt",O),this.reconnecting=!0;var D=setTimeout(function(){b.skipReconnect||(S("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),!b.skipReconnect&&b.open(function(N){N?(S("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",N.data)):(S("reconnect success"),b.onreconnect())}))},O);this.subs.push({destroy:function(){clearTimeout(D)}})}},d.prototype.onreconnect=function(){var b=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",b)}},"./node_modules/socket.io-client/lib/on.js":f=>{f.exports=w;function w(m,g,C){return m.on(g,C),{destroy:function(){m.removeListener(g,C)}}}},"./node_modules/socket.io-client/lib/socket.js":(f,w,m)=>{var g=m("./src/socket-parser.js"),C=m("./node_modules/component-emitter/index.js"),p=m("./node_modules/to-array/index.js"),c=m("./node_modules/socket.io-client/lib/on.js"),y=m("./node_modules/component-bind/index.js"),E=m("./node_modules/debug/src/browser.js")("socket.io-client:socket"),S=m("./node_modules/parseqs/index.js");f.exports=w=l;var v={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=C.prototype.emit;function l(d,b,O){this.io=d,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,O&&O.query&&(this.query=O.query),this.io.autoConnect&&this.open()}C(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var d=this.io;this.subs=[c(d,"open",y(this,"onopen")),c(d,"packet",y(this,"onpacket")),c(d,"close",y(this,"onclose"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},l.prototype.send=function(){var d=p(arguments);return d.unshift("message"),this.emit.apply(this,d),this},l.prototype.emit=function(d){if(v.hasOwnProperty(d))return h.apply(this,arguments),this;var b=p(arguments),O={type:g.EVENT,data:b};return O.options={},O.options.compress=!this.flags||this.flags.compress!==!1,typeof b[b.length-1]=="function"&&(E("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),O.id=this.ids++),this.connected?this.packet(O):this.sendBuffer.push(O),delete this.flags,this},l.prototype.packet=function(d){d.nsp=this.nsp,this.io.packet(d)},l.prototype.onopen=function(){if(E("transport is open - connecting"),this.nsp!=="/")if(this.query){var d=typeof this.query=="object"?S.encode(this.query):this.query;E("sending connect packet with query %s",d),this.packet({type:g.CONNECT,query:d})}else this.packet({type:g.CONNECT})},l.prototype.onclose=function(d){E("close (%s)",d),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",d)},l.prototype.onpacket=function(d){if(d.nsp===this.nsp)switch(d.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(d);break;case g.BINARY_EVENT:this.onevent(d);break;case g.ACK:this.onack(d);break;case g.BINARY_ACK:this.onack(d);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",d.data);break}},l.prototype.onevent=function(d){var b=d.data||[];E("emitting event %j",b),d.id!=null&&(E("attaching ack callback to event"),b.push(this.ack(d.id))),this.connected?h.apply(this,b):this.receiveBuffer.push(b)},l.prototype.ack=function(d){var b=this,O=!1;return function(){if(!O){O=!0;var D=p(arguments);E("sending ack %j",D),b.packet({type:g.ACK,id:d,data:D})}}},l.prototype.onack=function(d){var b=this.acks[d.id];typeof b=="function"?(E("calling ack %s with %j",d.id,d.data),b.apply(this,d.data),delete this.acks[d.id]):E("bad ack %s",d.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){var d;for(d=0;d<this.receiveBuffer.length;d++)h.apply(this,this.receiveBuffer[d]);for(this.receiveBuffer=[],d=0;d<this.sendBuffer.length;d++)this.packet(this.sendBuffer[d]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){E("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var d=0;d<this.subs.length;d++)this.subs[d].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(E("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(d){return this.flags=this.flags||{},this.flags.compress=d,this}},"./node_modules/socket.io-client/lib/url.js":(f,w,m)=>{var g=m("./node_modules/parseuri/index.js"),C=m("./node_modules/debug/src/browser.js")("socket.io-client:url");f.exports=p;function p(c,y){var E=c;y=y||m.g.location,c==null&&(c=y.protocol+"//"+y.host),typeof c=="string"&&(c.charAt(0)==="/"&&(c.charAt(1)==="/"?c=y.protocol+c:c=y.host+c),/^(https?|wss?):\/\//.test(c)||(C("protocol-less url %s",c),typeof y<"u"?c=y.protocol+"//"+c:c="https://"+c),C("parse %s",c),E=g(c)),E.port||(/^(http|ws)$/.test(E.protocol)?E.port="80":/^(http|ws)s$/.test(E.protocol)&&(E.port="443")),E.path=E.path||"/";var S=E.host.indexOf(":")!==-1,v=S?"["+E.host+"]":E.host;return E.id=E.protocol+"://"+v+":"+E.port,E.href=E.protocol+"://"+v+(y&&y.port===E.port?"":":"+E.port),E}},"./node_modules/to-array/index.js":f=>{f.exports=w;function w(m,g){var C=[];g=g||0;for(var p=g||0;p<m.length;p++)C[p-g]=m[p];return C}},"./node_modules/yeast/index.js":f=>{"use strict";var w="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),m=64,g={},C=0,p=0,c;function y(v){var h="";do h=w[v%m]+h,v=Math.floor(v/m);while(v>0);return h}function E(v){var h=0;for(p=0;p<v.length;p++)h=h*m+g[v.charAt(p)];return h}function S(){var v=y(+new Date);return v!==c?(C=0,c=v):v+"."+y(C++)}for(;p<m;p++)g[w[p]]=p;S.encode=y,S.decode=E,f.exports=S},"?1bcf":()=>{}},I={};function T(f){var w=I[f];if(w!==void 0)return w.exports;var m=I[f]={id:f,loaded:!1,exports:{}};return _[f].call(m.exports,m,m.exports,T),m.loaded=!0,m.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=f=>(f.paths=[],f.children||(f.children=[]),f);var R=T("./src/index.js");return R})())},"./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js":i=>{function s(o,a,u,_,I){var T={};return Object.keys(_).forEach(function(R){T[R]=_[R]}),T.enumerable=!!T.enumerable,T.configurable=!!T.configurable,("value"in T||T.initializer)&&(T.writable=!0),T=u.slice().reverse().reduce(function(R,f){return f(o,a,R)||R},T),I&&T.initializer!==void 0&&(T.value=T.initializer?T.initializer.call(I):void 0,T.initializer=void 0),T.initializer===void 0&&(Object.defineProperty(o,a,T),T=null),T}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":i=>{function s(o,a){(a==null||a>o.length)&&(a=o.length);for(var u=0,_=new Array(a);u<a;u++)_[u]=o[u];return _}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":i=>{function s(o){if(Array.isArray(o))return o}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(_){if(Array.isArray(_))return a(_)}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":i=>{function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":i=>{function s(a,u,_,I,T,R,f){try{var w=a[R](f),m=w.value}catch(g){_(g);return}w.done?u(m):Promise.resolve(m).then(I,T)}function o(a){return function(){var u=this,_=arguments;return new Promise(function(I,T){var R=a.apply(u,_);function f(m){s(R,I,T,f,w,"next",m)}function w(m){s(R,I,T,f,w,"throw",m)}f(void 0)})}}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":i=>{function s(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/construct.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),u=o("./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js");function _(I,T,R){return u()?(i.exports=_=Reflect.construct.bind(),i.exports.__esModule=!0,i.exports.default=i.exports):(i.exports=_=function(w,m,g){var C=[null];C.push.apply(C,m);var p=Function.bind.apply(w,C),c=new p;return g&&a(c,g.prototype),c},i.exports.__esModule=!0,i.exports.default=i.exports),_.apply(null,arguments)}i.exports=_,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/createClass.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(I,T){for(var R=0;R<T.length;R++){var f=T[R];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,a(f.key),f)}}function _(I,T,R){return T&&u(I.prototype,T),R&&u(I,R),Object.defineProperty(I,"prototype",{writable:!1}),I}i.exports=_,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(_,I,T){return I=a(I),I in _?Object.defineProperty(_,I,{value:T,enumerable:!0,configurable:!0,writable:!0}):_[I]=T,_}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/extends.js":i=>{function s(){return i.exports=s=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var u=arguments[a];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(o[_]=u[_])}return o},i.exports.__esModule=!0,i.exports.default=i.exports,s.apply(this,arguments)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/get.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/superPropBase.js");function u(){return typeof Reflect<"u"&&Reflect.get?(i.exports=u=Reflect.get.bind(),i.exports.__esModule=!0,i.exports.default=i.exports):(i.exports=u=function(I,T,R){var f=a(I,T);if(f){var w=Object.getOwnPropertyDescriptor(f,T);return w.get?w.get.call(arguments.length<3?I:R):w.value}},i.exports.__esModule=!0,i.exports.default=i.exports),u.apply(this,arguments)}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":i=>{function s(o){return i.exports=s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},i.exports.__esModule=!0,i.exports.default=i.exports,s(o)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/inherits.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function u(_,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(I&&I.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),I&&a(_,I)}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":i=>{function s(o){return o&&o.__esModule?o:{default:o}}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/isNativeFunction.js":i=>{function s(o){return Function.toString.call(o).indexOf("[native code]")!==-1}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js":i=>{function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":i=>{function s(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":i=>{function s(o,a){var u=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(u!=null){var _,I,T,R,f=[],w=!0,m=!1;try{if(T=(u=u.call(o)).next,a===0){if(Object(u)!==u)return;w=!1}else for(;!(w=(_=T.call(u)).done)&&(f.push(_.value),f.length!==a);w=!0);}catch(g){m=!0,I=g}finally{try{if(!w&&u.return!=null&&(R=u.return(),Object(R)!==R))return}finally{if(m)throw I}}return f}}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":i=>{function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":i=>{function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function u(_,I){if(_==null)return{};var T=a(_,I),R,f;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(_);for(f=0;f<w.length;f++)R=w[f],!(I.indexOf(R)>=0)&&Object.prototype.propertyIsEnumerable.call(_,R)&&(T[R]=_[R])}return T}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":i=>{function s(o,a){if(o==null)return{};var u={},_=Object.keys(o),I,T;for(T=0;T<_.length;T++)I=_[T],!(a.indexOf(I)>=0)&&(u[I]=o[I]);return u}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/typeof.js").default,u=o("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");function _(I,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(I)}i.exports=_,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/typeof.js").default;function u(){"use strict";i.exports=u=function(){return _},i.exports.__esModule=!0,i.exports.default=i.exports;var _={},I=Object.prototype,T=I.hasOwnProperty,R=Object.defineProperty||function(x,A,k){x[A]=k.value},f=typeof Symbol=="function"?Symbol:{},w=f.iterator||"@@iterator",m=f.asyncIterator||"@@asyncIterator",g=f.toStringTag||"@@toStringTag";function C(x,A,k){return Object.defineProperty(x,A,{value:k,enumerable:!0,configurable:!0,writable:!0}),x[A]}try{C({},"")}catch{C=function(k,F,j){return k[F]=j}}function p(x,A,k,F){var j=A&&A.prototype instanceof E?A:E,U=Object.create(j.prototype),z=new V(F||[]);return R(U,"_invoke",{value:N(x,k,z)}),U}function c(x,A,k){try{return{type:"normal",arg:x.call(A,k)}}catch(F){return{type:"throw",arg:F}}}_.wrap=p;var y={};function E(){}function S(){}function v(){}var h={};C(h,w,function(){return this});var l=Object.getPrototypeOf,d=l&&l(l(M([])));d&&d!==I&&T.call(d,w)&&(h=d);var b=v.prototype=E.prototype=Object.create(h);function O(x){["next","throw","return"].forEach(function(A){C(x,A,function(k){return this._invoke(A,k)})})}function D(x,A){function k(j,U,z,H){var $=c(x[j],x,U);if($.type!=="throw"){var q=$.arg,K=q.value;return K&&a(K)=="object"&&T.call(K,"__await")?A.resolve(K.__await).then(function(W){k("next",W,z,H)},function(W){k("throw",W,z,H)}):A.resolve(K).then(function(W){q.value=W,z(q)},function(W){return k("throw",W,z,H)})}H($.arg)}var F;R(this,"_invoke",{value:function(U,z){function H(){return new A(function($,q){k(U,z,$,q)})}return F=F?F.then(H,H):H()}})}function N(x,A,k){var F="suspendedStart";return function(j,U){if(F==="executing")throw new Error("Generator is already running");if(F==="completed"){if(j==="throw")throw U;return P()}for(k.method=j,k.arg=U;;){var z=k.delegate;if(z){var H=L(z,k);if(H){if(H===y)continue;return H}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(F==="suspendedStart")throw F="completed",k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);F="executing";var $=c(x,A,k);if($.type==="normal"){if(F=k.done?"completed":"suspendedYield",$.arg===y)continue;return{value:$.arg,done:k.done}}$.type==="throw"&&(F="completed",k.method="throw",k.arg=$.arg)}}}function L(x,A){var k=A.method,F=x.iterator[k];if(F===void 0)return A.delegate=null,k==="throw"&&x.iterator.return&&(A.method="return",A.arg=void 0,L(x,A),A.method==="throw")||k!=="return"&&(A.method="throw",A.arg=new TypeError("The iterator does not provide a '"+k+"' method")),y;var j=c(F,x.iterator,A.arg);if(j.type==="throw")return A.method="throw",A.arg=j.arg,A.delegate=null,y;var U=j.arg;return U?U.done?(A[x.resultName]=U.value,A.next=x.nextLoc,A.method!=="return"&&(A.method="next",A.arg=void 0),A.delegate=null,y):U:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,y)}function B(x){var A={tryLoc:x[0]};1 in x&&(A.catchLoc=x[1]),2 in x&&(A.finallyLoc=x[2],A.afterLoc=x[3]),this.tryEntries.push(A)}function G(x){var A=x.completion||{};A.type="normal",delete A.arg,x.completion=A}function V(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(B,this),this.reset(!0)}function M(x){if(x){var A=x[w];if(A)return A.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var k=-1,F=function j(){for(;++k<x.length;)if(T.call(x,k))return j.value=x[k],j.done=!1,j;return j.value=void 0,j.done=!0,j};return F.next=F}}return{next:P}}function P(){return{value:void 0,done:!0}}return S.prototype=v,R(b,"constructor",{value:v,configurable:!0}),R(v,"constructor",{value:S,configurable:!0}),S.displayName=C(v,g,"GeneratorFunction"),_.isGeneratorFunction=function(x){var A=typeof x=="function"&&x.constructor;return!!A&&(A===S||(A.displayName||A.name)==="GeneratorFunction")},_.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,v):(x.__proto__=v,C(x,g,"GeneratorFunction")),x.prototype=Object.create(b),x},_.awrap=function(x){return{__await:x}},O(D.prototype),C(D.prototype,m,function(){return this}),_.AsyncIterator=D,_.async=function(x,A,k,F,j){j===void 0&&(j=Promise);var U=new D(p(x,A,k,F),j);return _.isGeneratorFunction(A)?U:U.next().then(function(z){return z.done?z.value:U.next()})},O(b),C(b,g,"Generator"),C(b,w,function(){return this}),C(b,"toString",function(){return"[object Generator]"}),_.keys=function(x){var A=Object(x),k=[];for(var F in A)k.push(F);return k.reverse(),function j(){for(;k.length;){var U=k.pop();if(U in A)return j.value=U,j.done=!1,j}return j.done=!0,j}},_.values=M,V.prototype={constructor:V,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!A)for(var k in this)k.charAt(0)==="t"&&T.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=void 0)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var k=this;function F(q,K){return z.type="throw",z.arg=A,k.next=q,K&&(k.method="next",k.arg=void 0),!!K}for(var j=this.tryEntries.length-1;j>=0;--j){var U=this.tryEntries[j],z=U.completion;if(U.tryLoc==="root")return F("end");if(U.tryLoc<=this.prev){var H=T.call(U,"catchLoc"),$=T.call(U,"finallyLoc");if(H&&$){if(this.prev<U.catchLoc)return F(U.catchLoc,!0);if(this.prev<U.finallyLoc)return F(U.finallyLoc)}else if(H){if(this.prev<U.catchLoc)return F(U.catchLoc,!0)}else{if(!$)throw new Error("try statement without catch or finally");if(this.prev<U.finallyLoc)return F(U.finallyLoc)}}}},abrupt:function(A,k){for(var F=this.tryEntries.length-1;F>=0;--F){var j=this.tryEntries[F];if(j.tryLoc<=this.prev&&T.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var U=j;break}}U&&(A==="break"||A==="continue")&&U.tryLoc<=k&&k<=U.finallyLoc&&(U=null);var z=U?U.completion:{};return z.type=A,z.arg=k,U?(this.method="next",this.next=U.finallyLoc,y):this.complete(z)},complete:function(A,k){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&k&&(this.next=k),y},finish:function(A){for(var k=this.tryEntries.length-1;k>=0;--k){var F=this.tryEntries[k];if(F.finallyLoc===A)return this.complete(F.completion,F.afterLoc),G(F),y}},catch:function(A){for(var k=this.tryEntries.length-1;k>=0;--k){var F=this.tryEntries[k];if(F.tryLoc===A){var j=F.completion;if(j.type==="throw"){var U=j.arg;G(F)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(A,k,F){return this.delegate={iterator:M(A),resultName:k,nextLoc:F},this.method==="next"&&(this.arg=void 0),y}},_}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":i=>{function s(o,a){return i.exports=s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,I){return _.__proto__=I,_},i.exports.__esModule=!0,i.exports.default=i.exports,s(o,a)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/slicedToArray.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),u=o("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),_=o("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),I=o("./node_modules/@babel/runtime/helpers/nonIterableRest.js");function T(R,f){return a(R)||u(R,f)||_(R,f)||I()}i.exports=T,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/superPropBase.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");function u(_,I){for(;!Object.prototype.hasOwnProperty.call(_,I)&&(_=a(_),_!==null););return _}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/toArray.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),u=o("./node_modules/@babel/runtime/helpers/iterableToArray.js"),_=o("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),I=o("./node_modules/@babel/runtime/helpers/nonIterableRest.js");function T(R){return a(R)||u(R)||_(R)||I()}i.exports=T,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),u=o("./node_modules/@babel/runtime/helpers/iterableToArray.js"),_=o("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),I=o("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function T(R){return a(R)||u(R)||_(R)||I()}i.exports=T,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/typeof.js").default;function u(_,I){if(a(_)!=="object"||_===null)return _;var T=_[Symbol.toPrimitive];if(T!==void 0){var R=T.call(_,I||"default");if(a(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(_)}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/typeof.js").default,u=o("./node_modules/@babel/runtime/helpers/toPrimitive.js");function _(I){var T=u(I,"string");return a(T)==="symbol"?T:String(T)}i.exports=_,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/typeof.js":i=>{function s(o){"@babel/helpers - typeof";return i.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i.exports.__esModule=!0,i.exports.default=i.exports,s(o)}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(_,I){if(_){if(typeof _=="string")return a(_,I);var T=Object.prototype.toString.call(_).slice(8,-1);if(T==="Object"&&_.constructor&&(T=_.constructor.name),T==="Map"||T==="Set")return Array.from(_);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return a(_,I)}}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=o("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),_=o("./node_modules/@babel/runtime/helpers/isNativeFunction.js"),I=o("./node_modules/@babel/runtime/helpers/construct.js");function T(R){var f=typeof Map=="function"?new Map:void 0;return i.exports=T=function(m){if(m===null||!_(m))return m;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(m))return f.get(m);f.set(m,g)}function g(){return I(m,arguments,a(this).constructor)}return g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),u(g,m)},i.exports.__esModule=!0,i.exports.default=i.exports,T(R)}i.exports=T,i.exports.__esModule=!0,i.exports.default=i.exports},"./node_modules/@babel/runtime/regenerator/index.js":(i,s,o)=>{var a=o("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();i.exports=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},t={};function e(i){var s=t[i];if(s!==void 0)return s.exports;var o=t[i]={exports:{}};return n[i].call(o.exports,o,o.exports,e),o.exports}e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var r=e("./src/index.js");return r})())});var ii=class{},$s=class{},Ot=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),s=i.toLowerCase(),o=e.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(s=>s.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Za=class{encodeKey(t){return Ch(t)}encodeValue(t){return Ch(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Zy(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],u=e.get(o)||[];u.push(a),e.set(o,u)}),e}var eb=/%(\d[a-f0-9])/gi,tb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ch(n){return encodeURIComponent(n).replace(eb,(t,e)=>tb[e]??t)}function Gs(n){return`${n}`}var mn=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Za,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Zy(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(Gs):[Gs(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Gs(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Gs(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var el=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function nb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Sh(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Rh(n){return typeof Blob<"u"&&n instanceof Blob}function Th(n){return typeof FormData<"u"&&n instanceof FormData}function rb(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ri=class n{constructor(t,e,r,i){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(nb(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ot,this.context??=new el,!this.params)this.params=new mn,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),u=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Sh(this.body)||Rh(this.body)||Th(this.body)||rb(this.body)?this.body:this.body instanceof mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Th(this.body)?null:Rh(this.body)?this.body.type||null:Sh(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,u=t.reportProgress??this.reportProgress,_=t.headers||this.headers,I=t.params||this.params,T=t.context??this.context;return t.setHeaders!==void 0&&(_=Object.keys(t.setHeaders).reduce((R,f)=>R.set(f,t.setHeaders[f]),_)),t.setParams&&(I=Object.keys(t.setParams).reduce((R,f)=>R.set(f,t.setParams[f]),I)),new n(e,r,o,{params:I,headers:_,context:T,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},gn=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(gn||{}),si=class{constructor(t,e=200,r="OK"){this.headers=t.headers||new Ot,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Ws=class n extends si{constructor(t={}){super(t),this.type=gn.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},oi=class n extends si{constructor(t={}){super(t),this.type=gn.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},pn=class extends si{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},xh=200,ib=204;function Xa(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Mn=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let s;if(e instanceof ri)s=e;else{let u;i.headers instanceof Ot?u=i.headers:u=new Ot(i.headers);let _;i.params&&(i.params instanceof mn?_=i.params:_=new mn({fromObject:i.params})),s=new ri(e,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=de(s).pipe(cn(u=>this.handler.handle(u)));if(e instanceof ri||i.observe==="events")return o;let a=o.pipe(pt(u=>u instanceof oi));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(he(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(he(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(he(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(he(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new mn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Xa(i,r))}post(e,r,i={}){return this.request("POST",e,Xa(i,r))}put(e,r,i={}){return this.request("PUT",e,Xa(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ee(ii))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),sb=/^\)\]\}',?\n/,ob="X-Request-URL";function Ih(n){if(n.url)return n.url;let t=ob.toLocaleLowerCase();return n.headers.get(t)}var ab=(()=>{class n{constructor(){this.fetchImpl=Z(tl,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=Z(Ue)}handle(e){return new Tt(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(nl,s=>r.error(new pn({error:s}))),()=>i.abort()})}doRequest(e,r,i){return ce(this,null,function*(){let s=this.createRequestInit(e),o;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,X({signal:r},s)));lb(f),i.next({type:gn.Sent}),o=yield f}catch(f){i.error(new pn({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}));return}let a=new Ot(o.headers),u=o.statusText,_=Ih(o)??e.urlWithParams,I=o.status,T=null;if(e.reportProgress&&i.next(new Ws({headers:a,status:I,statusText:u,url:_})),o.body){let f=o.headers.get("content-length"),w=[],m=o.body.getReader(),g=0,C,p,c=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ce(this,null,function*(){for(;;){let{done:E,value:S}=yield m.read();if(E)break;if(w.push(S),g+=S.length,e.reportProgress){p=e.responseType==="text"?(p??"")+(C??=new TextDecoder).decode(S,{stream:!0}):void 0;let v=()=>i.next({type:gn.DownloadProgress,total:f?+f:void 0,loaded:g,partialText:p});c?c.run(v):v()}}}));let y=this.concatChunks(w,g);try{let E=o.headers.get("Content-Type")??"";T=this.parseBody(e,y,E)}catch(E){i.error(new pn({error:E,headers:new Ot(o.headers),status:o.status,statusText:o.statusText,url:Ih(o)??e.urlWithParams}));return}}I===0&&(I=T?xh:0),I>=200&&I<300?(i.next(new oi({body:T,headers:a,status:I,statusText:u,url:_})),i.complete()):i.error(new pn({error:T,headers:a,status:I,statusText:u,url:_}))})}parseBody(e,r,i){switch(e.responseType){case"json":let s=new TextDecoder().decode(r).replace(sb,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((s,o)=>r[s]=o.join(",")),e.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),s=0;for(let o of e)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),tl=class{};function nl(){}function lb(n){n.then(nl,nl)}function ub(n,t){return t(n)}function cb(n,t,e){return(r,i)=>It(e,()=>t(r,s=>n(s,i)))}var kh=new ie(""),db=new ie(""),hb=new ie("",{providedIn:"root",factory:()=>!0});var Oh=(()=>{class n extends ii{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=Z(Os),this.contributeToStability=Z(hb)}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(kh),...this.injector.get(db,[])]));this.chain=r.reduceRight((i,s)=>cb(i,s,this.injector),ub)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe($t(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(ee($s),ee(rr))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})();var fb=/^\)\]\}',?\n/;function pb(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Ah=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new _e(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ze(r.\u0275loadImpl()):de(null)).pipe(gt(()=>new Tt(s=>{let o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((m,g)=>o.setRequestHeader(m,g.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let m=e.detectContentTypeHeader();m!==null&&o.setRequestHeader("Content-Type",m)}if(e.responseType){let m=e.responseType.toLowerCase();o.responseType=m!=="json"?m:"text"}let a=e.serializeBody(),u=null,_=()=>{if(u!==null)return u;let m=o.statusText||"OK",g=new Ot(o.getAllResponseHeaders()),C=pb(o)||e.url;return u=new Ws({headers:g,status:o.status,statusText:m,url:C}),u},I=()=>{let{headers:m,status:g,statusText:C,url:p}=_(),c=null;g!==ib&&(c=typeof o.response>"u"?o.responseText:o.response),g===0&&(g=c?xh:0);let y=g>=200&&g<300;if(e.responseType==="json"&&typeof c=="string"){let E=c;c=c.replace(fb,"");try{c=c!==""?JSON.parse(c):null}catch(S){c=E,y&&(y=!1,c={error:S,text:c})}}y?(s.next(new oi({body:c,headers:m,status:g,statusText:C,url:p||void 0})),s.complete()):s.error(new pn({error:c,headers:m,status:g,statusText:C,url:p||void 0}))},T=m=>{let{url:g}=_(),C=new pn({error:m,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});s.error(C)},R=!1,f=m=>{R||(s.next(_()),R=!0);let g={type:gn.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&o.responseText&&(g.partialText=o.responseText),s.next(g)},w=m=>{let g={type:gn.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),s.next(g)};return o.addEventListener("load",I),o.addEventListener("error",T),o.addEventListener("timeout",T),o.addEventListener("abort",T),e.reportProgress&&(o.addEventListener("progress",f),a!==null&&o.upload&&o.upload.addEventListener("progress",w)),o.send(a),s.next({type:gn.Sent}),()=>{o.removeEventListener("error",T),o.removeEventListener("abort",T),o.removeEventListener("load",I),o.removeEventListener("timeout",T),e.reportProgress&&(o.removeEventListener("progress",f),a!==null&&o.upload&&o.upload.removeEventListener("progress",w)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ee(Hs))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),Dh=new ie(""),mb="XSRF-TOKEN",gb=new ie("",{providedIn:"root",factory:()=>mb}),vb="X-XSRF-TOKEN",yb=new ie("",{providedIn:"root",factory:()=>vb}),qs=class{},bb=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vs(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie),ee(qt),ee(gb))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})();function _b(n,t){let e=n.url.toLowerCase();if(!Z(Dh)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=Z(qs).getToken(),i=Z(yb);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}function Ph(...n){let t=[Mn,Ah,Oh,{provide:ii,useExisting:Oh},{provide:$s,useFactory:()=>Z(ab,{optional:!0})??Z(Ah)},{provide:kh,useValue:_b,multi:!0},{provide:Dh,useValue:!0},{provide:qs,useClass:bb}];for(let e of n)t.push(...e.\u0275providers);return vt(t)}var ol=class extends _h{constructor(){super(...arguments),this.supportsDOMEvents=!0}},al=class n extends ol{static makeCurrent(){bh(new n)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=wb();return e==null?null:Eb(e)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vs(document.cookie,t)}},ai=null;function wb(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}function Eb(n){return new URL(n,document.baseURI).pathname}var Cb=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),Ks=new ie(""),Lh=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new _e(5101,!1);return this._eventNameToPlugin.set(e,r),r}static{this.\u0275fac=function(r){return new(r||n)(ee(Ks),ee(Ue))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),li=class{constructor(t){this._doc=t}},il="ng-app-id",Fh=(()=>{class n{constructor(e,r,i,s={}){this.doc=e,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zs(s),this.resetHostNodes()}addStyles(e){for(let r of e)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(e){for(let r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){let r=this.styleRef;r.get(e)?.elements?.forEach(i=>i.remove()),r.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${il}="${this.appId}"]`);if(e?.length){let r=new Map;return e.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(e,r){let i=this.styleRef;if(i.has(e)){let s=i.get(e);return s.usage+=r,s.usage}return i.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===e)return i.delete(r),s.removeAttribute(il),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(il,this.appId),e.appendChild(o),o}}addStyleToHost(e,r){let i=this.getStyleElement(e,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie),ee(As),ee(Jr,8),ee(qt))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),sl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},cl=/%COMP%/g,Uh="%COMP%",Sb=`_nghost-${Uh}`,Rb=`_ngcontent-${Uh}`,Tb=!0,Ib=new ie("",{providedIn:"root",factory:()=>Tb});function Ob(n){return Rb.replace(cl,n)}function Ab(n){return Sb.replace(cl,n)}function Bh(n,t){return t.map(e=>e.replace(cl,n))}var Ys=(()=>{class n{constructor(e,r,i,s,o,a,u,_=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=zs(a),this.defaultRenderer=new ui(e,o,u,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yr.ShadowDom&&(r=me(X({},r),{encapsulation:Yr.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Qs?i.applyToHost(e):i instanceof ci&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,_=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case Yr.Emulated:s=new Qs(u,_,r,this.appId,I,o,a,T);break;case Yr.ShadowDom:return new ll(u,_,e,r,o,a,this.nonce,T);default:s=new ci(u,_,r,I,o,a,T);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ee(Lh),ee(Fh),ee(As),ee(Ib),ee(Ie),ee(qt),ee(Ue),ee(Jr))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),ui=class{constructor(t,e,r,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(sl[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Mh(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Mh(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new _e(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let s=sl[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=sl[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Zr.DashCase|Zr.Important)?t.style.setProperty(e,r,i&Zr.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Zr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r){if(typeof t=="string"&&(t=ur().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Mh(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ll=class extends ui{constructor(t,e,r,i,s,o,a,u){super(t,s,o,u),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=Bh(i.id,i.styles);for(let I of _){let T=document.createElement("style");a&&T.setAttribute("nonce",a),T.textContent=I,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ci=class extends ui{constructor(t,e,r,i,s,o,a,u){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=u?Bh(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qs=class extends ci{constructor(t,e,r,i,s,o,a,u){let _=i+"-"+r.id;super(t,e,r,s,o,a,u,_),this.contentAttr=Ob(_),this.hostAttr=Ab(_)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},xb=(()=>{class n extends li{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),kb=(()=>{class n extends li{constructor(e){super(e),this.delegate=Z(yh,{optional:!0})}supports(e){return this.delegate?this.delegate.supports(e):!1}addEventListener(e,r,i){return this.delegate.addEventListener(e,r,i)}removeEventListener(e,r,i){return this.delegate.removeEventListener(e,r,i)}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),Nh=["alt","control","meta","shift"],Db={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pb={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Mb=(()=>{class n extends li{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Nh.forEach(_=>{let I=r.indexOf(_);I>-1&&(r.splice(I,1),o+=_+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(e,r){let i=Db[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Nh.forEach(o=>{if(o!==i){let a=Pb[o];a(e)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{n.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})();function Vh(n,t){return vh(X({rootComponent:n},Nb(t)))}function Nb(n){return{appProviders:[...Bb,...n?.providers??[]],platformProviders:Ub}}function jb(){al.makeCurrent()}function Lb(){return new Wt}function Fb(){return th(document),document}var Ub=[{provide:qt,useValue:wh},{provide:nh,useValue:jb,multi:!0},{provide:Ie,useFactory:Fb,deps:[]}];var Bb=[{provide:Zd,useValue:"root"},{provide:Wt,useFactory:Lb,deps:[]},{provide:Ks,useClass:xb,multi:!0,deps:[Ie,Ue,qt]},{provide:Ks,useClass:Mb,multi:!0,deps:[Ie]},{provide:Ks,useClass:kb,multi:!0},Ys,Fh,Lh,{provide:xs,useExisting:Ys},{provide:Hs,useClass:Cb,deps:[]},[]];var zh=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var dl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=ee(Vb),i},providedIn:"root"})}}return n})(),Vb=(()=>{class n extends dl{constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case at.NONE:return r;case at.HTML:return sr(r,"HTML")?ir(r):uh(this._doc,String(r)).toString();case at.STYLE:return sr(r,"Style")?ir(r):r;case at.SCRIPT:if(sr(r,"Script"))return ir(r);throw new _e(5200,!1);case at.URL:return sr(r,"URL")?ir(r):lh(String(r));case at.RESOURCE_URL:if(sr(r,"ResourceURL"))return ir(r);throw new _e(5201,!1);default:throw new _e(5202,!1)}}bypassSecurityTrustHtml(e){return rh(e)}bypassSecurityTrustStyle(e){return ih(e)}bypassSecurityTrustScript(e){return sh(e)}bypassSecurityTrustUrl(e){return oh(e)}bypassSecurityTrustResourceUrl(e){return ah(e)}static{this.\u0275fac=function(r){return new(r||n)(ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pe="primary",Ii=Symbol("RouteTitle"),gl=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function gr(n){return new gl(n)}function Gb(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function $b(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ut(n[e],t[e]))return!1;return!0}function Ut(n,t){let e=n?vl(n):void 0,r=t?vl(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!Jh(n[i],t[i]))return!1;return!0}function vl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Jh(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}else return n===t}function Xh(n){return n.length>0?n[n.length-1]:null}function vn(n){return Ud(n)?n:Fs(n)?Ze(Promise.resolve(n)):de(n)}var Wb={exact:ef,subset:tf},Zh={exact:qb,subset:Kb,ignored:()=>!0};function Gh(n,t,e){return Wb[e.paths](n.root,t.root,e.matrixParams)&&Zh[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function qb(n,t){return Ut(n,t)}function ef(n,t,e){if(!jn(n.segments,t.segments)||!Zs(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!ef(n.children[r],t.children[r],e))return!1;return!0}function Kb(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Jh(n[e],t[e]))}function tf(n,t,e){return nf(n,t,t.segments,e)}function nf(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!jn(i,e)||t.hasChildren()||!Zs(i,e,r))}else if(n.segments.length===e.length){if(!jn(n.segments,e)||!Zs(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!tf(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!jn(n.segments,i)||!Zs(n.segments,i,r)||!n.children[pe]?!1:nf(n.children[pe],t,s,r)}}function Zs(n,t,e){return t.every((r,i)=>Zh[e](n[i].parameters,r.parameters))}var Jt=class{constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gr(this.queryParams),this._queryParamMap}toString(){return Jb.serialize(this)}},we=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eo(this)}},Nn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=gr(this.parameters),this._parameterMap}toString(){return sf(this)}};function Yb(n,t){return jn(n,t)&&n.every((e,r)=>Ut(e.parameters,t[r].parameters))}function jn(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function Qb(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===pe&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pe&&(e=e.concat(t(i,r)))}),e}var Hl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:()=>new vi,providedIn:"root"})}}return n})(),vi=class{parse(t){let e=new bl(t);return new Jt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${di(t.root,!0)}`,r=e_(t.queryParams),i=typeof t.fragment=="string"?`#${Xb(t.fragment)}`:"";return`${e}${r}${i}`}},Jb=new vi;function eo(n){return n.segments.map(t=>sf(t)).join("/")}function di(n,t){if(!n.hasChildren())return eo(n);if(t){let e=n.children[pe]?di(n.children[pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==pe&&r.push(`${i}:${di(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Qb(n,(r,i)=>i===pe?[di(n.children[pe],!1)]:[`${i}:${di(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[pe]!=null?`${eo(n)}/${e[0]}`:`${eo(n)}/(${e.join("//")})`}}function rf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Js(n){return rf(n).replace(/%3B/gi,";")}function Xb(n){return encodeURI(n)}function yl(n){return rf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function to(n){return decodeURIComponent(n)}function $h(n){return to(n.replace(/\+/g,"%20"))}function sf(n){return`${yl(n.path)}${Zb(n.parameters)}`}function Zb(n){return Object.entries(n).map(([t,e])=>`;${yl(t)}=${yl(e)}`).join("")}function e_(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Js(e)}=${Js(i)}`).join("&"):`${Js(e)}=${Js(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var t_=/^[^\/()?;#]+/;function hl(n){let t=n.match(t_);return t?t[0]:""}var n_=/^[^\/()?;=#]+/;function r_(n){let t=n.match(n_);return t?t[0]:""}var i_=/^[^=?&#]+/;function s_(n){let t=n.match(i_);return t?t[0]:""}var o_=/^[^&#]+/;function a_(n){let t=n.match(o_);return t?t[0]:""}var bl=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[pe]=new we(t,e)),r}parseSegment(){let t=hl(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(t),new Nn(to(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=r_(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=hl(this.remaining);i&&(r=i,this.capture(r))}t[to(e)]=to(r)}parseQueryParam(t){let e=s_(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=a_(this.remaining);o&&(r=o,this.capture(r))}let i=$h(e),s=$h(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hl(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new _e(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=pe);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[pe]:new we([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new _e(4011,!1)}};function of(n){return n.segments.length>0?new we([],{[pe]:n}):n}function af(n){let t={};for(let[r,i]of Object.entries(n.children)){let s=af(i);if(r===pe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let e=new we(n.segments,t);return l_(e)}function l_(n){if(n.numberOfChildren===1&&n.children[pe]){let t=n.children[pe];return new we(n.segments.concat(t.segments),t.children)}return n}function yi(n){return n instanceof Jt}function u_(n,t,e=null,r=null){let i=lf(n);return uf(i,t,e,r)}function lf(n){let t;function e(s){let o={};for(let u of s.children){let _=e(u);o[u.outlet]=_}let a=new we(s.url,o);return s===n&&(t=a),a}let r=e(n.root),i=of(r);return t??i}function uf(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return fl(i,i,i,e,r);let s=c_(t);if(s.toRoot())return fl(i,i,new we([],{}),e,r);let o=d_(s,i,n),a=o.processChildren?pi(o.segmentGroup,o.index,s.commands):df(o.segmentGroup,o.index,s.commands);return fl(i,o.segmentGroup,a,e,r)}function no(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function bi(n){return typeof n=="object"&&n!=null&&n.outlets}function fl(n,t,e,r,i){let s={};r&&Object.entries(r).forEach(([u,_])=>{s[u]=Array.isArray(_)?_.map(I=>`${I}`):`${_}`});let o;n===t?o=e:o=cf(n,t,e);let a=of(af(o));return new Jt(a,s,i)}function cf(n,t,e){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===t?r[i]=e:r[i]=cf(s,t,e)}),new we(n.segments,r)}var ro=class{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&no(r[0]))throw new _e(4003,!1);let i=r.find(bi);if(i&&i!==Xh(r))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function c_(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ro(!0,0,n);let t=0,e=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,_])=>{a[u]=typeof _=="string"?_.split("/"):_}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ro(e,t,r)}var fr=class{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function d_(n,t,e){if(n.isAbsolute)return new fr(t,!0,0);if(!e)return new fr(t,!1,NaN);if(e.parent===null)return new fr(e,!0,0);let r=no(n.commands[0])?0:1,i=e.segments.length-1+r;return h_(e,i,n.numberOfDoubleDots)}function h_(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new _e(4005,!1);i=r.segments.length}return new fr(r,!1,i-s)}function f_(n){return bi(n[0])?n[0].outlets:{[pe]:n}}function df(n,t,e){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return pi(n,t,e);let r=p_(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new we(n.segments.slice(0,r.pathIndex),{});return s.children[pe]=new we(n.segments.slice(r.pathIndex),n.children),pi(s,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?_l(n,t,e):r.match?pi(n,0,i):_l(n,t,e)}function pi(n,t,e){if(e.length===0)return new we(n.segments,{});{let r=f_(e),i={};if(Object.keys(r).some(s=>s!==pe)&&n.children[pe]&&n.numberOfChildren===1&&n.children[pe].segments.length===0){let s=pi(n.children[pe],t,e);return new we(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=df(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(n.segments,i)}}function p_(n,t,e){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;let o=n.segments[i],a=e[r];if(bi(a))break;let u=`${a}`,_=r<e.length-1?e[r+1]:null;if(i>0&&u===void 0)break;if(u&&_&&typeof _=="object"&&_.outlets===void 0){if(!qh(u,_,o))return s;r+=2}else{if(!qh(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _l(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(bi(s)){let u=m_(s.outlets);return new we(r,u)}if(i===0&&no(e[0])){let u=n.segments[t];r.push(new Nn(u.path,Wh(e[0]))),i++;continue}let o=bi(s)?s.outlets[pe]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&no(a)?(r.push(new Nn(o,Wh(a))),i+=2):(r.push(new Nn(o,{})),i++)}return new we(r,{})}function m_(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=_l(new we([],{}),0,r))}),t}function Wh(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function qh(n,t,e){return n==e.path&&Ut(t,e.parameters)}var mi="imperative",He=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(He||{}),_t=class{constructor(t,e){this.id=t,this.url=e}},_i=class extends _t{constructor(t,e,r="imperative",i=null){super(t,e),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends _t{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ut||{}),wl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(wl||{}),Qt=class extends _t{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fn=class extends _t{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},wi=class extends _t{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},io=class extends _t{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},El=class extends _t{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cl=class extends _t{constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sl=class extends _t{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rl=class extends _t{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tl=class{constructor(t){this.route=t,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Il=class{constructor(t){this.route=t,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ol=class{constructor(t){this.snapshot=t,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Al=class{constructor(t){this.snapshot=t,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xl=class{constructor(t){this.snapshot=t,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kl=class{constructor(t){this.snapshot=t,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ei=class{},vr=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function g_(n,t){return n.providers&&!n._injector&&(n._injector=fh(n.providers,t,`Route: ${n.path}`)),n._injector??t}function At(n){return n.outlet||pe}function v_(n,t){let e=n.filter(r=>At(r)===t);return e.push(...n.filter(r=>At(r)!==t)),e}function Oi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Dl=class{get injector(){return Oi(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new ho(this.rootInjector),this.attachRef=null}},ho=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Dl(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(r){return new(r||n)(ee(rr))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),so=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Pl(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Pl(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ml(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Ml(t,this._root).map(e=>e.value)}};function Pl(n,t){if(n===t.value)return t;for(let e of t.children){let r=Pl(n,e);if(r)return r}return null}function Ml(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Ml(n,e);if(r.length)return r.unshift(t),r}return[]}var lt=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function hr(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var oo=class extends so{constructor(t,e){super(t),this.snapshot=e,Gl(this,t)}toString(){return this.snapshot.toString()}};function hf(n){let t=y_(n),e=new Ke([new Nn("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),a=new yr(e,r,s,o,i,pe,n,t.root);return a.snapshot=t.root,new oo(new lt(a,[]),t)}function y_(n){let t={},e={},r={},i="",s=new pr([],t,r,i,e,pe,n,null,{});return new lo("",new lt(s,[]))}var yr=class{constructor(t,e,r,i,s,o,a,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(he(_=>_[Ii]))??de(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(t=>gr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(t=>gr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ao(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:X(X({},t.params),n.params),data:X(X({},t.data),n.data),resolve:X(X(X(X({},n.data),t.data),i?.data),n._resolvedData)}:r={params:X({},n.params),data:X({},n.data),resolve:X(X({},n.data),n._resolvedData??{})},i&&pf(i)&&(r.resolve[Ii]=i.title),r}var pr=class{get title(){return this.data?.[Ii]}constructor(t,e,r,i,s,o,a,u,_){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},lo=class extends so{constructor(t,e){super(e),this.url=t,Gl(this,e)}toString(){return ff(this._root)}};function Gl(n,t){t.value._routerState=n,t.children.forEach(e=>Gl(n,e))}function ff(n){let t=n.children.length>0?` { ${n.children.map(ff).join(", ")} } `:"";return`${n.value}${t}`}function pl(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ut(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ut(t.params,e.params)||n.paramsSubject.next(e.params),$b(t.url,e.url)||n.urlSubject.next(e.url),Ut(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Nl(n,t){let e=Ut(n.params,t.params)&&Yb(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Nl(n.parent,t.parent))}function pf(n){return typeof n.title=="string"||n.title===null}var Ai=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=Z(ho),this.location=Z(dh),this.changeDetector=Z(ar),this.inputBinder=Z($l,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new jl(e,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[An]})}}return n})(),jl=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===yr?this.route:t===ho?this.childContexts:this.parent.get(t,e)}},$l=new ie("");function b_(n,t,e){let r=Ci(n,t._root,e?e._root:void 0);return new oo(r,t)}function Ci(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=__(n,t,e);return new lt(r,i)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Ci(n,a)),o}}let r=w_(t.value),i=t.children.map(s=>Ci(n,s));return new lt(r,i)}}function __(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ci(n,r,i);return Ci(n,r)})}function w_(n){return new yr(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var Si=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},mf="ngNavigationCancelingError";function uo(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=yi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=gf(!1,ut.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function gf(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[mf]=!0,e.cancellationCode=t,e}function E_(n){return vf(n)&&yi(n.url)}function vf(n){return!!n&&n[mf]}var C_=(n,t,e,r)=>he(i=>(new Ll(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Ll=class{constructor(t,e,r,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),pl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=hr(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=hr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=hr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=hr(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new kl(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Al(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(pl(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),pl(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},co=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},mr=class{constructor(t,e){this.component=t,this.route=e}};function S_(n,t,e){let r=n._root,i=t?t._root:null;return hi(r,i,e,[r.value])}function R_(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function _r(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Xd(n)?n:t.get(n):r}function hi(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=hr(t);return n.children.forEach(o=>{T_(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gi(a,e.getContext(o),i)),i}function T_(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=I_(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new co(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?hi(n,t,a?a.children:null,r,i):hi(n,t,e,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mr(a.outlet.component,o))}else o&&gi(t,a,i),i.canActivateChecks.push(new co(r)),s.component?hi(n,null,a?a.children:null,r,i):hi(n,null,e,r,i);return i}function I_(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!jn(n.url,t.url);case"pathParamsOrQueryParamsChange":return!jn(n.url,t.url)||!Ut(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nl(n,t)||!Ut(n.queryParams,t.queryParams);case"paramsChange":default:return!Nl(n,t)}}function gi(n,t,e){let r=hr(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?t?gi(o,t.children.getContext(s),e):gi(o,null,e):gi(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new mr(t.outlet.component,i)):e.canDeactivateChecks.push(new mr(null,i)):e.canDeactivateChecks.push(new mr(null,i))}function xi(n){return typeof n=="function"}function O_(n){return typeof n=="boolean"}function A_(n){return n&&xi(n.canLoad)}function x_(n){return n&&xi(n.canActivate)}function k_(n){return n&&xi(n.canActivateChild)}function D_(n){return n&&xi(n.canDeactivate)}function P_(n){return n&&xi(n.canMatch)}function yf(n){return n instanceof Bd||n?.name==="EmptyError"}var Xs=Symbol("INITIAL_VALUE");function br(){return gt(n=>Kr(n.map(t=>t.pipe(mt(1),Ss(Xs)))).pipe(he(t=>{for(let e of t)if(e!==!0){if(e===Xs)return Xs;if(e===!1||M_(e))return e}return!0}),pt(t=>t!==Xs),mt(1)))}function M_(n){return yi(n)||n instanceof Si}function N_(n,t){return et(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?de(me(X({},e),{guardsResult:!0})):j_(o,r,i,n).pipe(et(a=>a&&O_(a)?L_(r,s,n,t):de(a)),he(a=>me(X({},e),{guardsResult:a})))})}function j_(n,t,e,r){return Ze(n).pipe(et(i=>z_(i.component,i.route,e,t,r)),dn(i=>i!==!0,!0))}function L_(n,t,e,r){return Ze(t).pipe(cn(i=>bs(U_(i.route.parent,r),F_(i.route,r),V_(n,i.path,e),B_(n,i.route,e))),dn(i=>i!==!0,!0))}function F_(n,t){return n!==null&&t&&t(new xl(n)),de(!0)}function U_(n,t){return n!==null&&t&&t(new Ol(n)),de(!0)}function B_(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>_s(()=>{let o=Oi(t)??e,a=_r(s,o),u=x_(a)?a.canActivate(t,n):It(o,()=>a(t,n));return vn(u).pipe(dn())}));return de(i).pipe(br())}function V_(n,t,e){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>R_(o)).filter(o=>o!==null).map(o=>_s(()=>{let a=o.guards.map(u=>{let _=Oi(o.node)??e,I=_r(u,_),T=k_(I)?I.canActivateChild(r,n):It(_,()=>I(r,n));return vn(T).pipe(dn())});return de(a).pipe(br())}));return de(s).pipe(br())}function z_(n,t,e,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let u=Oi(t)??i,_=_r(a,u),I=D_(_)?_.canDeactivate(n,t,e,r):It(u,()=>_(n,t,e,r));return vn(I).pipe(dn())});return de(o).pipe(br())}function H_(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return de(!0);let s=i.map(o=>{let a=_r(o,n),u=A_(a)?a.canLoad(t,e):It(n,()=>a(t,e));return vn(u)});return de(s).pipe(br(),bf(r))}function bf(n){return jd(Ne(t=>{if(typeof t!="boolean")throw uo(n,t)}),he(t=>t===!0))}function G_(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return de(!0);let s=i.map(o=>{let a=_r(o,n),u=P_(a)?a.canMatch(t,e):It(n,()=>a(t,e));return vn(u)});return de(s).pipe(br(),bf(r))}var Ri=class{constructor(t){this.segmentGroup=t||null}},Ti=class extends Error{constructor(t){super(),this.urlTree=t}};function dr(n){return In(new Ri(n))}function $_(n){return In(new _e(4e3,!1))}function W_(n){return In(gf(!1,ut.GuardRejected))}var Fl=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return de(r);if(i.numberOfChildren>1||!i.children[pe])return $_(`${t.redirectTo}`);i=i.children[pe]}}applyRedirectCommands(t,e,r,i,s){if(typeof e!="string"){let a=e,{queryParams:u,fragment:_,routeConfig:I,url:T,outlet:R,params:f,data:w,title:m}=i,g=It(s,()=>a({params:f,data:w,queryParams:u,fragment:_,routeConfig:I,url:T,outlet:R,title:m}));if(g instanceof Jt)throw new Ti(g);e=g}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new Ti(o);return o}applyRedirectCreateUrlTree(t,e,r,i){let s=this.createSegmentGroup(t,e.root,r,i);return new Jt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=e[a]}else r[i]=s}),r}createSegmentGroup(t,e,r,i){let s=this.createSegments(t,e.segments,r,i),o={};return Object.entries(e.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(t,u,r,i)}),new we(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new _e(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},Ul={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q_(n,t,e,r,i){let s=_f(n,t,e);return s.matched?(r=g_(t,r),G_(r,t,e,i).pipe(he(o=>o===!0?s:X({},Ul)))):de(s)}function _f(n,t,e){if(t.path==="**")return K_(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?X({},Ul):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Gb)(e,n,t);if(!i)return X({},Ul);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?X(X({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function K_(n){return{matched:!0,parameters:n.length>0?Xh(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Kh(n,t,e,r){return e.length>0&&J_(n,e,r)?{segmentGroup:new we(t,Q_(r,new we(e,n.children))),slicedSegments:[]}:e.length===0&&X_(n,e,r)?{segmentGroup:new we(n.segments,Y_(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new we(n.segments,n.children),slicedSegments:e}}function Y_(n,t,e,r){let i={};for(let s of e)if(fo(n,t,s)&&!r[At(s)]){let o=new we([],{});i[At(s)]=o}return X(X({},r),i)}function Q_(n,t){let e={};e[pe]=t;for(let r of n)if(r.path===""&&At(r)!==pe){let i=new we([],{});e[At(r)]=i}return e}function J_(n,t,e){return e.some(r=>fo(n,t,r)&&At(r)!==pe)}function X_(n,t,e){return e.some(r=>fo(n,t,r))}function fo(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Z_(n,t,e){return t.length===0&&!n.children[e]}var Bl=class{};function ew(n,t,e,r,i,s,o="emptyOnly"){return new Vl(n,t,e,r,i,o,s).recognize()}var tw=31,Vl=class{constructor(t,e,r,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Fl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new _e(4002,`'${t.segmentGroup}'`)}recognize(){let t=Kh(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(he(({children:e,rootSnapshot:r})=>{let i=new lt(r,e),s=new lo("",i),o=u_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new pr([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,pe,e).pipe(he(r=>({children:r,rootSnapshot:e})),jt(r=>{if(r instanceof Ti)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ri?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,s):this.processSegment(t,e,r,r.segments,i,!0,s).pipe(he(o=>o instanceof lt?[o]:[]))}processChildren(t,e,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ze(s).pipe(cn(o=>{let a=r.children[o],u=v_(e,o);return this.processSegmentGroup(t,u,a,o,i)}),Cs((o,a)=>(o.push(...a),o)),ja(null),Wd(),et(o=>{if(o===null)return dr(r);let a=wf(o);return nw(a),de(a)}))}processSegment(t,e,r,i,s,o,a){return Ze(e).pipe(cn(u=>this.processSegmentAgainstRoute(u._injector??t,e,u,r,i,s,o,a).pipe(jt(_=>{if(_ instanceof Ri)return de(null);throw _}))),dn(u=>!!u),jt(u=>{if(yf(u))return Z_(r,i,s)?de(new Bl):dr(r);throw u}))}processSegmentAgainstRoute(t,e,r,i,s,o,a,u){return At(r)!==o&&(o===pe||!fo(i,s,r))?dr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,s,o,u):dr(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o,a){let{matched:u,parameters:_,consumedSegments:I,positionalParamSegments:T,remainingSegments:R}=_f(e,i,s);if(!u)return dr(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tw&&(this.allowRedirects=!1));let f=new pr(s,_,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Yh(i),At(i),i.component??i._loadedComponent??null,i,Qh(i)),w=ao(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(w.params),f.data=Object.freeze(w.data);let m=this.applyRedirects.applyRedirectCommands(I,i.redirectTo,T,f,t);return this.applyRedirects.lineralizeSegments(i,m).pipe(et(g=>this.processSegment(t,r,e,g.concat(R),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,s,o){let a=q_(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(gt(u=>u.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(gt(({routes:_})=>{let I=r._loadedInjector??t,{parameters:T,consumedSegments:R,remainingSegments:f}=u,w=new pr(R,T,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Yh(r),At(r),r.component??r._loadedComponent??null,r,Qh(r)),m=ao(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(m.params),w.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:C}=Kh(e,R,f,_);if(C.length===0&&g.hasChildren())return this.processChildren(I,_,g,w).pipe(he(c=>new lt(w,c)));if(_.length===0&&C.length===0)return de(new lt(w,[]));let p=At(r)===s;return this.processSegment(I,_,g,C,p?pe:s,!0,w).pipe(he(c=>new lt(w,c instanceof lt?[c]:[])))}))):dr(e)))}getChildConfig(t,e,r){return e.children?de({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?de({routes:e._loadedRoutes,injector:e._loadedInjector}):H_(t,e,r,this.urlSerializer).pipe(et(i=>i?this.configLoader.loadChildren(t,e).pipe(Ne(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):W_(e))):de({routes:[],injector:t})}};function nw(n){n.sort((t,e)=>t.value.outlet===pe?-1:e.value.outlet===pe?1:t.value.outlet.localeCompare(e.value.outlet))}function rw(n){let t=n.value.routeConfig;return t&&t.path===""}function wf(n){let t=[],e=new Set;for(let r of n){if(!rw(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=wf(r.children);t.push(new lt(r.value,i))}return t.filter(r=>!e.has(r))}function Yh(n){return n.data||{}}function Qh(n){return n.resolve||{}}function iw(n,t,e,r,i,s){return et(o=>ew(n,t,e,r,o.extractedUrl,i,s).pipe(he(({state:a,tree:u})=>me(X({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function sw(n,t){return et(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return de(e);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let _ of Ef(u))o.add(_);let a=0;return Ze(o).pipe(cn(u=>s.has(u)?ow(u,r,n,t):(u.data=ao(u,u.parent,n).resolve,de(void 0))),Ne(()=>a++),Fa(1),et(u=>a===o.size?de(e):un))})}function Ef(n){let t=n.children.map(e=>Ef(e)).flat();return[n,...t]}function ow(n,t,e,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!pf(i)&&(s[Ii]=i.title),aw(s,n,t,r).pipe(he(o=>(n._resolvedData=o,n.data=ao(n,n.parent,e).resolve,null)))}function aw(n,t,e,r){let i=vl(n);if(i.length===0)return de({});let s={};return Ze(i).pipe(et(o=>lw(n[o],t,e,r).pipe(dn(),Ne(a=>{if(a instanceof Si)throw uo(new vi,a);s[o]=a}))),Fa(1),Hd(s),jt(o=>yf(o)?un:In(o)))}function lw(n,t,e,r){let i=Oi(t)??r,s=_r(n,i),o=s.resolve?s.resolve(t,e):It(i,()=>s(t,e));return vn(o)}function ml(n){return gt(t=>{let e=n(t);return e?Ze(e).pipe(he(()=>t)):de(t)})}var Cf=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===pe);return r}getResolvedTitleForRoute(e){return e.data[Ii]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:()=>Z(uw),providedIn:"root"})}}return n})(),uw=(()=>{class n extends Cf{constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ee(zh))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wl=new ie("",{providedIn:"root",factory:()=>({})}),cw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=De({type:n,selectors:[["ng-component"]],standalone:!0,features:[Pe],decls:1,vars:0,template:function(r,i){r&1&&ge(0,"router-outlet")},dependencies:[Ai],encapsulation:2})}}return n})();function ql(n){let t=n.children&&n.children.map(ql),e=t?me(X({},n),{children:t}):X({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==pe&&(e.component=cw),e}var Kl=new ie(""),dw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Z(Qa)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return de(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=vn(e.loadComponent()).pipe(he(Sf),Ne(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),$t(()=>{this.componentLoaders.delete(e)})),i=new Ma(r,()=>new Xe).pipe(Pa());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=hw(r,this.compiler,e,this.onLoadEndListener).pipe($t(()=>{this.childrenLoaders.delete(r)})),o=new Ma(s,()=>new Xe).pipe(Pa());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hw(n,t,e,r){return vn(n.loadChildren()).pipe(he(Sf),et(i=>i instanceof hh||Array.isArray(i)?de(i):Ze(t.compileModuleAsync(i))),he(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(Kl,[],{optional:!0,self:!0}).flat()),{routes:o.map(ql),injector:s}}))}function fw(n){return n&&typeof n=="object"&&"default"in n}function Sf(n){return fw(n)?n.default:n}var Yl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:()=>Z(pw),providedIn:"root"})}}return n})(),pw=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mw=new ie("");var gw=new ie(""),vw=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=Z(dw),this.environmentInjector=Z(rr),this.urlSerializer=Z(Hl),this.rootContexts=Z(ho),this.location=Z(Bs),this.inputBindingEnabled=Z($l,{optional:!0})!==null,this.titleStrategy=Z(Cf),this.options=Z(Wl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Z(Yl),this.createViewTransition=Z(mw,{optional:!0}),this.navigationErrorHandler=Z(gw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>de(void 0),this.rootComponentType=null;let e=i=>this.events.next(new Tl(i)),r=i=>this.events.next(new Il(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(me(X(X({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:mi,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(s=>s.id!==0),he(s=>me(X({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),gt(s=>{let o=!1,a=!1;return de(s).pipe(gt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ut.SupersededByNewNavigation),un;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let _=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),I=u.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!_&&I!=="reload"){let T="";return this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.rawUrl),T,wl.IgnoredSameUrlNavigation)),u.resolve(!1),un}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return de(u).pipe(gt(T=>{let R=this.transitions?.getValue();return this.events.next(new _i(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),R!==this.transitions?.getValue()?un:Promise.resolve(T)}),iw(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(T=>{s.targetSnapshot=T.targetSnapshot,s.urlAfterRedirects=T.urlAfterRedirects,this.currentNavigation=me(X({},this.currentNavigation),{finalUrl:T.urlAfterRedirects});let R=new io(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(R)}));if(_&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:T,extractedUrl:R,source:f,restoredState:w,extras:m}=u,g=new _i(T,this.urlSerializer.serialize(R),f,w);this.events.next(g);let C=hf(this.rootComponentType).snapshot;return this.currentTransition=s=me(X({},u),{targetSnapshot:C,urlAfterRedirects:R,extras:me(X({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,de(s)}else{let T="";return this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.extractedUrl),T,wl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),un}}),Ne(u=>{let _=new El(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(_)}),he(u=>(this.currentTransition=s=me(X({},u),{guards:S_(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),N_(this.environmentInjector,u=>this.events.next(u)),Ne(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw uo(this.urlSerializer,u.guardsResult);let _=new Cl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(_)}),pt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ut.GuardRejected),!1)),ml(u=>{if(u.guards.canActivateChecks.length)return de(u).pipe(Ne(_=>{let I=new Sl(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(I)}),gt(_=>{let I=!1;return de(_).pipe(sw(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(_,"",ut.NoDataFromResolver)}}))}),Ne(_=>{let I=new Rl(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(I)}))}),ml(u=>{let _=I=>{let T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe(Ne(R=>{I.component=R}),he(()=>{})));for(let R of I.children)T.push(..._(R));return T};return Kr(_(u.targetSnapshot.root)).pipe(ja(null),mt(1))}),ml(()=>this.afterPreactivation()),gt(()=>{let{currentSnapshot:u,targetSnapshot:_}=s,I=this.createViewTransition?.(this.environmentInjector,u.root,_.root);return I?Ze(I).pipe(he(()=>s)):de(s)}),he(u=>{let _=b_(e.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=me(X({},u),{targetRouterState:_}),this.currentNavigation.targetRouterState=_,s}),Ne(()=>{this.events.next(new Ei)}),C_(this.rootContexts,e.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mt(1),Ne({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Rs(this.transitionAbortSubject.pipe(Ne(u=>{throw u}))),$t(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",ut.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),jt(u=>{if(a=!0,vf(u))this.events.next(new Qt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),E_(u)?this.events.next(new vr(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let _=new wi(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let I=It(this.environmentInjector,()=>this.navigationErrorHandler?.(_));if(I instanceof Si){let{message:T,cancellationCode:R}=uo(this.urlSerializer,I);this.events.next(new Qt(s.id,this.urlSerializer.serialize(s.extractedUrl),T,R)),this.events.next(new vr(I.redirectTo,I.navigationBehaviorOptions))}else{this.events.next(_);let T=e.errorHandler(u);s.resolve(!!T)}}catch(I){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(I)}}return un}))}))}cancelNavigationTransition(e,r,i){let s=new Qt(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yw(n){return n!==mi}var bw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:()=>Z(_w),providedIn:"root"})}}return n})(),zl=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},_w=(()=>{class n extends zl{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})()}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:()=>Z(ww),providedIn:"root"})}}return n})(),ww=(()=>{class n extends Rf{constructor(){super(...arguments),this.location=Z(Bs),this.urlSerializer=Z(Hl),this.options=Z(Wl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Z(Yl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hf(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof _i)this.stateMemento=this.createStateMemento();else if(e instanceof Fn)this.rawUrlTree=r.initialUrl;else if(e instanceof io){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof Ei?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof Qt&&(e.code===ut.GuardRejected||e.code===ut.NoDataFromResolver)?this.restoreHistory(r):e instanceof wi?this.restoreHistory(r,!0):e instanceof Ln&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof Jt?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=X(X({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=X(X({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})()}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fi=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fi||{});function Ew(n,t){n.events.pipe(pt(e=>e instanceof Ln||e instanceof Qt||e instanceof wi||e instanceof Fn),he(e=>e instanceof Ln||e instanceof Fn?fi.COMPLETE:(e instanceof Qt?e.code===ut.Redirect||e.code===ut.SupersededByNewNavigation:!1)?fi.REDIRECTING:fi.FAILED),pt(e=>e!==fi.REDIRECTING),mt(1)).subscribe(()=>{t()})}function Cw(n){throw n}var Sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Z(Ls),this.stateManager=Z(Rf),this.options=Z(Wl,{optional:!0})||{},this.pendingTasks=Z(Os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Z(vw),this.urlSerializer=Z(Hl),this.location=Z(Bs),this.urlHandlingStrategy=Z(Yl),this._events=new Xe,this.errorHandler=this.options.errorHandler||Cw,this.navigated=!1,this.routeReuseStrategy=Z(bw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Z(Kl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Z($l,{optional:!0}),this.eventsSubscription=new ys,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Qt&&r.code!==ut.Redirect&&r.code!==ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof vr){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=X({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yw(i.source)},o);this.scheduleNavigation(a,mi,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Iw(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=X({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ql),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,_=u?this.currentUrlTree.fragment:o,I=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":I=X(X({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}I!==null&&(I=this.removeEmptyProps(I));let T;try{let R=i?i.snapshot:this.routerState.snapshot.root;T=lf(R)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),T=this.currentUrlTree.root}return uf(T,e,I,_??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=yi(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,mi,null,r)}navigate(e,r={skipLocationChange:!1}){return Tw(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=X({},Sw):r===!1?i=X({},Rw):i=r,yi(e))return Gh(this.currentUrlTree,e,i);let s=this.parseUrl(e);return Gh(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,_;o?(a=o.resolve,u=o.reject,_=o.promise):_=new Promise((T,R)=>{a=T,u=R});let I=this.pendingTasks.add();return Ew(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:u,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tw(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new _e(4008,!1)}function Iw(n){return!(n instanceof Ei)&&!(n instanceof vr)}var Ow=new ie("");function Tf(n,...t){return vt([{provide:Kl,multi:!0,useValue:n},[],{provide:yr,useFactory:Aw,deps:[wr]},{provide:Ya,multi:!0,useFactory:xw},t.map(e=>e.\u0275providers)])}function Aw(n){return n.routerState.root}function xw(){let n=Z(Qr);return t=>{let e=n.get(Us);if(t!==e.components[0])return;let r=n.get(wr),i=n.get(kw);n.get(Dw)===1&&r.initialNavigation(),n.get(Pw,null,Ua.Optional)?.setUpPreloading(),n.get(Ow,null,Ua.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kw=new ie("",{factory:()=>new Xe}),Dw=new ie("",{providedIn:"root",factory:()=>1});var Pw=new ie("");var Nf=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(r){return new(r||n)(fe(ks),fe(je))}}static{this.\u0275dir=Fe({type:n})}}return n})(),Mw=(()=>{class n extends Nf{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,features:[kn]})}}return n})(),jf=new ie("");var Nw={provide:jf,useExisting:Ts(()=>Tr),multi:!0};function jw(){let n=ur()?ur().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Lw=new ie(""),Tr=(()=>{class n extends Nf{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!jw())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(r){return new(r||n)(fe(ks),fe(je),fe(Lw,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&xe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ft([Nw]),kn]})}}return n})();function yn(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Lf(n){return n!=null&&typeof n.length=="number"}var Ff=new ie(""),Uf=new ie(""),Fw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xt=class{static min(t){return Uw(t)}static max(t){return Bw(t)}static required(t){return Vw(t)}static requiredTrue(t){return zw(t)}static email(t){return Hw(t)}static minLength(t){return Gw(t)}static maxLength(t){return $w(t)}static pattern(t){return Ww(t)}static nullValidator(t){return Bf(t)}static compose(t){return Wf(t)}static composeAsync(t){return Kf(t)}};function Uw(n){return t=>{if(yn(t.value)||yn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Bw(n){return t=>{if(yn(t.value)||yn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Vw(n){return yn(n.value)?{required:!0}:null}function zw(n){return n.value===!0?null:{required:!0}}function Hw(n){return yn(n.value)||Fw.test(n.value)?null:{email:!0}}function Gw(n){return t=>yn(t.value)||!Lf(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function $w(n){return t=>Lf(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function Ww(n){if(!n)return Bf;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(yn(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function Bf(n){return null}function Vf(n){return n!=null}function zf(n){return Fs(n)?Ze(n):n}function Hf(n){let t={};return n.forEach(e=>{t=e!=null?X(X({},t),e):t}),Object.keys(t).length===0?null:t}function Gf(n,t){return t.map(e=>e(n))}function qw(n){return!n.validate}function $f(n){return n.map(t=>qw(t)?t:e=>t.validate(e))}function Wf(n){if(!n)return null;let t=n.filter(Vf);return t.length==0?null:function(e){return Hf(Gf(e,t))}}function qf(n){return n!=null?Wf($f(n)):null}function Kf(n){if(!n)return null;let t=n.filter(Vf);return t.length==0?null:function(e){let r=Gf(e,t).map(zf);return ws(r).pipe(he(Hf))}}function Yf(n){return n!=null?Kf($f(n)):null}function Of(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Qf(n){return n._rawValidators}function Jf(n){return n._rawAsyncValidators}function Ql(n){return n?Array.isArray(n)?n:[n]:[]}function mo(n,t){return Array.isArray(n)?n.includes(t):n===t}function Af(n,t){let e=Ql(t);return Ql(n).forEach(i=>{mo(e,i)||e.push(i)}),e}function xf(n,t){return Ql(t).filter(e=>!mo(n,e))}var go=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Yf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Sr=class extends go{get formDirective(){return null}get path(){return null}},Ni=class extends go{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},vo=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Kw={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bx=me(X({},Kw),{"[class.ng-submitted]":"isSubmitted"}),Eo=(()=>{class n extends vo{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||n)(fe(Ni,2))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Lt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[kn]})}}return n})(),Co=(()=>{class n extends vo{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||n)(fe(Sr,10))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Lt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[kn]})}}return n})();var ki="VALID",po="INVALID",Er="PENDING",Di="DISABLED",bn=class{},yo=class extends bn{constructor(t,e){super(),this.value=t,this.source=e}},Pi=class extends bn{constructor(t,e){super(),this.pristine=t,this.source=e}},Mi=class extends bn{constructor(t,e){super(),this.touched=t,this.source=e}},Cr=class extends bn{constructor(t,e){super(),this.status=t,this.source=e}},Jl=class extends bn{constructor(t){super(),this.source=t}},Xl=class extends bn{constructor(t){super(),this.source=t}};function Xf(n){return(So(n)?n.validators:n)||null}function Yw(n){return Array.isArray(n)?qf(n):n||null}function Zf(n,t){return(So(t)?t.asyncValidators:n)||null}function Qw(n){return Array.isArray(n)?Yf(n):n||null}function So(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Jw(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new _e(1e3,"");if(!r[e])throw new _e(1001,"")}function Xw(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new _e(1002,"")})}var bo=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Kt(()=>this.statusReactive()),this.statusReactive=hn(void 0),this._pristine=Kt(()=>this.pristineReactive()),this.pristineReactive=hn(!0),this._touched=Kt(()=>this.touchedReactive()),this.touchedReactive=hn(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Yt(this.statusReactive)}set status(t){Yt(()=>this.statusReactive.set(t))}get valid(){return this.status===ki}get invalid(){return this.status===po}get pending(){return this.status==Er}get disabled(){return this.status===Di}get enabled(){return this.status!==Di}get pristine(){return Yt(this.pristineReactive)}set pristine(t){Yt(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Yt(this.touchedReactive)}set touched(t){Yt(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Af(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Af(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(xf(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(xf(t,this._rawAsyncValidators))}hasValidator(t){return mo(this._rawValidators,t)}hasAsyncValidator(t){return mo(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(me(X({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Mi(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Mi(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(me(X({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Pi(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Pi(!0,r))}markAsPending(t={}){this.status=Er;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Cr(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(me(X({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Di,this.errors=null,this._forEachChild(i=>{i.disable(me(X({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new yo(this.value,r)),this._events.next(new Cr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(X({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ki,this._forEachChild(r=>{r.enable(me(X({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(me(X({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ki||this.status===Er)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new yo(this.value,e)),this._events.next(new Cr(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(me(X({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Di:ki}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Er,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=zf(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Cr(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Di:this.errors?po:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Er)?Er:this._anyControlsHaveStatus(po)?po:ki}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Pi(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Mi(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){So(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Yw(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Qw(this._rawAsyncValidators)}},Rr=class extends bo{constructor(t,e,r){super(Xf(e),Zf(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Xw(this,!0,t),Object.keys(t).forEach(r=>{Jw(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Zl=new ie("CallSetDisabledState",{providedIn:"root",factory:()=>Ro}),Ro="always";function Zw(n,t){return[...t.path,n]}function kf(n,t,e=Ro){eu(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),tE(n,t),rE(n,t),nE(n,t),eE(n,t)}function Df(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),wo(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _o(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function eE(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function eu(n,t){let e=Qf(n);t.validator!==null?n.setValidators(Of(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=Jf(n);t.asyncValidator!==null?n.setAsyncValidators(Of(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();_o(t._rawValidators,i),_o(t._rawAsyncValidators,i)}function wo(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=Qf(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.validator);s.length!==i.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let i=Jf(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.asyncValidator);s.length!==i.length&&(e=!0,n.setAsyncValidators(s))}}}let r=()=>{};return _o(t._rawValidators,r),_o(t._rawAsyncValidators,r),e}function tE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ep(n,t)})}function nE(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ep(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function ep(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rE(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function iE(n,t){n==null,eu(n,t)}function sE(n,t){return wo(n,t)}function oE(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function aE(n){return Object.getPrototypeOf(n.constructor)===Mw}function lE(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uE(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(s=>{s.constructor===Tr?e=s:aE(s)?r=s:i=s}),i||r||e||null}function cE(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Pf(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Mf(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Xt=class extends bo{constructor(t=null,e,r){super(Xf(e),Zf(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),So(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Mf(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Pf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Pf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Mf(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var dE=n=>n instanceof Xt;var To=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var tp=new ie("");var hE={provide:Sr,useExisting:Ts(()=>ji)},ji=(()=>{class n extends Sr{get submitted(){return Yt(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,r,i){super(),this.callSetDisabledState=i,this._submitted=Kt(()=>this._submittedReactive()),this._submittedReactive=hn(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yt,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return kf(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Df(e.control||null,e,!1),cE(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),lE(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Jl(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Xl(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Df(r||null,e),dE(i)&&(kf(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);iE(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&sE(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eu(this.form,this),this._oldForm&&wo(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(fe(Ff,10),fe(Uf,10),fe(Zl,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&xe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ft([hE]),kn,An]})}}return n})();var fE={provide:Ni,useExisting:Ts(()=>Li)},Li=(()=>{class n extends Ni{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new yt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uE(this,s)}ngOnChanges(e){this._added||this._setUpControl(),oE(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Zw(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(fe(Sr,13),fe(Ff,10),fe(Uf,10),fe(jf,10),fe(tp,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ft([fE]),kn,An]})}}return n})();var np=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({})}}return n})();var rp=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Zl,useValue:e.callSetDisabledState??Ro}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[np]})}}return n})(),Io=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:tp,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Zl,useValue:e.callSetDisabledState??Ro}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[np]})}}return n})();function tu(n,t){let e=!t?.manualCleanup;e&&!t?.injector&&eh(tu);let r=e?t?.injector?.get(Ha)??Z(Ha):null,i=mE(t?.equal),s;t?.requireSync?s=hn({kind:0},{equal:i}):s=hn({kind:1,value:t?.initialValue},{equal:i});let o=n.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(t?.rejectErrors)throw a;s.set({kind:2,error:a})}});if(t?.requireSync&&s().kind===0)throw new _e(601,!1);return r?.onDestroy(o.unsubscribe.bind(o)),Kt(()=>{let a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new _e(601,!1)}},{equal:t?.equal})}function mE(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}var su={};function Vi(n,t){if(su[n]=(su[n]||0)+1,typeof t=="function")return nu(n,(...r)=>me(X({},t(...r)),{type:n}));switch(t?t._as:"empty"){case"empty":return nu(n,()=>({type:n}));case"props":return nu(n,r=>me(X({},r),{type:n}));default:throw new Error("Unexpected config.")}}function uu(){return{_as:"props",_p:void 0}}function nu(n,t){return Object.defineProperty(t,"type",{value:n,writable:!1})}var _p="@ngrx/store/init",Ir=(()=>{class n extends Ke{constructor(){super({type:_p})}next(e){if(typeof e=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),gE=[Ir],wp=new ie("@ngrx/store Internal Root Guard"),sp=new ie("@ngrx/store Internal Initial State"),cu=new ie("@ngrx/store Initial State"),Ep=new ie("@ngrx/store Reducer Factory"),op=new ie("@ngrx/store Internal Reducer Factory Provider"),Cp=new ie("@ngrx/store Initial Reducers"),ru=new ie("@ngrx/store Internal Initial Reducers"),ap=new ie("@ngrx/store Store Features"),lp=new ie("@ngrx/store Internal Store Reducers"),iu=new ie("@ngrx/store Internal Feature Reducers"),up=new ie("@ngrx/store Internal Feature Configs"),Sp=new ie("@ngrx/store Internal Store Features"),cp=new ie("@ngrx/store Internal Feature Reducers Token"),Rp=new ie("@ngrx/store Feature Reducers"),dp=new ie("@ngrx/store User Provided Meta Reducers"),Oo=new ie("@ngrx/store Meta Reducers"),hp=new ie("@ngrx/store Internal Resolved Meta Reducers"),fp=new ie("@ngrx/store User Runtime Checks Config"),pp=new ie("@ngrx/store Internal User Runtime Checks Config"),Fi=new ie("@ngrx/store Internal Runtime Checks"),du=new ie("@ngrx/store Check if Action types are unique"),Ui=new ie("@ngrx/store Root Store Provider"),Ao=new ie("@ngrx/store Feature State Provider");function hu(n,t={}){let e=Object.keys(n),r={};for(let s=0;s<e.length;s++){let o=e[s];typeof n[o]=="function"&&(r[o]=n[o])}let i=Object.keys(r);return function(o,a){o=o===void 0?t:o;let u=!1,_={};for(let I=0;I<i.length;I++){let T=i[I],R=r[T],f=o[T],w=R(f,a);_[T]=w,u=u||w!==f}return u?_:o}}function vE(n,t){return Object.keys(n).filter(e=>e!==t).reduce((e,r)=>Object.assign(e,{[r]:n[r]}),{})}function Tp(...n){return function(t){if(n.length===0)return t;let e=n[n.length-1];return n.slice(0,-1).reduceRight((i,s)=>s(i),e(t))}}function Ip(n,t){return Array.isArray(t)&&t.length>0&&(n=Tp.apply(null,[...t,n])),(e,r)=>{let i=n(e);return(s,o)=>(s=s===void 0?r:s,i(s,o))}}function yE(n){let t=Array.isArray(n)&&n.length>0?Tp(...n):e=>e;return(e,r)=>(e=t(e),(i,s)=>(i=i===void 0?r:i,e(i,s)))}var Bi=class extends Tt{},xo=class extends Ir{},bE="@ngrx/store/update-reducers",ko=(()=>{class n extends Ke{get currentReducers(){return this.reducers}constructor(e,r,i,s){super(s(i,r)),this.dispatcher=e,this.initialState=r,this.reducers=i,this.reducerFactory=s}addFeature(e){this.addFeatures([e])}addFeatures(e){let r=e.reduce((i,{reducers:s,reducerFactory:o,metaReducers:a,initialState:u,key:_})=>{let I=typeof s=="function"?yE(a)(s,u):Ip(o,a)(s,u);return i[_]=I,i},{});this.addReducers(r)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(r=>r.key))}addReducer(e,r){this.addReducers({[e]:r})}addReducers(e){this.reducers=X(X({},this.reducers),e),this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(r=>{this.reducers=vE(this.reducers,r)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:bE,features:e})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(r){return new(r||n)(ee(xo),ee(cu),ee(Cp),ee(Ep))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),_E=[ko,{provide:Bi,useExisting:ko},{provide:xo,useExisting:Ir}],zi=(()=>{class n extends Xe{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=xn(n)))(i||n)}})()}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),wE=[zi],Do=class extends Tt{},mp=(()=>{class n extends Ke{static{this.INIT=_p}constructor(e,r,i,s){super(s);let a=e.pipe(Fd(Ld)).pipe(Jd(r)),u={state:s},_=a.pipe(Cs(EE,u));this.stateSubscription=_.subscribe(({state:I,action:T})=>{this.next(I),i.next(T)}),this.state=tu(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static{this.\u0275fac=function(r){return new(r||n)(ee(Ir),ee(Bi),ee(zi),ee(cu))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})();function EE(n={state:void 0},[t,e]){let{state:r}=n;return{state:e(r,t),action:t}}var CE=[mp,{provide:Do,useExisting:mp}],Zt=(()=>{class n extends Tt{constructor(e,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=e,this.state=e.state}select(e,...r){return RE.call(null,e,...r)(this)}selectSignal(e,r){return Kt(()=>e(this.state()),r)}lift(e){let r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=e,r}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,r){this.reducerManager.addReducer(e,r)}removeReducer(e){this.reducerManager.removeReducer(e)}static{this.\u0275fac=function(r){return new(r||n)(ee(Do),ee(Ir),ee(ko))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),SE=[Zt];function RE(n,t,...e){return function(i){let s;if(typeof n=="string"){let o=[t,...e].filter(Boolean);s=i.pipe(Kd(n,...o))}else if(typeof n=="function")s=i.pipe(he(o=>n(o,t)));else throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);return s.pipe($d())}}var fu="https://ngrx.io/guide/store/configuration/runtime-checks";function gp(n){return n===void 0}function vp(n){return n===null}function Op(n){return Array.isArray(n)}function TE(n){return typeof n=="string"}function IE(n){return typeof n=="boolean"}function OE(n){return typeof n=="number"}function Ap(n){return typeof n=="object"&&n!==null}function AE(n){return Ap(n)&&!Op(n)}function xE(n){if(!AE(n))return!1;let t=Object.getPrototypeOf(n);return t===Object.prototype||t===null}function ou(n){return typeof n=="function"}function kE(n){return ou(n)&&n.hasOwnProperty("\u0275cmp")}function DE(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var PE=!1;function ME(){return PE}function yp(n,t){return n===t}function NE(n,t,e){for(let r=0;r<n.length;r++)if(!e(n[r],t[r]))return!0;return!1}function xp(n,t=yp,e=yp){let r=null,i=null,s;function o(){r=null,i=null}function a(I=void 0){s={result:I}}function u(){s=void 0}function _(){if(s!==void 0)return s.result;if(!r)return i=n.apply(null,arguments),r=arguments,i;if(!NE(arguments,r,t))return i;let I=n.apply(null,arguments);return r=arguments,e(i,I)?i:(i=I,I)}return{memoized:_,reset:o,setResult:a,clearResult:u}}function pu(...n){return LE(xp)(...n)}function jE(n,t,e,r){if(e===void 0){let s=t.map(o=>o(n));return r.memoized.apply(null,s)}let i=t.map(s=>s(n,e));return r.memoized.apply(null,[...i,e])}function LE(n,t={stateFn:jE}){return function(...e){let r=e;if(Array.isArray(r[0])){let[I,...T]=r;r=[...I,...T]}else r.length===1&&FE(r[0])&&(r=UE(r[0]));let i=r.slice(0,r.length-1),s=r[r.length-1],o=i.filter(I=>I.release&&typeof I.release=="function"),a=n(function(...I){return s.apply(null,I)}),u=xp(function(I,T){return t.stateFn.apply(null,[I,i,T,a])});function _(){u.reset(),a.reset(),o.forEach(I=>I.release())}return Object.assign(u.memoized,{release:_,projector:a.memoized,setResult:u.setResult,clearResult:u.clearResult})}}function kp(n){return pu(t=>{let e=t[n];return!ME()&&Ja()&&!(n in t)&&console.warn(`@ngrx/store: The feature name "${n}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${n}', ...) or StoreModule.forFeature('${n}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function FE(n){return!!n&&typeof n=="object"&&Object.values(n).every(t=>typeof t=="function")}function UE(n){let t=Object.values(n),e=Object.keys(n),r=(...i)=>e.reduce((s,o,a)=>me(X({},s),{[o]:i[a]}),{});return[...t,r]}function BE(n){return n instanceof ie?Z(n):n}function VE(n,t){return t.map((e,r)=>{if(n[r]instanceof ie){let i=Z(n[r]);return{key:e.key,reducerFactory:i.reducerFactory?i.reducerFactory:hu,metaReducers:i.metaReducers?i.metaReducers:[],initialState:i.initialState}}return e})}function zE(n){return n.map(t=>t instanceof ie?Z(t):t)}function Dp(n){return typeof n=="function"?n():n}function HE(n,t){return n.concat(t)}function GE(){if(Z(Zt,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function $E(n,t){return function(e,r){let i=t.action(r)?au(r):r,s=n(e,i);return t.state()?au(s):s}}function au(n){Object.freeze(n);let t=ou(n);return Object.getOwnPropertyNames(n).forEach(e=>{if(!e.startsWith("\u0275")&&DE(n,e)&&(!t||e!=="caller"&&e!=="callee"&&e!=="arguments")){let r=n[e];(Ap(r)||ou(r))&&!Object.isFrozen(r)&&au(r)}}),n}function WE(n,t){return function(e,r){if(t.action(r)){let s=lu(r);bp(s,"action")}let i=n(e,r);if(t.state()){let s=lu(i);bp(s,"state")}return i}}function lu(n,t=[]){return(gp(n)||vp(n))&&t.length===0?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;let s=n[i];return kE(s)?r:gp(s)||vp(s)||OE(s)||IE(s)||TE(s)||Op(s)?!1:xE(s)?lu(s,[...t,i]):{path:[...t,i],value:s}},!1)}function bp(n,t){if(n===!1)return;let e=n.path.join("."),r=new Error(`Detected unserializable ${t} at "${e}". ${fu}#strict${t}serializability`);throw r.value=n.value,r.unserializablePath=e,r}function qE(n,t){return function(e,r){if(t.action(r)&&!Ue.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${fu}#strictactionwithinngzone`);return n(e,r)}}function KE(n){return Ja()?X({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},n):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function YE({strictActionSerializability:n,strictStateSerializability:t}){return e=>n||t?WE(e,{action:r=>n&&!mu(r),state:()=>t}):e}function QE({strictActionImmutability:n,strictStateImmutability:t}){return e=>n||t?$E(e,{action:r=>n&&!mu(r),state:()=>t}):e}function mu(n){return n.type.startsWith("@ngrx")}function JE({strictActionWithinNgZone:n}){return t=>n?qE(t,{action:e=>n&&!mu(e)}):t}function XE(n){return[{provide:pp,useValue:n},{provide:fp,useFactory:ZE,deps:[pp]},{provide:Fi,deps:[fp],useFactory:KE},{provide:Oo,multi:!0,deps:[Fi],useFactory:QE},{provide:Oo,multi:!0,deps:[Fi],useFactory:YE},{provide:Oo,multi:!0,deps:[Fi],useFactory:JE}]}function Pp(){return[{provide:du,multi:!0,deps:[Fi],useFactory:eC}]}function ZE(n){return n}function eC(n){if(!n.strictActionTypeUniqueness)return;let t=Object.entries(su).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${fu}#strictactiontypeuniqueness`)}function Mp(n,t,e={}){return vt([...oC(n,t,e),sC])}function tC(n={},t={}){return[{provide:wp,useFactory:GE},{provide:sp,useValue:t.initialState},{provide:cu,useFactory:Dp,deps:[sp]},{provide:ru,useValue:n},{provide:lp,useExisting:n instanceof ie?n:ru},{provide:Cp,deps:[ru,[new Ba(lp)]],useFactory:BE},{provide:dp,useValue:t.metaReducers?t.metaReducers:[]},{provide:hp,deps:[Oo,dp],useFactory:HE},{provide:op,useValue:t.reducerFactory?t.reducerFactory:hu},{provide:Ep,deps:[op,hp],useFactory:Ip},gE,_E,wE,CE,SE,XE(t.runtimeChecks),Pp()]}function nC(){Z(Ir),Z(Bi),Z(zi),Z(Zt),Z(wp,{optional:!0}),Z(du,{optional:!0})}var rC=[{provide:Ui,useFactory:nC},{provide:On,multi:!0,useFactory(){return()=>Z(Ui)}}];function Np(n,t){return vt([...tC(n,t),rC])}function iC(){Z(Ui);let n=Z(Sp),t=Z(Rp),e=Z(ko);Z(du,{optional:!0});let r=n.map((i,s)=>{let a=t.shift()[s];return me(X({},i),{reducers:a,initialState:Dp(i.initialState)})});e.addFeatures(r)}var sC=[{provide:Ao,useFactory:iC},{provide:On,multi:!0,useFactory(){return()=>Z(Ao)}}];function oC(n,t,e={}){return[{provide:up,multi:!0,useValue:n instanceof Object?{}:e},{provide:ap,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:!(e instanceof ie)&&e.reducerFactory?e.reducerFactory:hu,metaReducers:!(e instanceof ie)&&e.metaReducers?e.metaReducers:[],initialState:!(e instanceof ie)&&e.initialState?e.initialState:void 0}},{provide:Sp,deps:[up,ap],useFactory:VE},{provide:iu,multi:!0,useValue:n instanceof Object?n.reducer:t},{provide:cp,multi:!0,useExisting:t instanceof ie?t:iu},{provide:Rp,multi:!0,deps:[iu,[new Ba(cp)]],useFactory:zE},Pp()]}function jp(...n){let t=n.pop(),e=n.map(r=>r.type);return{reducer:t,types:e}}function Lp(n,...t){let e=new Map;for(let r of t)for(let i of r.types){let s=e.get(i);if(s){let o=(a,u)=>r.reducer(s(a,u),u);e.set(i,o)}else e.set(i,r.reducer)}return function(r=n,i){let s=e.get(i.type);return s?s(r,i):r}}var gu="[Login Component] login",aC="[Effect] logged in successfully",Up=Vi(gu,uu()),Po=Vi(aC,uu());var lC=kp("user"),Bp=pu(lC,n=>n);var Mo=class n{constructor(t,e){this.store=t;this.router=e;this.store.select(Bp).subscribe(r=>{r.email.length!==0&&(localStorage.setItem("email",r.email),localStorage.setItem("objectId",r.objectId),localStorage.setItem("userToken",r.userToken),localStorage.setItem("type",r.type))}),localStorage.getItem("email")!==null&&localStorage.getItem("objectId")!==null&&localStorage.getItem("userToken")!==null&&localStorage.getItem("type")!==null&&this.router.navigate(["/dashboard"])}loginGroup=new Rr({email:new Xt("",[xt.required,xt.email]),password:new Xt("",[xt.required])});login(){this.loginGroup.valid&&this.store.dispatch(Up({email:this.loginGroup.value.email,password:this.loginGroup.value.password}))}static \u0275fac=function(e){return new(e||n)(fe(Zt),fe(wr))};static \u0275cmp=De({type:n,selectors:[["app-login"]],standalone:!0,features:[Pe],decls:19,vars:1,consts:[[1,"login-div"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"input-class"],[2,"font-weight","bolder"],["placeholder","Email","formControlName","email"],["placeholder","Password","formControlName","password","type","password"],[1,"login-btn",3,"click"],[2,"display","flex"],[2,"all","unset","font-weight","bold","margin-left","4px","cursor","pointer"]],template:function(e,r){e&1&&(Q(0,"div",0)(1,"h2"),te(2,"Log In Your Account"),J(),Q(3,"form",1),xe("ngSubmit",function(){return r.login()}),Q(4,"div",2)(5,"label",3),te(6,"Email"),J(),ge(7,"input",4),J(),Q(8,"div",2)(9,"label",3),te(10,"Password"),J(),ge(11,"input",5),J(),Q(12,"button",6),xe("click",function(){return r.login()}),te(13,"Log In"),J()(),Q(14,"div",7)(15,"p"),te(16,"Don't Have An Account?"),J(),Q(17,"a",8),te(18,"Sign Up"),J()()()),e&2&&(tt(3),bt("formGroup",r.loginGroup))},dependencies:[Io,To,Tr,Eo,Co,ji,Li],styles:[".login-div[_ngcontent-%COMP%]{padding-left:8vw;padding-right:8vw;height:600px;display:flex;flex-direction:column;justify-content:center}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{height:360px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .input-class[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:40%}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;outline-width:0;border:none;border-radius:999px;padding-left:12px;margin-top:6px}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{height:40px;width:40%;border:none;border-radius:6px;font-weight:bolder;font-size:1rem;background-color:#ffd701;cursor:pointer}@media only screen and (max-width: 599px){.login-div[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;height:500px;display:flex;flex-direction:column;justify-content:center}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{height:360px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .input-class[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;outline-width:0;border:none;border-radius:999px;padding-left:12px;margin-top:6px}.login-div[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{height:40px;width:100%;border:none;border-radius:6px;font-weight:bolder;font-size:1rem;background-color:#ffd701}}"]})};var No=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=De({type:n,selectors:[["app-home"]],standalone:!0,features:[Pe],decls:0,vars:0,template:function(e,r){}})};var vu;try{vu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vu=!1}var Un=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Eh(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||vu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||n)(ee(qt))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hi;function uC(){if(Hi==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Hi=!0}))}finally{Hi=Hi||!1}return Hi}function yu(n){return uC()?n:!!n.capture}function Vp(n){return n.composedPath?n.composedPath()[0]:n.target}function zp(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function _u(n){return Array.isArray(n)?n:[n]}function wu(n){return n instanceof je?n.nativeElement:n}var cC=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({providers:[cC]})}}return n})();var Gp=new Set,Bn,dC=(()=>{class n{constructor(e,r){this._platform=e,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fC}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&hC(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(r){return new(r||n)(ee(Un),ee(Jr,8))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hC(n,t){if(!Gp.has(n))try{Bn||(Bn=document.createElement("style"),t&&Bn.setAttribute("nonce",t),Bn.setAttribute("type","text/css"),document.head.appendChild(Bn)),Bn.sheet&&(Bn.sheet.insertRule(`@media ${n} {body{ }}`,0),Gp.add(n))}catch(e){console.error(e)}}function fC(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Wp=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new Xe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return $p(_u(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=$p(_u(e)).map(o=>this._registerQuery(o).observable),s=Kr(i);return s=bs(s.pipe(mt(1)),s.pipe(Qd(1),Vd(0))),s.pipe(he(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:_})=>{a.matches=a.matches||u,a.breakpoints[_]=u}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let r=this._mediaMatcher.matchMedia(e),s={observable:new Tt(o=>{let a=u=>this._zone.run(()=>o.next(u));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ss(r),he(({matches:o})=>({query:e,matches:o})),Rs(this._destroySubject)),mql:r};return this._queries.set(e,s),s}static{this.\u0275fac=function(r){return new(r||n)(ee(dC),ee(Ue))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $p(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Yp(n){return n.buttons===0||n.detail===0}function Qp(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Vn=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Vn||{}),qp="cdk-high-contrast-black-on-white",Kp="cdk-high-contrast-white-on-black",Eu="cdk-high-contrast-active",Jp=(()=>{class n{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=Z(Wp).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Vn.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Vn.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Vn.BLACK_ON_WHITE}return Vn.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Eu,qp,Kp),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Vn.BLACK_ON_WHITE?e.add(Eu,qp):r===Vn.WHITE_ON_BLACK&&e.add(Eu,Kp)}}static{this.\u0275fac=function(r){return new(r||n)(ee(Un),ee(Ie))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Cu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({})}}return n})();function gC(){return!0}var vC=new ie("mat-sanity-checks",{providedIn:"root",factory:gC}),Et=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return zp()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(r){return new(r||n)(ee(Jp),ee(vC,8),ee(Ie))}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[Cu,Cu]})}}return n})();var wt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(wt||{}),Su=class{constructor(t,e,r,i=!1){this._renderer=t,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=wt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Xp=yu({passive:!0,capture:!0}),Ru=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Vp(t);e&&this._events.get(t.type)?.forEach((r,i)=>{(i===e||i.contains(e))&&r.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,r,i){let s=this._events.get(e);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(e,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Xp)})}removeHandler(t,e,r){let i=this._events.get(t);if(!i)return;let s=i.get(e);s&&(s.delete(r),s.size===0&&i.delete(e),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Xp)))}},Zp={enterDuration:225,exitDuration:150},yC=800,em=yu({passive:!0,capture:!0}),tm=["mousedown","touchstart"],nm=["mouseup","mouseleave","touchend","touchcancel"],rm=class n{static{this._eventManager=new Ru}constructor(t,e,r,i){this._target=t,this._ngZone=e,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=wu(r))}fadeInRipple(t,e,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=X(X({},Zp),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);let o=r.radius||bC(t,e,i),a=t-i.left,u=e-i.top,_=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=`${a-o}px`,I.style.top=`${u-o}px`,I.style.height=`${o*2}px`,I.style.width=`${o*2}px`,r.color!=null&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(I);let T=window.getComputedStyle(I),R=T.transitionProperty,f=T.transitionDuration,w=R==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,m=new Su(this,I,r,w);I.style.transform="scale3d(1, 1, 1)",m.state=wt.FADING_IN,r.persistent||(this._mostRecentTransientRipple=m);let g=null;return!w&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let C=()=>{g&&(g.fallbackTimer=null),clearTimeout(c),this._finishRippleTransition(m)},p=()=>this._destroyRipple(m),c=setTimeout(p,_+100);I.addEventListener("transitionend",C),I.addEventListener("transitioncancel",p),g={onTransitionEnd:C,onTransitionCancel:p,fallbackTimer:c}}),this._activeRipples.set(m,g),(w||!_)&&this._finishRippleTransition(m),m}fadeOutRipple(t){if(t.state===wt.FADING_OUT||t.state===wt.HIDDEN)return;let e=t.element,r=X(X({},Zp),t.config.animation);e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",t.state=wt.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=wu(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,tm.forEach(r=>{n._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{nm.forEach(e=>{this._triggerElement.addEventListener(e,this,em)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===wt.FADING_IN?this._startFadeOutTransition(t):t.state===wt.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=wt.VISIBLE,!r&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=wt.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Yp(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+yC;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Qp(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===wt.VISIBLE||t.config.terminateOnPointerUp&&t.state===wt.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(tm.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(nm.forEach(e=>t.removeEventListener(e,this,em)),this._pointerUpEventsRegistered=!1))}};function bC(n,t,e){let r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}var _C=["*"],jo;function wC(){if(jo===void 0&&(jo=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(jo=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return jo}function Gi(n){return wC()?.createHTML(n)||n}function sm(n){return Error(`Unable to find icon with the name "${n}"`)}function EC(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function om(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function am(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var en=class{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},CC=(()=>{class n{constructor(e,r,i,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,s){return this._addSvgIconConfig(e,r,new en(i,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,s){let o=this._sanitizer.sanitize(at.HTML,i);if(!o)throw am(i);let a=Gi(o);return this._addSvgIconConfig(e,r,new en("",a,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new en(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){let s=this._sanitizer.sanitize(at.HTML,r);if(!s)throw am(r);let o=Gi(s);return this._addSvgIconSetConfig(e,new en("",o,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(at.RESOURCE_URL,e);if(!r)throw om(e);let i=this._cachedIconsByUrl.get(r);return i?de(Lo(i)):this._loadSvgIconFromConfig(new en(e,null)).pipe(Ne(s=>this._cachedIconsByUrl.set(r,s)),he(s=>Lo(s)))}getNamedSvgIcon(e,r=""){let i=lm(r,e),s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(e,o):In(sm(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?de(Lo(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(he(r=>Lo(r)))}_getSvgFromIconSetConfigs(e,r){let i=this._extractIconWithNameFromAnySet(e,r);if(i)return de(i);let s=r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(jt(a=>{let _=`Loading icon set URL: ${this._sanitizer.sanitize(at.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(_)),de(null)})));return ws(s).pipe(he(()=>{let o=this._extractIconWithNameFromAnySet(e,r);if(!o)throw sm(e);return o}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){let s=r[i];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ne(r=>e.svgText=r),he(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?de(null):this._fetchIcon(e).pipe(Ne(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){let s=e.querySelector(`[id="${r}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,i);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),i);let a=this._svgElementFromString(Gi("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let r=this._svgElementFromString(Gi("<svg></svg>")),i=e.attributes;for(let s=0;s<i.length;s++){let{name:o,value:a}=i[s];o!=="id"&&r.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:i}=e,s=i?.withCredentials??!1;if(!this._httpClient)throw EC();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let o=this._sanitizer.sanitize(at.RESOURCE_URL,r);if(!o)throw om(r);let a=this._inProgressUrlFetches.get(o);if(a)return a;let u=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(he(_=>Gi(_)),$t(()=>this._inProgressUrlFetches.delete(o)),Yd());return this._inProgressUrlFetches.set(o,u),u}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(lm(e,r),i),this}_addSvgIconSetConfig(e,r){let i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){let s=this._resolvers[i](r,e);if(s)return SC(s)?new en(s.url,null,s.options):new en(s,null)}}static{this.\u0275fac=function(r){return new(r||n)(ee(Mn,8),ee(dl),ee(Ie,8),ee(Wt))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lo(n){return n.cloneNode(!0)}function lm(n,t){return n+":"+t}function SC(n){return!!(n.url&&n.options)}var RC=new ie("MAT_ICON_DEFAULT_OPTIONS"),TC=new ie("mat-icon-location",{providedIn:"root",factory:IC});function IC(){let n=Z(Ie),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var um=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],OC=um.map(n=>`[${n}]`).join(", "),AC=/^url\(['"]?#(.*?)['"]?\)$/,Ar=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,i,s,o,a){this._elementRef=e,this._iconRegistry=r,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ys.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=e.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(OC),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)um.forEach(o=>{let a=r[s],u=a.getAttribute(o),_=u?u.match(AC):null;if(_){let I=i.get(a);I||(I=[],i.set(a,I)),I.push({name:o,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(mt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${r}:${i}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(r){return new(r||n)(fe(je),fe(CC),Is("aria-hidden"),fe(TC),fe(Wt),fe(RC,8))}}static{this.\u0275cmp=De({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(fn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Ps(i.color?"mat-"+i.color:""),Lt("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",lr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Dn,Pe],ngContentSelectors:_C,decls:1,vars:0,template:function(r,i){r&1&&(or(),Pn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),_n=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[Et,Et]})}}return n})();var Fo=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=De({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[Pe],decls:21,vars:0,consts:[[1,"panel"],[1,"panel-nav"],[1,"info-div"],[2,"font-weight","bold"],[2,"margin-top","16px"],[1,"panel-result"]],template:function(e,r){e&1&&(Q(0,"header")(1,"p"),te(2,"Dashboard"),J()(),Q(3,"ul",0)(4,"li",1)(5,"div",2)(6,"p",3),te(7,"Abdelillah Tamoussat"),J(),Q(8,"p"),te(9,"atamossat@gmail.com"),J()(),Q(10,"div",4)(11,"a")(12,"mat-icon"),te(13,"settings"),J(),te(14,"Settings"),J(),Q(15,"a")(16,"mat-icon"),te(17,"logout"),J(),te(18,"Log Out"),J()()(),Q(19,"li",5),ge(20,"router-outlet"),J()())},dependencies:[Ai,_n,Ar],styles:["header[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:center;width:100%;padding:24px}header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2rem}.panel[_ngcontent-%COMP%]{display:flex;width:100%;list-style-type:none;padding-left:8vw;padding-right:8vw;justify-content:space-between;margin-top:4%}.panel[_ngcontent-%COMP%]   .panel-nav[_ngcontent-%COMP%]{flex-basis:25%;background-color:#fff;border-radius:12px;display:flex;flex-direction:column;padding:16px;height:fit-content}.panel[_ngcontent-%COMP%]   .panel-nav[_ngcontent-%COMP%]   .info-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:8px}.panel[_ngcontent-%COMP%]   .panel-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;color:#1e1e1e}.panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-basis:70%}@media only screen and (max-width: 599px){.panel[_ngcontent-%COMP%]{flex-direction:column;padding-left:16px;padding-right:16px}.panel[_ngcontent-%COMP%]   .panel-result[_ngcontent-%COMP%]{margin-top:16px}}"]})};var Uo=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=De({type:n,selectors:[["app-settings"]],standalone:!0,features:[Pe],decls:24,vars:0,consts:[[1,"settings"],[2,"display","flex","flex-direction","column","margin-top","20px"],["placeholder","First Name"],["placeholder","Last Name"],["placeholder","Email"]],template:function(e,r){e&1&&(Q(0,"div",0)(1,"h2"),te(2,"Account Details"),J(),Q(3,"form",1)(4,"label"),te(5,"First Name"),J(),ge(6,"input",2),Q(7,"label"),te(8,"Last Name"),J(),ge(9,"input",3),Q(10,"label"),te(11,"Email"),J(),ge(12,"input",4),Q(13,"h2"),te(14,"Password Change"),J(),Q(15,"label"),te(16,"Current Password"),J(),ge(17,"input"),Q(18,"label"),te(19,"New Password"),J(),ge(20,"input"),Q(21,"label"),te(22,"Confirm New Password"),J(),ge(23,"input"),J()())},styles:[".settings[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:12px;padding-left:20px;padding-right:20px;padding-bottom:20px}.settings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-top:36px}.settings[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-top:20px}.settings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background-color:#e9e8e8;border-radius:999px;height:40px;padding-left:16px;padding-right:16px;margin-top:12px}@media only screen and (max-width: 599px){.settings[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.settings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}"]})};var $i=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[Et,ni,Hp,Et]})}}return n})();var cm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({})}}return n})();var dm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[Et,$i,$i,cm,Et]})}}return n})();var Iu={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var ne=function(n,t){if(!n)throw zn(t)},zn=function(n){return new Error("Firebase Database ("+Iu.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var fm=function(n){let t=[],e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},xC=function(n){let t=[],e=0,r=0;for(;e<n.length;){let i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[e++],o=n[e++],a=n[e++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[e++],o=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Vo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,_=u?n[i+2]:0,I=s>>2,T=(s&3)<<4|a>>4,R=(a&15)<<2|_>>6,f=_&63;u||(f=64,o||(R=64)),r.push(e[I],e[T],e[R],e[f])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(fm(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):xC(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=e[n.charAt(i++)],a=i<n.length?e[n.charAt(i)]:0;++i;let _=i<n.length?e[n.charAt(i)]:64;++i;let T=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||a==null||_==null||T==null)throw new Ou;let R=s<<2|a>>4;if(r.push(R),_!==64){let f=a<<4&240|_>>2;if(r.push(f),T!==64){let w=_<<6&192|T;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ou=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xu=function(n){let t=fm(n);return Vo.encodeByteArray(t,!0)},Wi=function(n){return xu(n).replace(/\./g,"")},Au=function(n){try{return Vo.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pm(n){return mm(void 0,n)}function mm(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(let e in t)!t.hasOwnProperty(e)||!kC(e)||(n[e]=mm(n[e],t[e]));return n}function kC(n){return n!=="__proto__"}function DC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PC=()=>DC().__FIREBASE_DEFAULTS__,MC=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&Au(n[1]);return t&&JSON.parse(t)},gm=()=>{try{return PC()||MC()||NC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jC=n=>{var t,e;return(e=(t=gm())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},zo=n=>{let t=jC(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},ku=()=>{var n;return(n=gm())===null||n===void 0?void 0:n.config};var wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}};function Ho(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wi(JSON.stringify(e)),Wi(JSON.stringify(o)),""].join(".")}function LC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Du(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(LC())}function vm(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ym(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bt(){return Iu.NODE_CLIENT===!0||Iu.NODE_ADMIN===!0}function Go(){try{return typeof indexedDB=="object"}catch{return!1}}function $o(){return new Promise((n,t)=>{try{let e=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}function bm(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var FC="FirebaseError",ct=class n extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=FC,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}},tn=class{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){let r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?UC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ct(i,a,r)}};function UC(n,t){return n.replace(BC,(e,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var BC=/\{\$([^}]+)}/g;function xr(n){return JSON.parse(n)}function ze(n){return JSON.stringify(n)}var _m=function(n){let t={},e={},r={},i="";try{let s=n.split(".");t=xr(Au(s[0])||""),e=xr(Au(s[1])||""),i=s[2],r=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:r,signature:i}};var wm=function(n){let t=_m(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},Em=function(n){let t=_m(n).claims;return typeof t=="object"&&t.admin===!0};function Vt(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Hn(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function Pu(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function qi(n,t,e){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=t.call(e,n[i],i,n));return r}function kr(n,t){if(n===t)return!0;let e=Object.keys(n),r=Object.keys(t);for(let i of e){if(!r.includes(i))return!1;let s=n[i],o=t[i];if(hm(s)&&hm(o)){if(!kr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!e.includes(i))return!1;return!0}function hm(n){return n!==null&&typeof n=="object"}function Cm(n){let t=[];for(let[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Bo=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);let r=this.W_;if(typeof t=="string")for(let T=0;T<16;T++)r[T]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let T=0;T<16;T++)r[T]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let T=16;T<80;T++){let R=r[T-3]^r[T-8]^r[T-14]^r[T-16];r[T]=(R<<1|R>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],_,I;for(let T=0;T<80;T++){T<40?T<20?(_=a^s&(o^a),I=1518500249):(_=s^o^a,I=1859775393):T<60?(_=s&o|a&(s|o),I=2400959708):(_=s^o^a,I=3395469782);let R=(i<<5|i>>>27)+_+u+I+r[T]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=R}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);let r=e-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<e;){if(o===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(s[o]=t.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<e;)if(s[o]=t[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){let t=[],e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=e&255,e/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[i]>>s&255,++r;return t}};function Wo(n,t){return`${n} failed: ${t} argument `}var Sm=function(n){let t=[],e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,ne(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):i<65536?(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},Ki=function(n){let t=0;for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,e++):t+=3}return t};var VC=1e3,zC=2,HC=4*60*60*1e3,GC=.5;function Mu(n,t=VC,e=zC){let r=t*Math.pow(e,n),i=Math.round(GC*r*(Math.random()-.5)*2);return Math.min(HC,r+i)}function rt(n){return n&&n._delegate?n._delegate:n}var Ge=class{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Gn="[DEFAULT]";var qo=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let r=new wn;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(WC(t))try{this.getOrInitializeService({instanceIdentifier:Gn})}catch{}for(let[e,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Gn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return ce(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Gn){return this.instances.has(t)}getOptions(t=Gn){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,e){var r;let i=this.normalizeInstanceIdentifier(e),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let r=this.onInitCallbacks.get(e);if(r)for(let i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$C(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gn){return this.component?this.component.multipleInstances?t:Gn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $C(n){return n===Gn?void 0:n}function WC(n){return n.instantiationMode==="EAGER"}var Yi=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new qo(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var qC=[],Oe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Oe||{}),KC={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},YC=Oe.INFO,QC={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},JC=(n,t,...e)=>{if(t<n.logLevel)return;let r=new Date().toISOString(),i=QC[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},En=class{constructor(t){this.name=t,this._logLevel=YC,this._logHandler=JC,this._userLogHandler=null,qC.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Oe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...t),this._logHandler(this,Oe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...t),this._logHandler(this,Oe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...t),this._logHandler(this,Oe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...t),this._logHandler(this,Oe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...t),this._logHandler(this,Oe.ERROR,...t)}};var XC=(n,t)=>t.some(e=>n instanceof e),Rm,Tm;function ZC(){return Rm||(Rm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e0(){return Tm||(Tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Im=new WeakMap,ju=new WeakMap,Om=new WeakMap,Nu=new WeakMap,Fu=new WeakMap;function t0(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(zt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Im.set(e,n)}).catch(()=>{}),Fu.set(t,n),t}function n0(n){if(ju.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ju.set(n,t)}var Lu={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return ju.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Om.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return zt(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Am(n){Lu=n(Lu)}function r0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let r=n.call(Ko(this),t,...e);return Om.set(r,t.sort?t.sort():[t]),zt(r)}:e0().includes(n)?function(...t){return n.apply(Ko(this),t),zt(Im.get(this))}:function(...t){return zt(n.apply(Ko(this),t))}}function i0(n){return typeof n=="function"?r0(n):(n instanceof IDBTransaction&&n0(n),XC(n,ZC())?new Proxy(n,Lu):n)}function zt(n){if(n instanceof IDBRequest)return t0(n);if(Nu.has(n))return Nu.get(n);let t=i0(n);return t!==n&&(Nu.set(n,t),Fu.set(t,n)),t}var Ko=n=>Fu.get(n);function Yo(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,t),a=zt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(zt(o.result),u.oldVersion,u.newVersion,zt(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),a}var s0=["get","getKey","getAll","getAllKeys","count"],o0=["put","add","delete","clear"],Uu=new Map;function xm(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Uu.get(t))return Uu.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=o0.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s0.includes(e)))return;let s=function(o,...a){return ce(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),_=u.store;return r&&(_=_.index(a.shift())),(yield Promise.all([_[e](...a),i&&u.done]))[0]})};return Uu.set(t,s),s}Am(n=>me(X({},n),{get:(t,e,r)=>xm(t,e)||n.get(t,e,r),has:(t,e)=>!!xm(t,e)||n.has(t,e)}));var Vu=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(a0(e)){let r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}};function a0(n){let t=n.getComponent();return t?.type==="VERSION"}var zu="@firebase/app",km="0.10.12";var nn=new En("@firebase/app"),l0="@firebase/app-compat",u0="@firebase/analytics-compat",c0="@firebase/analytics",d0="@firebase/app-check-compat",h0="@firebase/app-check",f0="@firebase/auth",p0="@firebase/auth-compat",m0="@firebase/database",g0="@firebase/data-connect",v0="@firebase/database-compat",y0="@firebase/functions",b0="@firebase/functions-compat",_0="@firebase/installations",w0="@firebase/installations-compat",E0="@firebase/messaging",C0="@firebase/messaging-compat",S0="@firebase/performance",R0="@firebase/performance-compat",T0="@firebase/remote-config",I0="@firebase/remote-config-compat",O0="@firebase/storage",A0="@firebase/storage-compat",x0="@firebase/firestore",k0="@firebase/vertexai-preview",D0="@firebase/firestore-compat",P0="firebase",M0="10.14.0";var Hu="[DEFAULT]",N0={[zu]:"fire-core",[l0]:"fire-core-compat",[c0]:"fire-analytics",[u0]:"fire-analytics-compat",[h0]:"fire-app-check",[d0]:"fire-app-check-compat",[f0]:"fire-auth",[p0]:"fire-auth-compat",[m0]:"fire-rtdb",[g0]:"fire-data-connect",[v0]:"fire-rtdb-compat",[y0]:"fire-fn",[b0]:"fire-fn-compat",[_0]:"fire-iid",[w0]:"fire-iid-compat",[E0]:"fire-fcm",[C0]:"fire-fcm-compat",[S0]:"fire-perf",[R0]:"fire-perf-compat",[T0]:"fire-rc",[I0]:"fire-rc-compat",[O0]:"fire-gcs",[A0]:"fire-gcs-compat",[x0]:"fire-fst",[D0]:"fire-fst-compat",[k0]:"fire-vertex","fire-js":"fire-js",[P0]:"fire-js-all"};var Qo=new Map,j0=new Map,Gu=new Map;function Dm(n,t){try{n.container.addComponent(t)}catch(e){nn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function dt(n){let t=n.name;if(Gu.has(t))return nn.debug(`There were multiple attempts to register component ${t}.`),!1;Gu.set(t,n);for(let e of Qo.values())Dm(e,n);for(let e of j0.values())Dm(e,n);return!0}function Ht(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}var L0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new tn("app","Firebase",L0);var $u=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};var Jo=M0;function Ku(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let r=Object.assign({name:Hu,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(e||(e=ku()),!e)throw Cn.create("no-options");let s=Qo.get(i);if(s){if(kr(e,s.options)&&kr(r,s.config))return s;throw Cn.create("duplicate-app",{appName:i})}let o=new Yi(i);for(let u of Gu.values())o.addComponent(u);let a=new $u(e,r,o);return Qo.set(i,a),a}function $n(n=Hu){let t=Qo.get(n);if(!t&&n===Hu&&ku())return Ku();if(!t)throw Cn.create("no-app",{appName:n});return t}function $e(n,t,e){var r;let i=(r=N0[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);let s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),nn.warn(a.join(" "));return}dt(new Ge(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var F0="firebase-heartbeat-database",U0=1,Qi="firebase-heartbeat-store",Bu=null;function jm(){return Bu||(Bu=Yo(F0,U0,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Qi)}catch(e){console.warn(e)}}}}).catch(n=>{throw Cn.create("idb-open",{originalErrorMessage:n.message})})),Bu}function B0(n){return ce(this,null,function*(){try{let e=(yield jm()).transaction(Qi),r=yield e.objectStore(Qi).get(Lm(n));return yield e.done,r}catch(t){if(t instanceof ct)nn.warn(t.message);else{let e=Cn.create("idb-get",{originalErrorMessage:t?.message});nn.warn(e.message)}}})}function Pm(n,t){return ce(this,null,function*(){try{let r=(yield jm()).transaction(Qi,"readwrite");yield r.objectStore(Qi).put(t,Lm(n)),yield r.done}catch(e){if(e instanceof ct)nn.warn(e.message);else{let r=Cn.create("idb-set",{originalErrorMessage:e?.message});nn.warn(r.message)}}})}function Lm(n){return`${n.name}!${n.options.appId}`}var V0=1024,z0=30*24*60*60*1e3,Wu=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new qu(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return ce(this,null,function*(){var t,e;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mm();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=z0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nn.warn(r)}})}getHeartbeatsHeader(){return ce(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Mm(),{heartbeatsToSend:r,unsentEntries:i}=H0(this._heartbeatsCache.heartbeats),s=Wi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return nn.warn(e),""}})}};function Mm(){return new Date().toISOString().substring(0,10)}function H0(n,t=V0){let e=[],r=n.slice();for(let i of n){let s=e.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Nm(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),Nm(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}var qu=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return ce(this,null,function*(){return Go()?$o().then(()=>!0).catch(()=>!1):!1})}read(){return ce(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield B0(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return ce(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Pm(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return ce(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Pm(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function Nm(n){return Wi(JSON.stringify({version:2,heartbeats:n})).length}function G0(n){dt(new Ge("platform-logger",t=>new Vu(t),"PRIVATE")),dt(new Ge("heartbeat",t=>new Wu(t),"PRIVATE")),$e(zu,km,n),$e(zu,km,"esm2017"),$e("fire-js","")}G0("");var Gm="firebasestorage.googleapis.com",$m="storageBucket",$0=2*60*1e3,W0=10*60*1e3;var Me=class n extends ct{constructor(t,e,r=0){super(Yu(t),`Firebase Storage: ${e} (${Yu(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Yu(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Le=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Le||{});function Yu(n){return"storage/"+n}function tc(){let n="An unknown error occurred, please check the error payload for server response.";return new Me(Le.UNKNOWN,n)}function q0(n){return new Me(Le.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function K0(n){return new Me(Le.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Y0(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Me(Le.UNAUTHENTICATED,n)}function Q0(){return new Me(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function J0(n){return new Me(Le.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function X0(){return new Me(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z0(){return new Me(Le.CANCELED,"User canceled the upload/download.")}function eS(n){return new Me(Le.INVALID_URL,"Invalid URL '"+n+"'.")}function tS(n){return new Me(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nS(){return new Me(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$m+"' property when initializing the app?")}function rS(){return new Me(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iS(){return new Me(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sS(n){return new Me(Le.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qu(n){return new Me(Le.INVALID_ARGUMENT,n)}function Wm(){return new Me(Le.APP_DELETED,"The Firebase app was deleted.")}function oS(n){return new Me(Le.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xi(n,t){return new Me(Le.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function Ji(n){throw new Me(Le.INTERNAL_ERROR,"Internal error: "+n)}var kt=class n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=n.makeFromUrl(t,e)}catch{return new n(t,"")}if(r.path==="")return r;throw tS(t)}static makeFromUrl(t,e){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function _(y){y.path_=decodeURIComponent(y.path)}let I="v[A-Za-z0-9_]+",T=e.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",f=new RegExp(`^https?://${T}/${I}/b/${i}/o${R}`,"i"),w={bucket:1,path:3},m=e===Gm?"(?:storage.googleapis.com|storage.cloud.google.com)":e,g="([^?#]*)",C=new RegExp(`^https?://${m}/${i}/${g}`,"i"),c=[{regex:a,indices:u,postModify:s},{regex:f,indices:w,postModify:_},{regex:C,indices:{bucket:1,path:2},postModify:_}];for(let y=0;y<c.length;y++){let E=c[y],S=E.regex.exec(t);if(S){let v=S[E.indices.bucket],h=S[E.indices.path];h||(h=""),r=new n(v,h),E.postModify(r);break}}if(r==null)throw eS(t);return r}},Ju=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function aS(n,t,e){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let _=!1;function I(...g){_||(_=!0,t.apply(null,g))}function T(g){i=setTimeout(()=>{i=null,n(f,u())},g)}function R(){s&&clearTimeout(s)}function f(g,...C){if(_){R();return}if(g){R(),I.call(null,g,...C);return}if(u()||o){R(),I.call(null,g,...C);return}r<64&&(r*=2);let c;a===1?(a=2,c=0):c=(r+Math.random())*1e3,T(c)}let w=!1;function m(g){w||(w=!0,R(),!_&&(i!==null?(g||(a=2),clearTimeout(i),T(0)):g||(a=1)))}return T(0),s=setTimeout(()=>{o=!0,m(!0)},e),m}function lS(n){n(!1)}function uS(n){return n!==void 0}function cS(n){return typeof n=="object"&&!Array.isArray(n)}function nc(n){return typeof n=="string"||n instanceof String}function Fm(n){return rc()&&n instanceof Blob}function rc(){return typeof Blob<"u"}function Um(n,t,e,r){if(r<t)throw Qu(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Qu(`Invalid value for '${n}'. Expected ${e} or less.`)}function ic(n,t,e){let r=t;return e==null&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function qm(n){let t=encodeURIComponent,e="?";for(let r in n)if(n.hasOwnProperty(r)){let i=t(r)+"="+t(n[r]);e=e+i+"&"}return e=e.slice(0,-1),e}var Pr=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Pr||{});function dS(n,t){let e=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=t.indexOf(n)!==-1;return e||i||s}var Xu=class{constructor(t,e,r,i,s,o,a,u,_,I,T,R=!0){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=_,this.progressCallback_=I,this.connectionFactory_=T,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,w)=>{this.resolve_=f,this.reject_=w,this.start_()})}start_(){let t=(r,i)=>{if(i){r(!1,new Dr(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,_=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,_)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Pr.NO_ERROR,u=s.getStatus();if(!a||dS(u,this.additionalRetryCodes_)&&this.retry){let I=s.getErrorCode()===Pr.ABORT;r(!1,new Dr(!1,null,I));return}let _=this.successCodes_.indexOf(u)!==-1;r(!0,new Dr(_,s))})},e=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());uS(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=tc();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?Wm():Z0();o(u)}else{let u=X0();o(u)}};this.canceled_?e(!1,new Dr(!1,null,!0)):this.backoffId_=aS(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&lS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Dr=class{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}};function hS(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function fS(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function pS(n,t){t&&(n["X-Firebase-GMPID"]=t)}function mS(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function gS(n,t,e,r,i,s,o=!0){let a=qm(n.urlParams),u=n.url+a,_=Object.assign({},n.headers);return pS(_,t),hS(_,e),fS(_,s),mS(_,r),new Xu(u,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function vS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yS(...n){let t=vS();if(t!==void 0){let e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}else{if(rc())return new Blob(n);throw new Me(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bS(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function _S(n){if(typeof atob>"u")throw sS("base-64");return atob(n)}var Gt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zi=class{constructor(t,e){this.data=t,this.contentType=e||null}};function wS(n,t){switch(n){case Gt.RAW:return new Zi(Km(t));case Gt.BASE64:case Gt.BASE64URL:return new Zi(Ym(n,t));case Gt.DATA_URL:return new Zi(CS(t),SS(t))}throw tc()}function Km(n){let t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{let s=r,o=n.charCodeAt(++e);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function ES(n){let t;try{t=decodeURIComponent(n)}catch{throw Xi(Gt.DATA_URL,"Malformed data URL.")}return Km(t)}function Ym(n,t){switch(n){case Gt.BASE64:{let i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Xi(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gt.BASE64URL:{let i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Xi(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=_S(t)}catch(i){throw i.message.includes("polyfill")?i:Xi(n,"Invalid character found")}let r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}var Zo=class{constructor(t){this.base64=!1,this.contentType=null;let e=t.match(/^data:([^,]+)?,/);if(e===null)throw Xi(Gt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=e[1]||null;r!=null&&(this.base64=RS(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}};function CS(n){let t=new Zo(n);return t.base64?Ym(Gt.BASE64,t.rest):ES(t.rest)}function SS(n){return new Zo(n).contentType}function RS(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}var ea=class n{constructor(t,e){let r=0,i="";Fm(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(Fm(this.data_)){let r=this.data_,i=bS(r,t,e);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,t,e-t);return new n(r,!0)}}static getBlob(...t){if(rc()){let e=t.map(r=>r instanceof n?r.data_:r);return new n(yS.apply(null,e))}else{let e=t.map(o=>nc(o)?wS(Gt.RAW,o).data:o.data_),r=0;e.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return e.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function Qm(n){let t;try{t=JSON.parse(n)}catch{return null}return cS(t)?t:null}function TS(n){if(n.length===0)return null;let t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function IS(n,t){let e=t.split("/").filter(r=>r.length>0).join("/");return n.length===0?e:n+"/"+e}function Jm(n){let t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function OS(n,t){return t}var We=class{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||OS}},Xo=null;function AS(n){return!nc(n)||n.length<2?n:Jm(n)}function Xm(){if(Xo)return Xo;let n=[];n.push(new We("bucket")),n.push(new We("generation")),n.push(new We("metageneration")),n.push(new We("name","fullPath",!0));function t(s,o){return AS(o)}let e=new We("name");e.xform=t,n.push(e);function r(s,o){return o!==void 0?Number(o):o}let i=new We("size");return i.xform=r,n.push(i),n.push(new We("timeCreated")),n.push(new We("updated")),n.push(new We("md5Hash",null,!0)),n.push(new We("cacheControl",null,!0)),n.push(new We("contentDisposition",null,!0)),n.push(new We("contentEncoding",null,!0)),n.push(new We("contentLanguage",null,!0)),n.push(new We("contentType",null,!0)),n.push(new We("metadata","customMetadata",!0)),Xo=n,Xo}function xS(n,t){function e(){let r=n.bucket,i=n.fullPath,s=new kt(r,i);return t._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:e})}function kS(n,t,e){let r={};r.type="file";let i=e.length;for(let s=0;s<i;s++){let o=e[s];r[o.local]=o.xform(r,t[o.server])}return xS(r,n),r}function Zm(n,t,e){let r=Qm(t);return r===null?null:kS(n,r,e)}function DS(n,t,e,r){let i=Qm(t);if(i===null||!nc(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(_=>{let I=n.bucket,T=n.fullPath,R="/b/"+o(I)+"/o/"+o(T),f=ic(R,e,r),w=qm({alt:"media",token:_});return f+w})[0]}function PS(n,t){let e={},r=t.length;for(let i=0;i<r;i++){let s=t[i];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}var ta=class{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function eg(n){if(!n)throw tc()}function MS(n,t){function e(r,i){let s=Zm(n,i,t);return eg(s!==null),s}return e}function NS(n,t){function e(r,i){let s=Zm(n,i,t);return eg(s!==null),DS(s,i,n.host,n._protocol)}return e}function tg(n){function t(e,r){let i;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?i=Q0():i=Y0():e.getStatus()===402?i=K0(n.bucket):e.getStatus()===403?i=J0(n.path):i=r,i.status=e.getStatus(),i.serverResponse=r.serverResponse,i}return t}function jS(n){let t=tg(n);function e(r,i){let s=t(r,i);return r.getStatus()===404&&(s=q0(n.path)),s.serverResponse=i.serverResponse,s}return e}function LS(n,t,e){let r=t.fullServerUrl(),i=ic(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new ta(i,s,NS(n,e),o);return a.errorHandler=jS(t),a}function FS(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function US(n,t,e){let r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=FS(null,t)),r}function BS(n,t,e,r,i){let s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let c="";for(let y=0;y<2;y++)c=c+Math.random().toString().slice(2);return c}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let _=US(t,r,i),I=PS(_,e),T="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+I+`\r
--`+u+`\r
Content-Type: `+_.contentType+`\r
\r
`,R=`\r
--`+u+"--",f=ea.getBlob(T,r,R);if(f===null)throw rS();let w={name:_.fullPath},m=ic(s,n.host,n._protocol),g="POST",C=n.maxUploadRetryTime,p=new ta(m,g,MS(n,e),C);return p.urlParams=w,p.headers=o,p.body=f.uploadData(),p.errorHandler=tg(t),p}var gP=256*1024;var Bm=null,Zu=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pr.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pr.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pr.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw Ji("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ji("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ji("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ji("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ji("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},ec=class extends Zu{initXhr(){this.xhr_.responseType="text"}};function ng(){return Bm?Bm():new ec}var Mr=class n{constructor(t,e){this._service=t,e instanceof kt?this._location=e:this._location=kt.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new n(t,e)}get root(){let t=new kt(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jm(this._location.path)}get storage(){return this._service}get parent(){let t=TS(this._location.path);if(t===null)return null;let e=new kt(this._location.bucket,t);return new n(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw oS(t)}};function VS(n,t,e){n._throwIfRoot("uploadBytes");let r=BS(n.storage,n._location,Xm(),new ea(t,!0),e);return n.storage.makeRequestWithTokens(r,ng).then(i=>({metadata:i,ref:n}))}function zS(n){n._throwIfRoot("getDownloadURL");let t=LS(n.storage,n._location,Xm());return n.storage.makeRequestWithTokens(t,ng).then(e=>{if(e===null)throw iS();return e})}function HS(n,t){let e=IS(n._location.path,t),r=new kt(n._location.bucket,e);return new Mr(n.storage,r)}function GS(n){return/^[A-Za-z]+:\/\//.test(n)}function $S(n,t){return new Mr(n,t)}function rg(n,t){if(n instanceof es){let e=n;if(e._bucket==null)throw nS();let r=new Mr(e,e._bucket);return t!=null?rg(r,t):r}else return t!==void 0?HS(n,t):n}function WS(n,t){if(t&&GS(t)){if(n instanceof es)return $S(n,t);throw Qu("To use ref(service, url), the first argument must be a Storage instance.")}else return rg(n,t)}function Vm(n,t){let e=t?.[$m];return e==null?null:kt.makeFromBucketSpec(e,n)}function qS(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ho(i,n.app.options.projectId))}var es=class{constructor(t,e,r,i,s){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$0,this._maxUploadRetryTime=W0,this._requests=new Set,i!=null?this._bucket=kt.makeFromBucketSpec(i,this._host):this._bucket=Vm(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=kt.makeFromBucketSpec(this._url,t):this._bucket=Vm(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Um("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Um("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return ce(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=yield t.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return ce(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Mr(this,t)}_makeRequest(t,e,r,i,s=!0){if(this._deleted)return new Ju(Wm());{let o=gS(t,this._appId,r,i,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){return ce(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,r,i).getPromise()})}},zm="@firebase/storage",Hm="0.13.2";var ig="storage";function sg(n,t,e){return n=rt(n),VS(n,t,e)}function og(n){return n=rt(n),zS(n)}function ag(n,t){return n=rt(n),WS(n,t)}function lg(n=$n(),t){n=rt(n);let r=Ht(n,ig).getImmediate({identifier:t}),i=zo("storage");return i&&KS(r,...i),r}function KS(n,t,e,r={}){qS(n,t,e,r)}function YS(n,{instanceIdentifier:t}){let e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new es(e,r,i,t,Jo)}function QS(){dt(new Ge(ig,YS,"PUBLIC").setMultipleInstances(!0)),$e(zm,Hm,""),$e(zm,Hm,"esm2017")}QS();var ug="@firebase/database",cg="1.0.8";var nd="";function JS(n){nd=n}var hc=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ze(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:xr(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var fc=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Vt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var zg=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hc(t)}}catch{}return new fc},qn=zg("localStorage"),pc=zg("sessionStorage");var Lr=new En("@firebase/database"),XS=function(){let n=1;return function(){return n++}}(),Hg=function(n){let t=Sm(n),e=new Bo;e.update(t);let r=e.digest();return Vo.encodeByteArray(r)},fs=function(...n){let t="";for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=fs.apply(null,r):typeof r=="object"?t+=ze(r):t+=r,t+=" "}return t},Yn=null,dg=!0,ZS=function(n,t){ne(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Lr.logLevel=Oe.VERBOSE,Yn=Lr.log.bind(Lr),t&&pc.set("logging_enabled",!0)):typeof n=="function"?Yn=n:(Yn=null,pc.remove("logging_enabled"))},Ye=function(...n){if(dg===!0&&(dg=!1,Yn===null&&pc.get("logging_enabled")===!0&&ZS(!0)),Yn){let t=fs.apply(null,n);Yn(t)}},ps=function(n){return function(...t){Ye(n,...t)}},mc=function(...n){let t="FIREBASE INTERNAL ERROR: "+fs(...n);Lr.error(t)},sn=function(...n){let t=`FIREBASE FATAL ERROR: ${fs(...n)}`;throw Lr.error(t),new Error(t)},it=function(...n){let t="FIREBASE WARNING: "+fs(...n);Lr.warn(t)},eR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&it("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gg=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},tR=function(n){if(Bt()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Ur="[MIN_NAME]",Qn="[MAX_NAME]",$r=function(n,t){if(n===t)return 0;if(n===Ur||t===Qn)return-1;if(t===Ur||n===Qn)return 1;{let e=hg(n),r=hg(t);return e!==null?r!==null?e-r===0?n.length-t.length:e-r:-1:r!==null?1:n<t?-1:1}},nR=function(n,t){return n===t?0:n<t?-1:1},ts=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+ze(t))},rd=function(n){if(typeof n!="object"||n===null)return ze(n);let t=[];for(let r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)r!==0&&(e+=","),e+=ze(t[r]),e+=":",e+=rd(n[t[r]]);return e+="}",e},$g=function(n,t){let e=n.length;if(e<=t)return[n];let r=[];for(let i=0;i<e;i+=t)i+t>e?r.push(n.substring(i,e)):r.push(n.substring(i,i+t));return r};function Rt(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var Wg=function(n){ne(!Gg(n),"Invalid JSON number");let t=11,e=52,r=(1<<t-1)-1,i,s,o,a,u;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-r-e))));let _=[];for(u=e;u;u-=1)_.push(o%2?1:0),o=Math.floor(o/2);for(u=t;u;u-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();let I=_.join(""),T="";for(u=0;u<64;u+=8){let R=parseInt(I.substr(u,8),2).toString(16);R.length===1&&(R="0"+R),T=T+R}return T.toLowerCase()},rR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},iR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var sR=new RegExp("^-?(0*)\\d{1,10}$"),oR=-2147483648,aR=2147483647,hg=function(n){if(sR.test(n)){let t=Number(n);if(t>=oR&&t<=aR)return t}return null},Wr=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw it("Exception was thrown by user callback.",e),t},Math.floor(0))}},lR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},os=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var gc=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){it(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var vc=class{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',it(t)}},as=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ra="5",qg="v",Kg="s",Yg="r",Qg="f",Jg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xg="ls",Zg="p",yc="ac",ev="websocket",tv="long_polling";var ia=class{constructor(t,e,r,i,s=!1,o="",a=!1,u=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&qn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function uR(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nv(n,t,e){ne(typeof t=="string","typeof type must == string"),ne(typeof e=="object","typeof params must == object");let r;if(t===ev)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===tv)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);uR(n)&&(e.ns=n.namespace);let i=[];return Rt(e,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var bc=class{constructor(){this.counters_={}}incrementCounter(t,e=1){Vt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return pm(this.counters_)}};var sc={},oc={};function id(n){let t=n.toString();return sc[t]||(sc[t]=new bc),sc[t]}function cR(n,t){let e=n.toString();return oc[e]||(oc[e]=t()),oc[e]}var _c=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var fg="start",dR="close",hR="pLPCommand",fR="pRTLPCB",rv="id",iv="pw",sv="ser",pR="cb",mR="seg",gR="ts",vR="d",yR="dframe",ov=1870,av=30,bR=ov-av,_R=25e3,wR=3e4,wc=class n{constructor(t,e,r,i,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ps(t),this.stats_=id(e),this.urlFn=u=>(this.appCheckToken&&(u[yc]=this.appCheckToken),nv(e,tv,u))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new _c(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wR)),tR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ec((...s)=>{let[o,a,u,_,I]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fg)this.id=a,this.password=u;else if(o===dR)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[fg]="t",r[sv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qg]=ra,this.transportSessionId&&(r[Kg]=this.transportSessionId),this.lastSessionId&&(r[Xg]=this.lastSessionId),this.applicationId&&(r[Zg]=this.applicationId),this.appCheckToken&&(r[yc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jg.test(location.hostname)&&(r[Yg]=Qg);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Bt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rR()&&!iR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=ze(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let r=xu(e),i=$g(r,bR);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(Bt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[yR]="t",r[rv]=t,r[iv]=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=ze(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},Ec=class n{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Bt())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=XS(),window[hR+this.uniqueCallbackIdentifier]=t,window[fR+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ye("frame writing exception"),a.stack&&Ye(a.stack),Ye(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ye("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[rv]=this.myID,t[iv]=this.myPW,t[sv]=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+av+r.length<=ov;){let o=this.pendingSegs.shift();r=r+"&"+mR+i+"="+o.seg+"&"+gR+i+"="+o.ts+"&"+vR+i+"="+o.d,i++}return e=e+r,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(_R)),s=()=>{clearTimeout(i),r()};this.addTag(t,s)}addTag(t,e){Bt()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{Ye("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var ER=16384,CR=45e3,sa=null;typeof MozWebSocket<"u"?sa=MozWebSocket:typeof WebSocket<"u"&&(sa=WebSocket);var ns=(()=>{class n{constructor(e,r,i,s,o,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ps(this.connId),this.stats_=id(r),this.connURL=n.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,s,o){let a={};return a[qg]=ra,!Bt()&&typeof location<"u"&&location.hostname&&Jg.test(location.hostname)&&(a[Yg]=Qg),r&&(a[Kg]=r),i&&(a[Xg]=i),s&&(a[yc]=s),o&&(a[Zg]=o),nv(e,ev,a)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qn.set("previous_websocket_failure",!0);try{let i;if(Bt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ra}/${nd}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new sa(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&sa!==null&&!n.forceDisallow_}static previouslyFailed(){return qn.isInMemoryStorage||qn.get("previous_websocket_failure")===!0}markConnectionHealthy(){qn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=xr(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){let r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();let r=ze(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=$g(r,ER);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CR))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),SR=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wc,ns]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let r=ns&&ns.isAvailable(),i=r&&!ns.previouslyFailed();if(e.webSocketOnly&&(r||it("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ns];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),RR=6e4,TR=5e3,IR=10*1024,OR=100*1024,ac="t",pg="d",AR="s",mg="r",xR="e",gg="o",vg="a",yg="n",bg="p",kR="h",Cc=class{constructor(t,e,r,i,s,o,a,u,_,I){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=_,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ps("c:"+this.id+":"),this.transportManager_=new SR(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=os(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>OR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>IR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ac in t){let e=t[ac];e===vg?this.upgradeIfSecondaryHealthy_():e===mg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===gg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=ts("t",t),r=ts("d",t);if(e==="c")this.onSecondaryControl_(r);else if(e==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:yg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=ts("t",t),r=ts("d",t);e==="c"?this.onControl_(r):e==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=ts(ac,t);if(pg in t){let r=t[pg];if(e===kR){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(e===yg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===AR?this.onConnectionShutdown_(r):e===mg?this.onReset_(r):e===xR?mc("Server Error: "+r):e===gg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mc("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),ra!==r&&it("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),os(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(RR))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):os(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(TR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bg,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var oa=class{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}};var aa=class{constructor(t){this.allowedEvents_=t,this.listeners_={},ne(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});let i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===e&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(t){ne(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var la=class n extends aa{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Du()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return ne(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var _g=32,wg=768,Te=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Se(){return new Te("")}function ve(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rn(n){return n.pieces_.length-n.pieceNum_}function Ae(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Te(n.pieces_,t)}function lv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function DR(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function uv(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function cv(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Te(t,0)}function Ve(n,t){let e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Te)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Te(e,0)}function ye(n){return n.pieceNum_>=n.pieces_.length}function Ct(n,t){let e=ve(n),r=ve(t);if(e===null)return t;if(e===r)return Ct(Ae(n),Ae(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function dv(n,t){if(Rn(n)!==Rn(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Pt(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Rn(n)>Rn(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}var Sc=class{constructor(t,e){this.errorPrefix_=e,this.parts_=uv(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ki(this.parts_[r]);hv(this)}};function PR(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=Ki(t),hv(n)}function MR(n){let t=n.parts_.pop();n.byteLength_-=Ki(t),n.parts_.length>0&&(n.byteLength_-=1)}function hv(n){if(n.byteLength_>wg)throw new Error(n.errorPrefix_+"has a key path longer than "+wg+" bytes ("+n.byteLength_+").");if(n.parts_.length>_g)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_g+") or object contains a cycle "+Wn(n))}function Wn(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Rc=class n extends aa{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(t){return ne(t==="visible","Unknown event type: "+t),[this.visible_]}};var rs=1e3,NR=60*5*1e3,Eg=30*1e3,jR=1.3,LR=3e4,FR="server_kill",Cg=3,sd=(()=>{class n extends oa{constructor(e,r,i,s,o,a,u,_){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=ps("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rs,this.maxReconnectDelay_=NR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!Bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Rc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&la.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){let s=++this.requestNumber_,o={r:s,a:e,b:r};this.log_(ze(o)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();let r=new wn,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(e,r,i,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:e,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){let r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){let r=e.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,u=>{let _=u.d,I=u.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",u),I!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(I,_))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Vt(e,"w")){let i=Hn(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();it(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Em(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Eg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,r=wm(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let r=e.s,i=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){let i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,r)}sendUnlisten_(e,r,i,s){this.log_("Unlisten on "+e+" for "+r);let o={p:e},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,r,i,s){this.putInternal("p",e,r,i,s)}merge(e,r,i,s){this.putInternal("m",e,r,i,s)}putInternal(e,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(e){let r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ze(e));let r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):mc("Unrecognized action received from server: "+ze(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>LR&&(this.reconnectDelay_=rs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jR)}this.onConnectStatus_(!1)}establishConnection_(){return ce(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,u=null,_=function(){u?u.close():(a=!0,i())},I=function(R){ne(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(R)};this.realtime_={close:_,sendRequest:I};let T=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[R,f]=yield Promise.all([this.authTokenProvider_.getToken(T),this.appCheckTokenProvider_.getToken(T)]);a?Ye("getToken() completed but was canceled"):(Ye("getToken() completed. Creating connection."),this.authToken_=R&&R.accessToken,this.appCheckToken_=f&&f.token,u=new Cc(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,i,w=>{it(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(FR)},o))}catch(R){this.log_("Failed to get token: "+R),a||(this.repoInfo_.nodeAdmin&&it(R),_())}}})}interrupt(e){Ye("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ye("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Pu(this.interruptReasons_)&&(this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;r?i=r.map(o=>rd(o)).join("$"):i="default";let s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,r){let i=new Te(e).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,r){Ye("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Cg&&(this.reconnectDelay_=Eg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ye("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Cg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},r="js";Bt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),e["sdk."+r+"."+nd.replace(/\./g,"-")]=1,Du()?e["framework.cordova"]=1:ym()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=la.getInstance().currentlyOnline();return Pu(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),be=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var Br=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let r=new be(Ur,t),i=new be(Ur,e);return this.compare(r,i)!==0}minPost(){return be.MIN}};var na,ua=class extends Br{static get __EMPTY_NODE(){return na}static set __EMPTY_NODE(t){na=t}compare(t,e){return $r(t.name,e.name)}isDefinedOn(t){throw zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return be.MIN}maxPost(){return new be(Qn,na)}makePost(t,e){return ne(typeof t=="string","KeyIndex indexValue must always be a string."),new be(t,na)}toString(){return".key"}},Fr=new ua;var jr=class{constructor(t,e,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?r(t.key,e):1,i&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Dt=(()=>{class n{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??n.RED,this.left=s??St.EMPTY_NODE,this.right=o??St.EMPTY_NODE}copy(e,r,i,s,o){return new n(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this,o=i(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,s;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Tc=class{copy(t,e,r,i,s){return this}insert(t,e,r){return new Dt(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},St=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),e===0)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();)if(e=this.comparator_(t,r.key),e===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else e<0?r=r.left:e>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new jr(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new jr(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new jr(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new jr(this.root_,null,this.comparator_,!0,t)}};St.EMPTY_NODE=new Tc;function UR(n,t){return $r(n.name,t.name)}function od(n,t){return $r(n,t)}var Ic;function BR(n){Ic=n}var fv=function(n){return typeof n=="number"?"number:"+Wg(n):"string:"+n},pv=function(n){if(n.isLeafNode()){let t=n.val();ne(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Vt(t,".sv"),"Priority must be a string or number.")}else ne(n===Ic||n.isEmpty(),"priority of unexpected type.");ne(n===Ic||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Sg,Vr=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pv(this.priorityNode_)}static set __childrenNodeConstructor(e){Sg=e}static get __childrenNodeConstructor(){return Sg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:ve(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){let i=ve(e);return i===null?r:r.isEmpty()&&i!==".priority"?this:(ne(i!==".priority"||Rn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fv(this.priorityNode_.val())+":");let r=typeof this.value_;e+=r+":",r==="number"?e+=Wg(this.value_):e+=this.value_,this.lazyHash_=Hg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let r=typeof e.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return ne(s>=0,"Unknown leaf type: "+r),ne(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),mv,gv;function VR(n){mv=n}function zR(n){gv=n}var Oc=class extends Br{compare(t,e){let r=t.node.getPriority(),i=e.node.getPriority(),s=r.compareTo(i);return s===0?$r(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return be.MIN}maxPost(){return new be(Qn,new Vr("[PRIORITY-POST]",gv))}makePost(t,e){let r=mv(t);return new be(e,new Vr("[PRIORITY-POST]",r))}toString(){return".priority"}},Qe=new Oc;var HR=Math.log(2),Ac=class{constructor(t){let e=s=>parseInt(Math.log(s)/HR,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},ca=function(n,t,e,r){n.sort(t);let i=function(u,_){let I=_-u,T,R;if(I===0)return null;if(I===1)return T=n[u],R=e?e(T):T,new Dt(R,T.node,Dt.BLACK,null,null);{let f=parseInt(I/2,10)+u,w=i(u,f),m=i(f+1,_);return T=n[f],R=e?e(T):T,new Dt(R,T.node,Dt.BLACK,w,m)}},s=function(u){let _=null,I=null,T=n.length,R=function(w,m){let g=T-w,C=T;T-=w;let p=i(g+1,C),c=n[g],y=e?e(c):c;f(new Dt(y,c.node,m,null,p))},f=function(w){_?(_.left=w,_=w):(I=w,_=w)};for(let w=0;w<u.count;++w){let m=u.nextBitIsOne(),g=Math.pow(2,u.count-(w+1));m?R(g,Dt.BLACK):(R(g,Dt.BLACK),R(g,Dt.RED))}return I},o=new Ac(n.length),a=s(o);return new St(r||t,a)};var lc,Nr={},zr=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return ne(Nr&&Qe,"ChildrenNode.ts has not been loaded"),lc=lc||new n({".priority":Nr},{".priority":Qe}),lc}get(t){let e=Hn(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof St?e:null}hasIndex(t){return Vt(this.indexSet_,t.toString())}addIndex(t,e){ne(t!==Fr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=e.getIterator(be.Wrap),o=s.getNext();for(;o;)i=i||t.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ca(r,t.getCompare()):a=Nr;let u=t.toString(),_=Object.assign({},this.indexSet_);_[u]=t;let I=Object.assign({},this.indexes_);return I[u]=a,new n(I,_)}addToIndexes(t,e){let r=qi(this.indexes_,(i,s)=>{let o=Hn(this.indexSet_,s);if(ne(o,"Missing index implementation for "+s),i===Nr)if(o.isDefinedOn(t.node)){let a=[],u=e.getIterator(be.Wrap),_=u.getNext();for(;_;)_.name!==t.name&&a.push(_),_=u.getNext();return a.push(t),ca(a,o.getCompare())}else return Nr;else{let a=e.get(t.name),u=i;return a&&(u=u.remove(new be(t.name,a))),u.insert(t,t.node)}});return new n(r,this.indexSet_)}removeFromIndexes(t,e){let r=qi(this.indexes_,i=>{if(i===Nr)return i;{let s=e.get(t.name);return s?i.remove(new be(t.name,s)):i}});return new n(r,this.indexSet_)}};var is,ke=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pv(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return is||(is=new n(new St(od),null,zr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||is}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let r=this.children_.get(e);return r===null?is:r}}getChild(e){let r=ve(e);return r===null?this:this.getImmediateChild(r).getChild(Ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(ne(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{let i=new be(e,r),s,o;r.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?is:this.priorityNode_;return new n(s,a,o)}}updateChild(e,r){let i=ve(e);if(i===null)return r;{ne(ve(e)!==".priority"||Rn(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ae(e),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Qe,(a,u)=>{r[a]=u.val(e),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fv(this.getPriority().val())+":"),this.forEachChild(Qe,(r,i)=>{let s=i.hash();s!==""&&(e+=":"+r+":"+s)}),this.lazyHash_=e===""?"":Hg(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new be(e,r));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let r=this.resolveIndex_(e);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){let r=this.getFirstChildName(e);return r?new be(r,this.children_.get(r)):null}getLastChildName(e){let r=this.resolveIndex_(e);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){let r=this.getLastChildName(e);return r?new be(r,this.children_.get(r)):null}forEachChild(e,r){let i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ms?-1:0}withIndex(e){if(e===Fr||this.indexMap_.hasIndex(e))return this;{let r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Fr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Qe),s=r.getIterator(Qe),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Fr?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),xc=class extends ke{constructor(){super(new St(od),ke.EMPTY_NODE,zr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ke.EMPTY_NODE}isEmpty(){return!1}},ms=new xc;Object.defineProperties(be,{MIN:{value:new be(Ur,ke.EMPTY_NODE)},MAX:{value:new be(Qn,ms)}});ua.__EMPTY_NODE=ke.EMPTY_NODE;Vr.__childrenNodeConstructor=ke;BR(ms);zR(ms);var GR=!0;function qe(n,t=null){if(n===null)return ke.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),ne(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new Vr(e,qe(t))}if(!(n instanceof Array)&&GR){let e=[],r=!1;if(Rt(n,(o,a)=>{if(o.substring(0,1)!=="."){let u=qe(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),e.push(new be(o,u)))}}),e.length===0)return ke.EMPTY_NODE;let s=ca(e,UR,o=>o.name,od);if(r){let o=ca(e,Qe.getCompare());return new ke(s,qe(t),new zr({".priority":o},{".priority":Qe}))}else return new ke(s,qe(t),zr.Default)}else{let e=ke.EMPTY_NODE;return Rt(n,(r,i)=>{if(Vt(n,r)&&r.substring(0,1)!=="."){let s=qe(i);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(r,s))}}),e.updatePriority(qe(t))}}VR(qe);var kc=class extends Br{constructor(t){super(),this.indexPath_=t,ne(!ye(t)&&ve(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let r=this.extractChild(t.node),i=this.extractChild(e.node),s=r.compareTo(i);return s===0?$r(t.name,e.name):s}makePost(t,e){let r=qe(t),i=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(e,i)}maxPost(){let t=ke.EMPTY_NODE.updateChild(this.indexPath_,ms);return new be(Qn,t)}toString(){return uv(this.indexPath_,0).join("/")}};var Dc=class extends Br{compare(t,e){let r=t.node.compareTo(e.node);return r===0?$r(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(t,e){let r=qe(t);return new be(e,r)}toString(){return".value"}},$R=new Dc;function WR(n){return{type:"value",snapshotNode:n}}function qR(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function KR(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Rg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function YR(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Pc=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ur}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Tg(n){let t={};if(n.isDefault())return t;let e;if(n.index_===Qe?e="$priority":n.index_===$R?e="$value":n.index_===Fr?e="$key":(ne(n.index_ instanceof kc,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=ze(e),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";t[r]=ze(n.indexStartValue_),n.startNameSet_&&(t[r]+=","+ze(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";t[r]=ze(n.indexEndValue_),n.endNameSet_&&(t[r]+=","+ze(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Ig(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Qe&&(t.i=n.index_.toString()),t}var Mc=class n extends oa{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ps("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(ne(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,r),a={};this.listens_[o]=a;let u=Tg(t._queryParams);this.restRequest_(s+".json",u,(_,I)=>{let T=I;if(_===404&&(T=null,_=null),_===null&&this.onDataUpdate_(s,T,!1,r),Hn(this.listens_,o)===a){let R;_?_===401?R="permission_denied":R="rest_error:"+_:R="ok",i(R,null)}})}unlisten(t,e){let r=n.getListenId_(t,e);delete this.listens_[r]}get(t){let e=Tg(t._queryParams),r=t._path.toString(),i=new wn;return this.restRequest_(r+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(e.auth=i.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Cm(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=xr(a.responseText)}catch{it("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&it("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Nc=class{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function da(){return{value:null,children:new Map}}function vv(n,t,e){if(ye(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let r=ve(t);n.children.has(r)||n.children.set(r,da());let i=n.children.get(r);t=Ae(t),vv(i,t,e)}}function jc(n,t,e){n.value!==null?e(t,n.value):QR(n,(r,i)=>{let s=new Te(t.toString()+"/"+r);jc(i,s,e)})}function QR(n,t){n.children.forEach((e,r)=>{t(r,e)})}var Lc=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Rt(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}};var Og=10*1e3,JR=30*1e3,XR=5*60*1e3,Fc=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Lc(t);let r=Og+(JR-Og)*Math.random();os(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),e={},r=!1;Rt(t,(i,s)=>{s>0&&Vt(this.statsToReport_,i)&&(e[i]=s,r=!0)}),r&&this.server_.reportStats(e),os(this.reportStats_.bind(this),Math.floor(Math.random()*2*XR))}};var rn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(rn||{});function yv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _v(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Uc=class n{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=rn.ACK_USER_WRITE,this.source=yv()}operationForChild(t){if(ye(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Te(t));return new n(Se(),e,this.revert)}}else return ne(ve(this.path)===t,"operationForChild called for unrelated child."),new n(Ae(this.path),this.affectedTree,this.revert)}};var Hr=class n{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=rn.OVERWRITE}operationForChild(t){return ye(this.path)?new n(this.source,Se(),this.snap.getImmediateChild(t)):new n(this.source,Ae(this.path),this.snap)}};var ha=class n{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=rn.MERGE}operationForChild(t){if(ye(this.path)){let e=this.children.subtree(new Te(t));return e.isEmpty()?null:e.value?new Hr(this.source,Se(),e.value):new n(this.source,Se(),e)}else return ne(ve(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var cs=class{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ye(t))return this.isFullyInitialized()&&!this.filtered_;let e=ve(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function ZR(n,t,e,r){let i=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(YR(o.childName,o.snapshotNode))}),ss(n,i,"child_removed",t,r,e),ss(n,i,"child_added",t,r,e),ss(n,i,"child_moved",s,r,e),ss(n,i,"child_changed",t,r,e),ss(n,i,"value",t,r,e),i}function ss(n,t,e,r,i,s){let o=r.filter(a=>a.type===e);o.sort((a,u)=>tT(n,a,u)),o.forEach(a=>{let u=eT(n,a,s);i.forEach(_=>{_.respondsTo(a.type)&&t.push(_.createEvent(u,n.query_))})})}function eT(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function tT(n,t,e){if(t.childName==null||e.childName==null)throw zn("Should only compare child_ events.");let r=new be(t.childName,t.snapshotNode),i=new be(e.childName,e.snapshotNode);return n.index_.compare(r,i)}function wv(n,t){return{eventCache:n,serverCache:t}}function ls(n,t,e,r){return wv(new cs(t,e,r),n.serverCache)}function Ev(n,t,e,r){return wv(n.eventCache,new cs(t,e,r))}function Bc(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jn(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var uc,nT=()=>(uc||(uc=new St(nR)),uc),st=class n{constructor(t,e=nT()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return Rt(t,(r,i)=>{e=e.set(new Te(r),i)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Se(),value:this.value};if(ye(t))return null;{let r=ve(t),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ae(t),e);return s!=null?{path:Ve(new Te(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ye(t))return this;{let e=ve(t),r=this.children.get(e);return r!==null?r.subtree(Ae(t)):new n(null)}}set(t,e){if(ye(t))return new n(e,this.children);{let r=ve(t),s=(this.children.get(r)||new n(null)).set(Ae(t),e),o=this.children.insert(r,s);return new n(this.value,o)}}remove(t){if(ye(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=ve(t),r=this.children.get(e);if(r){let i=r.remove(Ae(t)),s;return i.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(ye(t))return this.value;{let e=ve(t),r=this.children.get(e);return r?r.get(Ae(t)):null}}setTree(t,e){if(ye(t))return e;{let r=ve(t),s=(this.children.get(r)||new n(null)).setTree(Ae(t),e),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(t){return this.fold_(Se(),t)}fold_(t,e){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ve(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,Se(),e)}findOnPath_(t,e,r){let i=this.value?r(e,this.value):!1;if(i)return i;if(ye(t))return null;{let s=ve(t),o=this.children.get(s);return o?o.findOnPath_(Ae(t),Ve(e,s),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Se(),e)}foreachOnPath_(t,e,r){if(ye(t))return this;{this.value&&r(e,this.value);let i=ve(t),s=this.children.get(i);return s?s.foreachOnPath_(Ae(t),Ve(e,i),r):new n(null)}}foreach(t){this.foreach_(Se(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(Ve(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}};var Mt=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new st(null))}};function us(n,t,e){if(ye(t))return new Mt(new st(e));{let r=n.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,s=r.value,o=Ct(i,t);return s=s.updateChild(o,e),new Mt(n.writeTree_.set(i,s))}else{let i=new st(e),s=n.writeTree_.setTree(t,i);return new Mt(s)}}}function Ag(n,t,e){let r=n;return Rt(e,(i,s)=>{r=us(r,Ve(t,i),s)}),r}function xg(n,t){if(ye(t))return Mt.empty();{let e=n.writeTree_.setTree(t,new st(null));return new Mt(e)}}function Vc(n,t){return Zn(n,t)!=null}function Zn(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Ct(e.path,t)):null}function kg(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Qe,(r,i)=>{t.push(new be(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new be(r,i.value))}),t}function Sn(n,t){if(ye(t))return n;{let e=Zn(n,t);return e!=null?new Mt(new st(e)):new Mt(n.writeTree_.subtree(t))}}function zc(n){return n.writeTree_.isEmpty()}function Gr(n,t){return Cv(Se(),n.writeTree_,t)}function Cv(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{i===".priority"?(ne(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):e=Cv(Ve(n,i),s,e)}),!e.getChild(n).isEmpty()&&r!==null&&(e=e.updateChild(Ve(n,".priority"),r)),e}}function Sv(n,t){return Av(t,n)}function rT(n,t,e,r,i){ne(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=us(n.visibleWrites,t,e)),n.lastWriteId=r}function iT(n,t){for(let e=0;e<n.allWrites.length;e++){let r=n.allWrites[e];if(r.writeId===t)return r}return null}function sT(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);ne(e>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&oT(a,r.path)?i=!1:Pt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return aT(n),!0;if(r.snap)n.visibleWrites=xg(n.visibleWrites,r.path);else{let a=r.children;Rt(a,u=>{n.visibleWrites=xg(n.visibleWrites,Ve(r.path,u))})}return!0}else return!1}function oT(n,t){if(n.snap)return Pt(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&Pt(Ve(n.path,e),t))return!0;return!1}function aT(n){n.visibleWrites=Rv(n.allWrites,lT,Se()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function lT(n){return n.visible}function Rv(n,t,e){let r=Mt.empty();for(let i=0;i<n.length;++i){let s=n[i];if(t(s)){let o=s.path,a;if(s.snap)Pt(e,o)?(a=Ct(e,o),r=us(r,a,s.snap)):Pt(o,e)&&(a=Ct(o,e),r=us(r,Se(),s.snap.getChild(a)));else if(s.children){if(Pt(e,o))a=Ct(e,o),r=Ag(r,a,s.children);else if(Pt(o,e))if(a=Ct(o,e),ye(a))r=Ag(r,Se(),s.children);else{let u=Hn(s.children,ve(a));if(u){let _=u.getChild(Ae(a));r=us(r,Se(),_)}}}else throw zn("WriteRecord should have .snap or .children")}}return r}function Tv(n,t,e,r,i){if(!r&&!i){let s=Zn(n.visibleWrites,t);if(s!=null)return s;{let o=Sn(n.visibleWrites,t);if(zc(o))return e;if(e==null&&!Vc(o,Se()))return null;{let a=e||ke.EMPTY_NODE;return Gr(o,a)}}}else{let s=Sn(n.visibleWrites,t);if(!i&&zc(s))return e;if(!i&&e==null&&!Vc(s,Se()))return null;{let o=function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Pt(_.path,t)||Pt(t,_.path))},a=Rv(n.allWrites,o,t),u=e||ke.EMPTY_NODE;return Gr(a,u)}}}function uT(n,t,e){let r=ke.EMPTY_NODE,i=Zn(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Qe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(e){let s=Sn(n.visibleWrites,t);return e.forEachChild(Qe,(o,a)=>{let u=Gr(Sn(s,new Te(o)),a);r=r.updateImmediateChild(o,u)}),kg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Sn(n.visibleWrites,t);return kg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cT(n,t,e,r,i){ne(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ve(t,e);if(Vc(n.visibleWrites,s))return null;{let o=Sn(n.visibleWrites,s);return zc(o)?i.getChild(e):Gr(o,i.getChild(e))}}function dT(n,t,e,r){let i=Ve(t,e),s=Zn(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(e)){let o=Sn(n.visibleWrites,i);return Gr(o,r.getNode().getImmediateChild(e))}else return null}function hT(n,t){return Zn(n.visibleWrites,t)}function fT(n,t,e,r,i,s,o){let a,u=Sn(n.visibleWrites,t),_=Zn(u,Se());if(_!=null)a=_;else if(e!=null)a=Gr(u,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let I=[],T=o.getCompare(),R=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=R.getNext();for(;f&&I.length<i;)T(f,r)!==0&&I.push(f),f=R.getNext();return I}else return[]}function pT(){return{visibleWrites:Mt.empty(),allWrites:[],lastWriteId:-1}}function Hc(n,t,e,r){return Tv(n.writeTree,n.treePath,t,e,r)}function Iv(n,t){return uT(n.writeTree,n.treePath,t)}function Dg(n,t,e,r){return cT(n.writeTree,n.treePath,t,e,r)}function fa(n,t){return hT(n.writeTree,Ve(n.treePath,t))}function mT(n,t,e,r,i,s){return fT(n.writeTree,n.treePath,t,e,r,i,s)}function ad(n,t,e){return dT(n.writeTree,n.treePath,t,e)}function Ov(n,t){return Av(Ve(n.treePath,t),n.writeTree)}function Av(n,t){return{treePath:n,writeTree:t}}var Gc=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,r=t.childName;ne(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(r,Rg(r,t.snapshotNode,i.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(r,KR(r,i.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(r,qR(r,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(r,Rg(r,t.snapshotNode,i.oldSnap));else throw zn("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var $c=class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}},xv=new $c,ds=class{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new cs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ad(this.writes_,t,r)}}getChildAfterChild(t,e,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jn(this.viewCache_),s=mT(this.writes_,i,e,1,r,t);return s.length===0?null:s[0]}};function gT(n,t){ne(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ne(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function vT(n,t,e,r,i){let s=new Gc,o,a;if(e.type===rn.OVERWRITE){let _=e;_.source.fromUser?o=Wc(n,t,_.path,_.snap,r,i,s):(ne(_.source.fromServer,"Unknown source."),a=_.source.tagged||t.serverCache.isFiltered()&&!ye(_.path),o=pa(n,t,_.path,_.snap,r,i,a,s))}else if(e.type===rn.MERGE){let _=e;_.source.fromUser?o=bT(n,t,_.path,_.children,r,i,s):(ne(_.source.fromServer,"Unknown source."),a=_.source.tagged||t.serverCache.isFiltered(),o=qc(n,t,_.path,_.children,r,i,a,s))}else if(e.type===rn.ACK_USER_WRITE){let _=e;_.revert?o=ET(n,t,_.path,r,i,s):o=_T(n,t,_.path,_.affectedTree,r,i,s)}else if(e.type===rn.LISTEN_COMPLETE)o=wT(n,t,e.path,r,s);else throw zn("Unknown operation type: "+e.type);let u=s.getChanges();return yT(t,o,u),{viewCache:o,changes:u}}function yT(n,t,e){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bc(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&e.push(WR(Bc(t)))}}function kv(n,t,e,r,i,s){let o=t.eventCache;if(fa(r,e)!=null)return t;{let a,u;if(ye(e))if(ne(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let _=Jn(t),I=_ instanceof ke?_:ke.EMPTY_NODE,T=Iv(r,I);a=n.filter.updateFullNode(t.eventCache.getNode(),T,s)}else{let _=Hc(r,Jn(t));a=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{let _=ve(e);if(_===".priority"){ne(Rn(e)===1,"Can't have a priority with additional path components");let I=o.getNode();u=t.serverCache.getNode();let T=Dg(r,e,I,u);T!=null?a=n.filter.updatePriority(I,T):a=o.getNode()}else{let I=Ae(e),T;if(o.isCompleteForChild(_)){u=t.serverCache.getNode();let R=Dg(r,e,o.getNode(),u);R!=null?T=o.getNode().getImmediateChild(_).updateChild(I,R):T=o.getNode().getImmediateChild(_)}else T=ad(r,_,t.serverCache);T!=null?a=n.filter.updateChild(o.getNode(),_,T,I,i,s):a=o.getNode()}}return ls(t,a,o.isFullyInitialized()||ye(e),n.filter.filtersNodes())}}function pa(n,t,e,r,i,s,o,a){let u=t.serverCache,_,I=o?n.filter:n.filter.getIndexedFilter();if(ye(e))_=I.updateFullNode(u.getNode(),r,null);else if(I.filtersNodes()&&!u.isFiltered()){let f=u.getNode().updateChild(e,r);_=I.updateFullNode(u.getNode(),f,null)}else{let f=ve(e);if(!u.isCompleteForPath(e)&&Rn(e)>1)return t;let w=Ae(e),g=u.getNode().getImmediateChild(f).updateChild(w,r);f===".priority"?_=I.updatePriority(u.getNode(),g):_=I.updateChild(u.getNode(),f,g,w,xv,null)}let T=Ev(t,_,u.isFullyInitialized()||ye(e),I.filtersNodes()),R=new ds(i,T,s);return kv(n,T,e,i,R,a)}function Wc(n,t,e,r,i,s,o){let a=t.eventCache,u,_,I=new ds(i,t,s);if(ye(e))_=n.filter.updateFullNode(t.eventCache.getNode(),r,o),u=ls(t,_,!0,n.filter.filtersNodes());else{let T=ve(e);if(T===".priority")_=n.filter.updatePriority(t.eventCache.getNode(),r),u=ls(t,_,a.isFullyInitialized(),a.isFiltered());else{let R=Ae(e),f=a.getNode().getImmediateChild(T),w;if(ye(R))w=r;else{let m=I.getCompleteChild(T);m!=null?lv(R)===".priority"&&m.getChild(cv(R)).isEmpty()?w=m:w=m.updateChild(R,r):w=ke.EMPTY_NODE}if(f.equals(w))u=t;else{let m=n.filter.updateChild(a.getNode(),T,w,R,I,o);u=ls(t,m,a.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function Pg(n,t){return n.eventCache.isCompleteForChild(t)}function bT(n,t,e,r,i,s,o){let a=t;return r.foreach((u,_)=>{let I=Ve(e,u);Pg(t,ve(I))&&(a=Wc(n,a,I,_,i,s,o))}),r.foreach((u,_)=>{let I=Ve(e,u);Pg(t,ve(I))||(a=Wc(n,a,I,_,i,s,o))}),a}function Mg(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function qc(n,t,e,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t,_;ye(e)?_=r:_=new st(null).setTree(e,r);let I=t.serverCache.getNode();return _.children.inorderTraversal((T,R)=>{if(I.hasChild(T)){let f=t.serverCache.getNode().getImmediateChild(T),w=Mg(n,f,R);u=pa(n,u,new Te(T),w,i,s,o,a)}}),_.children.inorderTraversal((T,R)=>{let f=!t.serverCache.isCompleteForChild(T)&&R.value===null;if(!I.hasChild(T)&&!f){let w=t.serverCache.getNode().getImmediateChild(T),m=Mg(n,w,R);u=pa(n,u,new Te(T),m,i,s,o,a)}}),u}function _T(n,t,e,r,i,s,o){if(fa(i,e)!=null)return t;let a=t.serverCache.isFiltered(),u=t.serverCache;if(r.value!=null){if(ye(e)&&u.isFullyInitialized()||u.isCompleteForPath(e))return pa(n,t,e,u.getNode().getChild(e),i,s,a,o);if(ye(e)){let _=new st(null);return u.getNode().forEachChild(Fr,(I,T)=>{_=_.set(new Te(I),T)}),qc(n,t,e,_,i,s,a,o)}else return t}else{let _=new st(null);return r.foreach((I,T)=>{let R=Ve(e,I);u.isCompleteForPath(R)&&(_=_.set(I,u.getNode().getChild(R)))}),qc(n,t,e,_,i,s,a,o)}}function wT(n,t,e,r,i){let s=t.serverCache,o=Ev(t,s.getNode(),s.isFullyInitialized()||ye(e),s.isFiltered());return kv(n,o,e,r,xv,i)}function ET(n,t,e,r,i,s){let o;if(fa(r,e)!=null)return t;{let a=new ds(r,t,i),u=t.eventCache.getNode(),_;if(ye(e)||ve(e)===".priority"){let I;if(t.serverCache.isFullyInitialized())I=Hc(r,Jn(t));else{let T=t.serverCache.getNode();ne(T instanceof ke,"serverChildren would be complete if leaf node"),I=Iv(r,T)}I=I,_=n.filter.updateFullNode(u,I,s)}else{let I=ve(e),T=ad(r,I,t.serverCache);T==null&&t.serverCache.isCompleteForChild(I)&&(T=u.getImmediateChild(I)),T!=null?_=n.filter.updateChild(u,I,T,Ae(e),a,s):t.eventCache.getNode().hasChild(I)?_=n.filter.updateChild(u,I,ke.EMPTY_NODE,Ae(e),a,s):_=u,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Hc(r,Jn(t)),o.isLeafNode()&&(_=n.filter.updateFullNode(_,o,s)))}return o=t.serverCache.isFullyInitialized()||fa(r,Se())!=null,ls(t,_,o,n.filter.filtersNodes())}}function CT(n,t){let e=Jn(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!ye(t)&&!e.getImmediateChild(ve(t)).isEmpty())?e.getChild(t):null}function Ng(n,t,e,r){t.type===rn.MERGE&&t.source.queryId!==null&&(ne(Jn(n.viewCache_),"We should always have a full cache before handling merges"),ne(Bc(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=vT(n.processor_,i,t,e,r);return gT(n.processor_,s.viewCache),ne(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,ST(n,s.changes,s.viewCache.eventCache.getNode(),null)}function ST(n,t,e,r){let i=r?[r]:n.eventRegistrations_;return ZR(n.eventGenerator_,t,e,i)}var jg;function RT(n){ne(!jg,"__referenceConstructor has already been defined"),jg=n}function ld(n,t,e,r){let i=t.source.queryId;if(i!==null){let s=n.views.get(i);return ne(s!=null,"SyncTree gave us an op for an invalid query."),Ng(s,t,e,r)}else{let s=[];for(let o of n.views.values())s=s.concat(Ng(o,t,e,r));return s}}function ud(n,t){let e=null;for(let r of n.views.values())e=e||CT(r,t);return e}var Lg;function TT(n){ne(!Lg,"__referenceConstructor has already been defined"),Lg=n}var ma=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new st(null),this.pendingWriteTree_=pT(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Dv(n,t,e,r,i){return rT(n.pendingWriteTree_,t,e,r,i),i?va(n,new Hr(yv(),t,e)):[]}function Kn(n,t,e=!1){let r=iT(n.pendingWriteTree_,t);if(sT(n.pendingWriteTree_,t)){let s=new st(null);return r.snap!=null?s=s.set(Se(),!0):Rt(r.children,o=>{s=s.set(new Te(o),!0)}),va(n,new Uc(r.path,s,e))}else return[]}function ga(n,t,e){return va(n,new Hr(bv(),t,e))}function IT(n,t,e){let r=st.fromObject(e);return va(n,new ha(bv(),t,r))}function OT(n,t,e,r){let i=Nv(n,r);if(i!=null){let s=jv(i),o=s.path,a=s.queryId,u=Ct(o,t),_=new Hr(_v(a),u,e);return Lv(n,o,_)}else return[]}function AT(n,t,e,r){let i=Nv(n,r);if(i){let s=jv(i),o=s.path,a=s.queryId,u=Ct(o,t),_=st.fromObject(e),I=new ha(_v(a),u,_);return Lv(n,o,I)}else return[]}function cd(n,t,e){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let u=Ct(o,t),_=ud(a,u);if(_)return _});return Tv(i,t,s,e,!0)}function va(n,t){return Pv(t,n.syncPointTree_,null,Sv(n.pendingWriteTree_,Se()))}function Pv(n,t,e,r){if(ye(n.path))return Mv(n,t,e,r);{let i=t.get(Se());e==null&&i!=null&&(e=ud(i,Se()));let s=[],o=ve(n.path),a=n.operationForChild(o),u=t.children.get(o);if(u&&a){let _=e?e.getImmediateChild(o):null,I=Ov(r,o);s=s.concat(Pv(a,u,_,I))}return i&&(s=s.concat(ld(i,n,r,e))),s}}function Mv(n,t,e,r){let i=t.get(Se());e==null&&i!=null&&(e=ud(i,Se()));let s=[];return t.children.inorderTraversal((o,a)=>{let u=e?e.getImmediateChild(o):null,_=Ov(r,o),I=n.operationForChild(o);I&&(s=s.concat(Mv(I,a,u,_)))}),i&&(s=s.concat(ld(i,n,r,e))),s}function Nv(n,t){return n.tagToQueryMap.get(t)}function jv(n){let t=n.indexOf("$");return ne(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Te(n.substr(0,t))}}function Lv(n,t,e){let r=n.syncPointTree_.get(t);ne(r,"Missing sync point for query tag that we're tracking");let i=Sv(n.pendingWriteTree_,t);return ld(r,e,i,null)}var Kc=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},Yc=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Ve(this.path_,t);return new n(this.syncTree_,e)}node(){return cd(this.syncTree_,this.path_)}},xT=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Fg=function(n,t,e){if(!n||typeof n!="object")return n;if(ne(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return kT(n[".sv"],t,e);if(typeof n[".sv"]=="object")return DT(n[".sv"],t);ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},kT=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:ne(!1,"Unexpected server value: "+n)}},DT=function(n,t,e){n.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);let i=t.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},PT=function(n,t,e,r){return dd(t,new Yc(e,n),r)},Fv=function(n,t,e){return dd(n,new Kc(t),e)};function dd(n,t,e){let r=n.getPriority().val(),i=Fg(r,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=Fg(o.getValue(),t,e);return a!==o.getValue()||i!==o.getPriority().val()?new Vr(a,qe(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Vr(i))),o.forEachChild(Qe,(a,u)=>{let _=dd(u,t.getImmediateChild(a),e);_!==u&&(s=s.updateImmediateChild(a,_))}),s}}var hs=class{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}};function hd(n,t){let e=t instanceof Te?t:new Te(t),r=n,i=ve(e);for(;i!==null;){let s=Hn(r.node.children,i)||{children:{},childCount:0};r=new hs(i,r,s),e=Ae(e),i=ve(e)}return r}function qr(n){return n.node.value}function Uv(n,t){n.node.value=t,Qc(n)}function Bv(n){return n.node.childCount>0}function MT(n){return qr(n)===void 0&&!Bv(n)}function ya(n,t){Rt(n.node.children,(e,r)=>{t(new hs(e,n,r))})}function Vv(n,t,e,r){e&&!r&&t(n),ya(n,i=>{Vv(i,t,!0,r)}),e&&r&&t(n)}function NT(n,t,e){let r=e?n:n.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function gs(n){return new Te(n.parent===null?n.name:gs(n.parent)+"/"+n.name)}function Qc(n){n.parent!==null&&jT(n.parent,n.name,n)}function jT(n,t,e){let r=MT(e),i=Vt(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,Qc(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,Qc(n))}var LT=/[\[\].#$\/\u0000-\u001F\u007F]/,FT=/[\[\].#$\u0000-\u001F\u007F]/,cc=10*1024*1024,zv=function(n){return typeof n=="string"&&n.length!==0&&!LT.test(n)},Hv=function(n){return typeof n=="string"&&n.length!==0&&!FT.test(n)},UT=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hv(n)};var BT=function(n,t,e,r){r&&t===void 0||fd(Wo(n,"value"),t,e)},fd=function(n,t,e){let r=e instanceof Te?new Sc(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Wn(r));if(typeof t=="function")throw new Error(n+"contains a function "+Wn(r)+" with contents = "+t.toString());if(Gg(t))throw new Error(n+"contains "+t.toString()+" "+Wn(r));if(typeof t=="string"&&t.length>cc/3&&Ki(t)>cc)throw new Error(n+"contains a string greater than "+cc+" utf8 bytes "+Wn(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,s=!1;if(Rt(t,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!zv(o)))throw new Error(n+" contains an invalid key ("+o+") "+Wn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);PR(r,o),fd(n,a,r),MR(r)}),i&&s)throw new Error(n+' contains ".value" child '+Wn(r)+" in addition to actual children.")}};var Gv=function(n,t,e,r){if(!(r&&e===void 0)&&!Hv(e))throw new Error(Wo(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},VT=function(n,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Gv(n,t,e,r)},zT=function(n,t){if(ve(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},HT=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!zv(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!UT(e))throw new Error(Wo(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Jc=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function $v(n,t){let e=null;for(let r=0;r<t.length;r++){let i=t[r],s=i.getPath();e!==null&&!dv(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(i)}e&&n.eventLists_.push(e)}function on(n,t,e){$v(n,e),GT(n,r=>Pt(r,t)||Pt(t,r))}function GT(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;t(s)?($T(n.eventLists_[r]),n.eventLists_[r]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function $T(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let r=e.getEventRunner();Yn&&Ye("event: "+e.toString()),Wr(r)}}}var WT="repo_interrupt",qT=25,Xc=class{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=da(),this.transactionQueueTree_=new hs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function KT(n,t,e){if(n.stats_=id(n.repoInfo_),n.forceRestClient_||lR())n.server_=new Mc(n.repoInfo_,(r,i,s,o)=>{Ug(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Bg(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ze(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new sd(n.repoInfo_,t,(r,i,s,o)=>{Ug(n,r,i,s,o)},r=>{Bg(n,r)},r=>{QT(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=cR(n.repoInfo_,()=>new Fc(n.stats_,n.server_)),n.infoData_=new Nc,n.infoSyncTree_=new ma({startListening:(r,i,s,o)=>{let a=[],u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=ga(n.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),md(n,"connected",!1),n.serverSyncTree_=new ma({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,u)=>{let _=o(a,u);on(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function YT(n){let e=n.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function pd(n){return xT({timestamp:YT(n)})}function Ug(n,t,e,r,i){n.dataUpdateCount++;let s=new Te(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(i)if(r){let u=qi(e,_=>qe(_));o=AT(n.serverSyncTree_,s,u,i)}else{let u=qe(e);o=OT(n.serverSyncTree_,s,u,i)}else if(r){let u=qi(e,_=>qe(_));o=IT(n.serverSyncTree_,s,u)}else{let u=qe(e);o=ga(n.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=ba(n,s)),on(n.eventQueue_,a,o)}function Bg(n,t){md(n,"connected",t),t===!1&&XT(n)}function QT(n,t){Rt(t,(e,r)=>{md(n,e,r)})}function md(n,t,e){let r=new Te("/.info/"+t),i=qe(e);n.infoData_.updateSnapshot(r,i);let s=ga(n.infoSyncTree_,r,i);on(n.eventQueue_,r,s)}function Wv(n){return n.nextWriteId_++}function JT(n,t,e,r,i){gd(n,"set",{path:t.toString(),value:e,priority:r});let s=pd(n),o=qe(e,r),a=cd(n.serverSyncTree_,t),u=Fv(o,a,s),_=Wv(n),I=Dv(n.serverSyncTree_,t,u,_,!0);$v(n.eventQueue_,I),n.server_.put(t.toString(),o.val(!0),(R,f)=>{let w=R==="ok";w||it("set at "+t+" failed: "+R);let m=Kn(n.serverSyncTree_,_,!w);on(n.eventQueue_,t,m),eI(n,i,R,f)});let T=Jv(n,t);ba(n,T),on(n.eventQueue_,T,[])}function XT(n){gd(n,"onDisconnectEvents");let t=pd(n),e=da();jc(n.onDisconnect_,Se(),(i,s)=>{let o=PT(i,s,n.serverSyncTree_,t);vv(e,i,o)});let r=[];jc(e,Se(),(i,s)=>{r=r.concat(ga(n.serverSyncTree_,i,s));let o=Jv(n,i);ba(n,o)}),n.onDisconnect_=da(),on(n.eventQueue_,Se(),r)}function ZT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WT)}function gd(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Ye(e,...t)}function eI(n,t,e,r){t&&Wr(()=>{if(e==="ok")t(null);else{let i=(e||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,t(o)}})}function qv(n,t,e){return cd(n.serverSyncTree_,t,e)||ke.EMPTY_NODE}function vd(n,t=n.transactionQueueTree_){if(t||_a(n,t),qr(t)){let e=Yv(n,t);ne(e.length>0,"Sending zero length transaction queue"),e.every(i=>i.status===0)&&tI(n,gs(t),e)}else Bv(t)&&ya(t,e=>{vd(n,e)})}function tI(n,t,e){let r=e.map(_=>_.currentWriteId),i=qv(n,t,r),s=i,o=i.hash();for(let _=0;_<e.length;_++){let I=e[_];ne(I.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;let T=Ct(t,I.path);s=s.updateChild(T,I.currentOutputSnapshotRaw)}let a=s.val(!0),u=t;n.server_.put(u.toString(),a,_=>{gd(n,"transaction put response",{path:u.toString(),status:_});let I=[];if(_==="ok"){let T=[];for(let R=0;R<e.length;R++)e[R].status=2,I=I.concat(Kn(n.serverSyncTree_,e[R].currentWriteId)),e[R].onComplete&&T.push(()=>e[R].onComplete(null,!0,e[R].currentOutputSnapshotResolved)),e[R].unwatcher();_a(n,hd(n.transactionQueueTree_,t)),vd(n,n.transactionQueueTree_),on(n.eventQueue_,t,I);for(let R=0;R<T.length;R++)Wr(T[R])}else{if(_==="datastale")for(let T=0;T<e.length;T++)e[T].status===3?e[T].status=4:e[T].status=0;else{it("transaction at "+u.toString()+" failed: "+_);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=_}ba(n,t)}},o)}function ba(n,t){let e=Kv(n,t),r=gs(e),i=Yv(n,e);return nI(n,i,r),r}function nI(n,t,e){if(t.length===0)return;let r=[],i=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let u=t[a],_=Ct(e,u.path),I=!1,T;if(ne(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)I=!0,T=u.abortReason,i=i.concat(Kn(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=qT)I=!0,T="maxretry",i=i.concat(Kn(n.serverSyncTree_,u.currentWriteId,!0));else{let R=qv(n,u.path,o);u.currentInputSnapshot=R;let f=t[a].update(R.val());if(f!==void 0){fd("transaction failed: Data returned ",f,u.path);let w=qe(f);typeof f=="object"&&f!=null&&Vt(f,".priority")||(w=w.updatePriority(R.getPriority()));let g=u.currentWriteId,C=pd(n),p=Fv(w,R,C);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=p,u.currentWriteId=Wv(n),o.splice(o.indexOf(g),1),i=i.concat(Dv(n.serverSyncTree_,u.path,p,u.currentWriteId,u.applyLocally)),i=i.concat(Kn(n.serverSyncTree_,g,!0))}else I=!0,T="nodata",i=i.concat(Kn(n.serverSyncTree_,u.currentWriteId,!0))}on(n.eventQueue_,e,i),i=[],I&&(t[a].status=2,function(R){setTimeout(R,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(T==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(T),!1,null))))}_a(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Wr(r[a]);vd(n,n.transactionQueueTree_)}function Kv(n,t){let e,r=n.transactionQueueTree_;for(e=ve(t);e!==null&&qr(r)===void 0;)r=hd(r,e),t=Ae(t),e=ve(t);return r}function Yv(n,t){let e=[];return Qv(n,t,e),e.sort((r,i)=>r.order-i.order),e}function Qv(n,t,e){let r=qr(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);ya(t,i=>{Qv(n,i,e)})}function _a(n,t){let e=qr(t);if(e){let r=0;for(let i=0;i<e.length;i++)e[i].status!==2&&(e[r]=e[i],r++);e.length=r,Uv(t,e.length>0?e:void 0)}ya(t,r=>{_a(n,r)})}function Jv(n,t){let e=gs(Kv(n,t)),r=hd(n.transactionQueueTree_,t);return NT(r,i=>{dc(n,i)}),dc(n,r),Vv(r,i=>{dc(n,i)}),e}function dc(n,t){let e=qr(t);if(e){let r=[],i=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(ne(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(ne(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),i=i.concat(Kn(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&r.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Uv(t,void 0):e.length=s+1,on(n.eventQueue_,gs(t),i);for(let o=0;o<r.length;o++)Wr(r[o])}}function rI(n){let t="",e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function iI(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let r=e.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):it(`Invalid query segment '${e}' in query '${n}'`)}return t}var Vg=function(n,t){let e=sI(n),r=e.namespace;e.domain==="firebase.com"&&sn(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&e.domain!=="localhost"&&sn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||eR();let i=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new ia(e.host,e.secure,r,i,t,"",r!==e.subdomain),path:new Te(e.pathString)}},sI=function(n){let t="",e="",r="",i="",s="",o=!0,a="https",u=443;if(typeof n=="string"){let _=n.indexOf("//");_>=0&&(a=n.substring(0,_-1),n=n.substring(_+2));let I=n.indexOf("/");I===-1&&(I=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),t=n.substring(0,Math.min(I,T)),I<T&&(i=rI(n.substring(I,T)));let R=iI(n.substring(Math.min(n.length,T)));_=t.indexOf(":"),_>=0?(o=a==="https"||a==="wss",u=parseInt(t.substring(_+1),10)):_=t.length;let f=t.slice(0,_);if(f.toLowerCase()==="localhost")e="localhost";else if(f.split(".").length<=2)e=f;else{let w=t.indexOf(".");r=t.substring(0,w).toLowerCase(),e=t.substring(w+1),s=r}"ns"in R&&(s=R.ns)}return{host:t,port:u,domain:e,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Zc=class n{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:lv(this._path)}get ref(){return new Xn(this._repo,this._path)}get _queryIdentifier(){let t=Ig(this._queryParams),e=rd(t);return e==="{}"?"default":e}get _queryObject(){return Ig(this._queryParams)}isEqual(t){if(t=rt(t),!(t instanceof n))return!1;let e=this._repo===t._repo,r=dv(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+DR(this._path)}};var Xn=class n extends Zc{constructor(t,e){super(t,e,new Pc,!1)}get parent(){let t=cv(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};function Xv(n,t){return n=rt(n),n._checkNotDeleted("ref"),t!==void 0?oI(n._root,t):n._root}function oI(n,t){return n=rt(n),ve(n._path)===null?VT("child","path",t,!1):Gv("child","path",t,!1),new Xn(n._repo,Ve(n._path,t))}function Zv(n,t){n=rt(n),zT("set",n._path),BT("set",t,n._path,!1);let e=new wn;return JT(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}RT(Xn);TT(Xn);var aI="FIREBASE_DATABASE_EMULATOR_HOST",ed={},lI=!1;function uI(n,t,e,r){n.repoInfo_=new ia(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function cI(n,t,e,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||sn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ye("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=Vg(s,i),a=o.repoInfo,u,_;typeof process<"u"&&process.env&&(_=process.env[aI]),_?(u=!0,s=`http://${_}?ns=${a.namespace}`,o=Vg(s,i),a=o.repoInfo):u=!o.repoInfo.secure;let I=i&&u?new as(as.OWNER):new vc(n.name,n.options,t);HT("Invalid Firebase Database URL",o),ye(o.path)||sn("Database URL must point to the root of a Firebase Database (not including a child path).");let T=hI(a,n,I,new gc(n.name,e));return new td(T,n)}function dI(n,t){let e=ed[t];(!e||e[n.key]!==n)&&sn(`Database ${t}(${n.repoInfo_}) has already been deleted.`),ZT(n),delete e[n.key]}function hI(n,t,e,r){let i=ed[t.name];i||(i={},ed[t.name]=i);let s=i[n.toURLString()];return s&&sn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xc(n,lI,e,r),i[n.toURLString()]=s,s}var td=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(KT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xn(this._repo,Se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&sn("Cannot call "+t+" on a deleted database.")}};function ey(n=$n(),t){let e=Ht(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){let r=zo("database");r&&fI(e,...r)}return e}function fI(n,t,e,r={}){n=rt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&sn("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new as(as.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Ho(r.mockUserToken,n.app.options.projectId);s=new as(o)}uI(i,t,e,s)}function pI(n){JS(Jo),dt(new Ge("database",(t,{instanceIdentifier:e})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return cI(r,i,s,e)},"PUBLIC").setMultipleInstances(!0)),$e(ug,cg,n),$e(ug,cg,"esm2017")}sd.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};sd.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};pI();var wa=class n{constructor(t){this.http=t}uploadFile(t){let e=lg(),r=ag(e,`products/${t.name}`);sg(r,t).then(()=>{og(r).then(i=>this._saveToDB(i,t.name))})}_saveToDB(t,e){let r=ey();Zv(Xv(r,"products/"+e.replace(".","")),{downloadURL:t})}static \u0275fac=function(e){return new(e||n)(ee(Mn))};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ea=class n{constructor(t,e){this.fileS=t;this.currency=e}files=[null,null,null,null];quantity=0;price=0;productGroup=new Rr({productTitle:new Xt("",[xt.required]),productDescription:new Xt("",[xt.required]),productQuantity:new Xt(0,[xt.required]),productPrice:new Xt(0,[xt.required])});onImageAdded(t,e){this.files.splice(e,e,t.target.files[0])}addOne(){this.quantity+=1}removeOne(){this.quantity>0&&(this.quantity-=1)}showImage(t){return URL.createObjectURL(this.files[t])}static \u0275fac=function(e){return new(e||n)(fe(wa),fe(cr))};static \u0275cmp=De({type:n,selectors:[["app-add-product"]],standalone:!0,features:[Ft([cr]),Pe],decls:54,vars:5,consts:[[1,"add-product-div"],[3,"formGroup"],[2,"display","flex","flex-direction","column"],[1,"product-images"],[1,"image"],["for","inputFileZero"],[3,"src"],["type","file","id","inputFileZero",1,"input-file",3,"change"],["for","inputFileOne"],["type","file","id","inputFileOne",1,"input-file",3,"change"],["for","inputFileTwo"],["type","file","id","inputFileTwo",1,"input-file",3,"change"],["for","inputFileThree"],["type","file","id","inputFileThree",1,"input-file",3,"change"],["placeholder","Product Title","formControlName","productTitle",1,"input-text"],["placeholder","Description","formControlName","productDescription"],[2,"list-style-type","none","display","flex","justify-content","space-between"],[2,"flex-basis","48%"],[2,"display","flex","align-items","center","justify-content","space-between"],["type","button",1,"quantity-button",3,"click"],["formControlName","productQuantity",1,"input-text",2,"flex-basis","80%"],[1,"price-symbol"],["placeholder","Price","formControlName","productPrice",1,"input-text",2,"width","100%"],[1,"save-btn"]],template:function(e,r){e&1&&(Q(0,"div",0)(1,"form",1)(2,"div",2)(3,"label"),te(4,"Product Images"),J(),Q(5,"div",3)(6,"div",4)(7,"label",5),ge(8,"img",6),Q(9,"p"),te(10,"Add an image"),J()(),Q(11,"input",7),xe("change",function(s){return r.onImageAdded(s,0)}),J()(),Q(12,"div",4)(13,"label",8),ge(14,"img",6),Q(15,"p"),te(16,"Add an image"),J()(),Q(17,"input",9),xe("change",function(s){return r.onImageAdded(s,1)}),J()(),Q(18,"div",4)(19,"label",10),ge(20,"img",6),Q(21,"p"),te(22,"Add an image"),J()(),Q(23,"input",11),xe("change",function(s){return r.onImageAdded(s,2)}),J()(),Q(24,"div",4)(25,"label",12),ge(26,"img",6),Q(27,"p"),te(28,"Add an image"),J()(),Q(29,"input",13),xe("change",function(s){return r.onImageAdded(s,3)}),J()()()(),Q(30,"div",2)(31,"label"),te(32,"Product Title"),J(),ge(33,"input",14),J(),Q(34,"div",2)(35,"label"),te(36,"Product Description"),J(),ge(37,"textarea",15),J(),Q(38,"ul",16)(39,"li",17)(40,"label"),te(41,"Quantity"),J(),Q(42,"div",18)(43,"button",19),xe("click",function(){return r.addOne()}),te(44,"+"),J(),ge(45,"input",20),Q(46,"button",19),xe("click",function(){return r.removeOne()}),te(47,"-"),J()()(),Q(48,"li",17)(49,"label",21),te(50,"Price"),J(),ge(51,"input",22),J()(),Q(52,"button",23),te(53,"Save"),J()()()),e&2&&(tt(),bt("formGroup",r.productGroup),tt(7),bt("src",r.showImage(0),Xr),tt(6),bt("src",r.showImage(1),Xr),tt(6),bt("src",r.showImage(2),Xr),tt(6),bt("src",r.showImage(3),Xr))},dependencies:[ni,rp,To,Tr,Eo,Co,Io,ji,Li,_n,$i,dm],styles:[".add-product-div[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#fff;padding-left:8vw;padding-right:8vw}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:80%;justify-content:space-evenly}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:12px}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   #inputFileZero[_ngcontent-%COMP%], .add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   #inputFileOne[_ngcontent-%COMP%], .add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   #inputFileTwo[_ngcontent-%COMP%], .add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   #inputFileThree[_ngcontent-%COMP%]{display:none}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:14px}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;object-fit:cover}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .product-images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:160px;outline-width:0;border:none;background-color:#e9e8e8;padding-left:16px;padding-right:16px;padding-top:16px;border-radius:24px;resize:none;font-size:16px;font-family:Inter,sans-serif;margin-top:12px}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{height:40px;outline-width:0;border:none;border-radius:999px;background-color:#e9e8e8;padding-left:16px;font-size:16px;margin-top:12px}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .quantity-button[_ngcontent-%COMP%]{height:40px;width:40px;background-color:#e9e8e8;border:none;border-radius:999px;margin-top:12px}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{height:40px;border-radius:999px;border:none;background-color:#ffd701;font-weight:700}@media only screen and (max-width: 599px){.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column}.add-product-div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:12px}}"]})};var ty=[{title:"Home",path:"home",component:No},{title:"Login",path:"login",component:Mo},{title:"Dashboard",path:"dashboard",component:Fo,children:[{title:"Settings",path:"settings",component:Uo},{path:"",redirectTo:"settings",pathMatch:"full"}]},{title:"Add Product",path:"add-product",component:Ea},{path:"",redirectTo:"/home",pathMatch:"full"}];var gI="@",vI=(()=>{class n{constructor(e,r,i,s,o){this.doc=e,this.delegate=r,this.zone=i,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=Z(ch,{optional:!0}),this.loadingSchedulerFn=Z(yI,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-NGE7TUDM.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(i=>{throw new _e(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,r){let i=this.delegate.createRenderer(e,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new yd(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(e,r);s.use(a),this.scheduler?.notify(10)}).catch(o=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){$a()}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac})}}return n})(),yd=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,r,i){this.delegate.insertBefore(t,e,r,i)}removeChild(t,e,r){this.delegate.removeChild(t,e,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(t,e,r)),this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(t,e,r)),this.delegate.listen(t,e,r)}shouldReplay(t){return this.replay!==null&&t.startsWith(gI)}},yI=new ie("");function ny(n="animations"){return Wa("NgAsyncAnimations"),vt([{provide:xs,useFactory:(t,e,r)=>new vI(t,e,r,n),deps:[Ie,Ys,Ue]},{provide:Ga,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var bI={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Ca="__@ngrx/effects_create__";function ry(n,t={}){let e=t.functional?n:n(),r=X(X({},bI),t);return Object.defineProperty(e,Ca,{value:r}),e}function _I(n){return Object.getOwnPropertyNames(n).filter(r=>n[r]&&n[r].hasOwnProperty(Ca)?n[r][Ca].hasOwnProperty("dispatch"):!1).map(r=>{let i=n[r][Ca];return X({propertyName:r},i)})}function wI(n){return _I(n)}function iy(n){return Object.getPrototypeOf(n)}function EI(n){return!!n.constructor&&n.constructor.name!=="Object"&&n.constructor.name!=="Function"}function sy(n){return typeof n=="function"}function CI(n){return n.filter(sy)}function SI(n,t,e){let r=iy(n),s=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,o=wI(n).map(({propertyName:a,dispatch:u,useEffectsErrorHandler:_})=>{let I=typeof n[a]=="function"?n[a]():n[a],T=_?e(I,t):I;return u===!1?T.pipe(zd()):T.pipe(qd()).pipe(he(f=>({effect:n[a],notification:f,propertyName:a,sourceName:s,sourceInstance:n})))});return Na(...o)}var RI=10;function oy(n,t,e=RI){return n.pipe(jt(r=>(t&&t.handleError(r),e<=1?n:oy(n,t,e-1))))}var ay=(()=>{class n extends Tt{constructor(e){super(),e&&(this.source=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}static{this.\u0275fac=function(r){return new(r||n)(ee(zi))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ly(...n){return pt(t=>n.some(e=>typeof e=="string"?e===t.type:e.type===t.type))}var iM=new ie("@ngrx/effects Internal Root Guard"),sM=new ie("@ngrx/effects User Provided Effects"),oM=new ie("@ngrx/effects Internal Root Effects"),aM=new ie("@ngrx/effects Internal Root Effects Instances"),lM=new ie("@ngrx/effects Internal Feature Effects"),uM=new ie("@ngrx/effects Internal Feature Effects Instance Groups"),TI=new ie("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>oy}),II="@ngrx/effects/init",OI=Vi(II);function AI(n,t){if(n.notification.kind==="N"){let e=n.notification.value;!xI(e)&&t.handleError(new Error(`Effect ${kI(n)} dispatched an invalid action: ${DI(e)}`))}}function xI(n){return typeof n!="function"&&n&&n.type&&typeof n.type=="string"}function kI({propertyName:n,sourceInstance:t,sourceName:e}){let r=typeof t[n]=="function";return!!e?`"${e}.${String(n)}${r?"()":""}"`:`"${String(n)}()"`}function DI(n){try{return JSON.stringify(n)}catch{return n}}var PI="ngrxOnIdentifyEffects";function MI(n){return bd(n,PI)}var NI="ngrxOnRunEffects";function jI(n){return bd(n,NI)}var LI="ngrxOnInitEffects";function FI(n){return bd(n,LI)}function bd(n,t){return n&&t in n&&typeof n[t]=="function"}var uy=(()=>{class n extends Xe{constructor(e,r){super(),this.errorHandler=e,this.effectsErrorHandler=r}addEffects(e){this.next(e)}toActions(){return this.pipe(La(e=>EI(e)?iy(e):e),et(e=>e.pipe(La(UI))),et(e=>{let r=e.pipe(Es(s=>BI(this.errorHandler,this.effectsErrorHandler)(s)),he(s=>(AI(s,this.errorHandler),s.notification)),pt(s=>s.kind==="N"&&s.value!=null),Gd()),i=e.pipe(mt(1),pt(FI),he(s=>s.ngrxOnInitEffects()));return Na(r,i)}))}static{this.\u0275fac=function(r){return new(r||n)(ee(Wt),ee(TI))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UI(n){return MI(n)?n.ngrxOnIdentifyEffects():""}function BI(n,t){return e=>{let r=SI(e,n,t);return jI(e)?e.ngrxOnRunEffects(r):r}}var VI=(()=>{class n{get isStarted(){return!!this.effectsSubscription}constructor(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(r){return new(r||n)(ee(uy),ee(Zt))}}static{this.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cy(...n){let t=n.flat(),e=CI(t);return vt([e,{provide:On,multi:!0,useValue:()=>{Z(Ui),Z(Ao,{optional:!0});let r=Z(VI),i=Z(uy),s=!r.isStarted;s&&r.start();for(let o of t){let a=sy(o)?Z(o):o;i.addEffects(a)}s&&Z(Zt).dispatch(OI())}}])}var HI={email:"",objectId:"",userToken:"",type:""},dy=Lp(HI,jp(Po,(n,t)=>me(X({},n),{email:t.email,objectId:t.objectId,userToken:t.userToken,type:t.userType})));var Sa=class n{constructor(t){this.http=t}login(t,e){return this.http.post("https://squarebattle-us.backendless.app/api/users/login",{login:t,password:e},{headers:new Ot({"Content-Type":"application/json"})})}static \u0275fac=function(e){return new(e||n)(ee(Mn))};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ra=class n{constructor(t,e){this.actions=t;this.authService=e;this.login$=ry(()=>t.pipe(ly(gu),Es(r=>(console.log(r),this.authService.login(r.email,r.password).pipe(he(i=>Po({email:i.email,objectId:i.objectId,userToken:i["user-token"],userType:i.type})))))))}login$;static \u0275fac=function(e){return new(e||n)(ee(ay),ee(Sa))};static \u0275prov=ae({token:n,factory:n.\u0275fac})};var hy={providers:[gh({eventCoalescing:!0}),Tf(ty),ny(),Np(),Mp({name:"user",reducer:dy}),cy(Ra),Ph()]};var gy=Qy(fy());var $I=["*",[["mat-toolbar-row"]]],WI=["*","mat-toolbar-row"],qI=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),py=(()=>{class n{constructor(e,r,i){this._elementRef=e,this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(r){return new(r||n)(fe(je),fe(Un),fe(Ie))}}static{this.\u0275cmp=De({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(r&1&&js(s,qI,5),r&2){let o;ei(o=ti())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,i){r&2&&(Ps(i.color?"mat-"+i.color:""),Lt("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",i._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Pe],ngContentSelectors:WI,decls:2,vars:0,template:function(r,i){r&1&&(or($I),Pn(0),Pn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var my=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ce({type:n})}static{this.\u0275inj=Ee({imports:[Et,Et]})}}return n})();var Ia=class n{constructor(t){this.element=t}openedCategories=!1;showCategories(){let t=this.element.nativeElement.querySelector(".categories");t.classList.toggle("show-categories"),this.openedCategories=t.classList.contains("show-categories")}static \u0275fac=function(e){return new(e||n)(fe(je))};static \u0275cmp=De({type:n,selectors:[["app-navigation"]],standalone:!0,features:[Pe],decls:35,vars:7,consts:[[1,"nav-menu"],[1,"a-categories",3,"click"],[2,"width","100%","display","flex","justify-content","space-between","align-items","center","padding","16px"],[2,"display","flex","justify-content","start","align-items","center"],[1,"menu-icon"],[1,"arrow",3,"fontIcon"],[1,"categories"],[1,"category-item"],[1,"menu-list"],[2,"padding","16px"],["href","#"],[1,"free-div"],[2,"color","red"]],template:function(e,r){e&1&&(Q(0,"nav",0)(1,"a",1),xe("click",function(){return r.showCategories()}),Q(2,"div",2)(3,"div",3)(4,"mat-icon",4),te(5,"menu"),J(),Q(6,"p"),te(7,"All Categories"),J()(),ge(8,"mat-icon",5),J(),Q(9,"ul",6)(10,"li",7),te(11,"One"),J(),Q(12,"li",7),te(13,"One"),J(),Q(14,"li",7),te(15,"One"),J(),Q(16,"li",7),te(17,"One"),J(),Q(18,"li",7),te(19,"One"),J(),Q(20,"li",7),te(21,"One"),J()()(),Q(22,"ul",8)(23,"li",9)(24,"a",10),te(25,"Home"),J()(),Q(26,"li",9)(27,"a",10),te(28,"Shop"),J()()(),Q(29,"div",11)(30,"p"),te(31,"*Free Shipping On Orders "),Q(32,"span",12),te(33),ph(34,"currency"),J()()()()),e&2&&(tt(8),bt("fontIcon",r.openedCategories?"keyboard_arrow_up":"keyboard_arrow_down"),tt(25),Ka("+",mh(34,2,500,"USD","symbol","1.0-0"),""))},dependencies:[_n,Ar,cr],styles:[".nav-menu[_ngcontent-%COMP%]{background-color:#1e1e1e;width:100%;height:40px;display:flex;justify-content:space-between;color:#fff;padding-left:8vw;padding-right:8vw}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{all:unset}.nav-menu[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{list-style-type:none;display:flex;flex-basis:40%;justify-content:space-evenly;align-items:center}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]{background-color:#ffd701;color:#1e1e1e;display:flex;justify-content:center;align-items:center;padding-left:24px;padding-right:24px;position:relative;cursor:pointer}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:none}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:0;overflow:hidden;position:absolute;color:#000;list-style-type:none;background-color:#fff;padding-left:16px;top:100%;left:0}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{height:56px;display:flex;align-items:center}@media only screen and (min-width: 600px){.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]:hover   .categories[_ngcontent-%COMP%]{height:auto;width:100%;animation:_ngcontent-%COMP%_animate-categories;animation-duration:.5s}}.nav-menu[_ngcontent-%COMP%]   .free-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.nav-menu[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 599px){.nav-menu[_ngcontent-%COMP%]{width:80%;height:100%;position:absolute;flex-direction:column;justify-content:start;align-items:start;padding-left:0;padding-right:0;background-color:#fff}.nav-menu[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{width:100%;flex-basis:0;flex-direction:column;background-color:#fff;align-items:start;z-index:10;color:#1e1e1e}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]{width:100%;background-color:#fff;color:#1e1e1e;display:flex;flex-direction:column;justify-content:center;align-items:center;padding-left:0;padding-right:0;cursor:pointer}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:inherit}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{width:100%;color:#000;list-style-type:none;background-color:#fff;top:0;left:0;position:relative}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{padding-left:12px}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .show-categories[_ngcontent-%COMP%]{width:100%;height:100%;animation:_ngcontent-%COMP%_animate-categories;animation-duration:.5s}.nav-menu[_ngcontent-%COMP%]   .a-categories[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   .free-div[_ngcontent-%COMP%]{display:none}}@keyframes _ngcontent-%COMP%_animate-categories{0%{height:0}to{height:336px}}"]})};function YI(n,t){if(n&1){let e=qa();Q(0,"div",11),xe("click",function(){Va(e);let i=Ns();return za(i.navigateToAddProduct())}),ge(1,"mat-icon",15),J()}}var Oa=class n{constructor(t,e){this.router=t;this.element=e;gy.default.initApp("D80EE3D7-77E9-4614-8823-4277DF4DFF55","8CC8EB92-58D3-4949-931B-73217384B47A")}title="TSshop";userType=null;ngOnInit(){this.userType=localStorage.getItem("type")}navigateToLogin(){this.router.navigate(["/login"])}openNavigator(){let t=this.element.nativeElement.querySelector(".navigator"),e=this.element.nativeElement.querySelector(".background");t?.classList.toggle("opened-nav"),e?.classList.toggle("show-background")}navigateToAddProduct(){this.router.navigate(["/add-product"])}clickRequest(){localStorage.getItem("email")!==null&&localStorage.getItem("objectId")!==null&&localStorage.getItem("userToken")!==null&&localStorage.getItem("type")!==null?this.router.navigate(["/dashboard"]):this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(fe(wr),fe(je))};static \u0275cmp=De({type:n,selectors:[["app-root"]],standalone:!0,features:[Pe],decls:67,vars:1,consts:[[2,"display","flex","justify-content","center","align-items","center"],[1,"menu-a",3,"click"],[1,"logo-div"],["src","logo.png",1,"logo-img"],[1,"search-div"],[1,"search-input"],[1,"search-icon-div"],["fontIcon","search"],[1,"options-div"],[2,"cursor","pointer"],["fontIcon","shopping_cart",1,"material-icons-outlined"],[2,"cursor","pointer",3,"click"],["fontIcon","person",1,"material-icons-outlined"],[1,"background"],[1,"navigator"],["fontIcon","add",1,"material-icons-outlined"]],template:function(e,r){e&1&&(Q(0,"header")(1,"mat-toolbar")(2,"div",0)(3,"a",1),xe("click",function(){return r.openNavigator()}),Q(4,"mat-icon"),te(5,"menu"),J()(),Q(6,"div",2),ge(7,"img",3),J()(),Q(8,"div",4),ge(9,"input",5),Q(10,"div",6),ge(11,"mat-icon",7),J()(),Q(12,"div",8),Ds(13,YI,2,0,"div",9),Q(14,"div",9),ge(15,"mat-icon",10),J(),Q(16,"div",11),xe("click",function(){return r.clickRequest()}),ge(17,"mat-icon",12),J()()(),ge(18,"div",13)(19,"app-navigation",14),J(),ge(20,"router-outlet"),Q(21,"section")(22,"ul")(23,"li"),te(24,"Product 1"),J(),Q(25,"li"),te(26,"Product 2"),J(),Q(27,"li"),te(28,"Product 3"),J(),Q(29,"li"),te(30,"Product 4"),J(),Q(31,"li"),te(32,"Product 1"),J(),Q(33,"li"),te(34,"Product 2"),J(),Q(35,"li"),te(36,"Product 3"),J(),Q(37,"li"),te(38,"Product 4"),J(),Q(39,"li"),te(40,"Product 1"),J(),Q(41,"li"),te(42,"Product 2"),J(),Q(43,"li"),te(44,"Product 3"),J(),Q(45,"li"),te(46,"Product 4"),J(),Q(47,"li"),te(48,"Product 1"),J(),Q(49,"li"),te(50,"Product 2"),J(),Q(51,"li"),te(52,"Product 3"),J(),Q(53,"li"),te(54,"Product 1"),J(),Q(55,"li"),te(56,"Product 2"),J(),Q(57,"li"),te(58,"Product 3"),J(),Q(59,"li"),te(60,"Product 4"),J(),Q(61,"li"),te(62,"Product 1"),J(),Q(63,"li"),te(64,"Product 2"),J(),Q(65,"li"),te(66,"Product 3"),J()()()),e&2&&(tt(13),Ms(r.userType!==null&&r.userType==="owner"?13:-1))},dependencies:[Ai,my,py,_n,Ar,Ia],styles:["header[_ngcontent-%COMP%]{position:sticky;top:0}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{--mat-toolbar-standard-height: 120px;--mat-toolbar-container-background-color: white;display:flex;justify-content:space-between;padding-left:8vw;padding-right:8vw}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .menu-a[_ngcontent-%COMP%]{display:none}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .logo-div[_ngcontent-%COMP%]{height:100px;width:100px;overflow:hidden;display:flex;justify-content:center;align-items:center}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .logo-div[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:90%;width:90%;object-fit:contain}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{height:32px;width:18rem;outline:none;border:.1px solid lightgray;border-top-left-radius:999px;border-bottom-left-radius:999px;border-right-width:0;padding-left:1rem}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]   .search-icon-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#ffd701;height:32px;width:56px;border:.1px solid lightgray;border-top-right-radius:999px;border-bottom-right-radius:999px;border-left-width:0}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%]{display:flex}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:40px;width:40px;margin:6px;display:flex;justify-content:center;align-items:center;border:.1px solid gray;border-radius:999px;overflow:hidden}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}@media (max-width: 599px){header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;padding-left:16px;padding-right:16px}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .menu-a[_ngcontent-%COMP%]{display:inherit}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .logo-div[_ngcontent-%COMP%]{height:50px;width:50px;overflow:hidden;display:flex;justify-content:center;align-items:center}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .logo-div[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:90%;width:90%;object-fit:contain}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]{display:none;justify-content:center;align-items:center}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{height:32px;width:18rem;outline:none;border:.1px solid lightgray;border-top-left-radius:999px;border-bottom-left-radius:999px;border-right-width:0;padding-left:1rem}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]   .search-icon-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#ffd701;height:32px;width:56px;border:.1px solid lightgray;border-top-right-radius:999px;border-bottom-right-radius:999px;border-left-width:0}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%]{display:flex}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:40px;width:40px;margin:6px;display:flex;justify-content:center;align-items:center;border:.1px solid gray;border-radius:999px;overflow:hidden}header[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .options-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}header[_ngcontent-%COMP%]   .navigator[_ngcontent-%COMP%]{position:fixed;height:calc(100% - 56px);width:100%;left:-100%}header[_ngcontent-%COMP%]   .navigator.opened-nav[_ngcontent-%COMP%]{left:0;animation:open;animation-duration:.5s}header[_ngcontent-%COMP%]   .navigator[_ngcontent-%COMP%]:not(.opened-nav){left:-100%;animation:close;animation-duration:.5s}header[_ngcontent-%COMP%]   .background.show-background[_ngcontent-%COMP%]{height:calc(100% - 56px);width:100%;background-color:#000;position:fixed;opacity:.5;animation:show;animation-duration:.5s}header[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]:not(.show-background){height:calc(100% - 56px);width:100%;background-color:#000;position:absolute;opacity:0;animation:hide;animation-duration:.5s}@keyframes open{0%{left:-100%}to{left:0}}@keyframes close{0%{left:0}to{left:-100%}}@keyframes show{0%{opacity:0}to{opacity:.5}}@keyframes hide{0%{opacity:.5}to{opacity:0}}}"]})};var QI="firebase",JI="10.14.0";$e(QI,JI,"app");var by="@firebase/installations",Sd="0.6.9";var _y=1e4,wy=`w:${Sd}`,Ey="FIS_v2",XI="https://firebaseinstallations.googleapis.com/v1",ZI=60*60*1e3,eO="installations",tO="Installations";var nO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},tr=new tn(eO,tO,nO);function Cy(n){return n instanceof ct&&n.code.includes("request-failed")}function Sy({projectId:n}){return`${XI}/projects/${n}/installations`}function Ry(n){return{token:n.token,requestStatus:2,expiresIn:iO(n.expiresIn),creationTime:Date.now()}}function Ty(n,t){return ce(this,null,function*(){let r=(yield t.json()).error;return tr.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Iy({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rO(n,{refreshToken:t}){let e=Iy(n);return e.append("Authorization",sO(t)),e}function Oy(n){return ce(this,null,function*(){let t=yield n();return t.status>=500&&t.status<600?n():t})}function iO(n){return Number(n.replace("s","000"))}function sO(n){return`${Ey} ${n}`}function oO(r,i){return ce(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},{fid:e}){let s=Sy(n),o=Iy(n),a=t.getImmediate({optional:!0});if(a){let T=yield a.getHeartbeatsHeader();T&&o.append("x-firebase-client",T)}let u={fid:e,authVersion:Ey,appId:n.appId,sdkVersion:wy},_={method:"POST",headers:o,body:JSON.stringify(u)},I=yield Oy(()=>fetch(s,_));if(I.ok){let T=yield I.json();return{fid:T.fid||e,registrationStatus:2,refreshToken:T.refreshToken,authToken:Ry(T.authToken)}}else throw yield Ty("Create Installation",I)})}function Ay(n){return new Promise(t=>{setTimeout(t,n)})}function aO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var lO=/^[cdef][\w-]{21}$/,Cd="";function uO(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let e=cO(n);return lO.test(e)?e:Cd}catch{return Cd}}function cO(n){return aO(n).substr(0,22)}function xa(n){return`${n.appName}!${n.appId}`}var xy=new Map;function ky(n,t){let e=xa(n);Dy(e,t),dO(e,t)}function Dy(n,t){let e=xy.get(n);if(e)for(let r of e)r(t)}function dO(n,t){let e=hO();e&&e.postMessage({key:n,fid:t}),fO()}var er=null;function hO(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=n=>{Dy(n.data.key,n.data.fid)}),er}function fO(){xy.size===0&&er&&(er.close(),er=null)}var pO="firebase-installations-database",mO=1,nr="firebase-installations-store",wd=null;function Rd(){return wd||(wd=Yo(pO,mO,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(nr)}}})),wd}function Aa(n,t){return ce(this,null,function*(){let e=xa(n),i=(yield Rd()).transaction(nr,"readwrite"),s=i.objectStore(nr),o=yield s.get(e);return yield s.put(t,e),yield i.done,(!o||o.fid!==t.fid)&&ky(n,t.fid),t})}function Py(n){return ce(this,null,function*(){let t=xa(n),r=(yield Rd()).transaction(nr,"readwrite");yield r.objectStore(nr).delete(t),yield r.done})}function ka(n,t){return ce(this,null,function*(){let e=xa(n),i=(yield Rd()).transaction(nr,"readwrite"),s=i.objectStore(nr),o=yield s.get(e),a=t(o);return a===void 0?yield s.delete(e):yield s.put(a,e),yield i.done,a&&(!o||o.fid!==a.fid)&&ky(n,a.fid),a})}function Td(n){return ce(this,null,function*(){let t,e=yield ka(n.appConfig,r=>{let i=gO(r),s=vO(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===Cd?{installationEntry:yield t}:{installationEntry:e,registrationPromise:t}})}function gO(n){let t=n||{fid:uO(),registrationStatus:0};return My(t)}function vO(n,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(tr.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=yO(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:bO(n)}:{installationEntry:t}}function yO(n,t){return ce(this,null,function*(){try{let e=yield oO(n,t);return Aa(n.appConfig,e)}catch(e){throw Cy(e)&&e.customData.serverCode===409?yield Py(n.appConfig):yield Aa(n.appConfig,{fid:t.fid,registrationStatus:0}),e}})}function bO(n){return ce(this,null,function*(){let t=yield vy(n.appConfig);for(;t.registrationStatus===1;)yield Ay(100),t=yield vy(n.appConfig);if(t.registrationStatus===0){let{installationEntry:e,registrationPromise:r}=yield Td(n);return r||e}return t})}function vy(n){return ka(n,t=>{if(!t)throw tr.create("installation-not-found");return My(t)})}function My(n){return _O(n)?{fid:n.fid,registrationStatus:0}:n}function _O(n){return n.registrationStatus===1&&n.registrationTime+_y<Date.now()}function wO(r,i){return ce(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},e){let s=EO(n,e),o=rO(n,e),a=t.getImmediate({optional:!0});if(a){let T=yield a.getHeartbeatsHeader();T&&o.append("x-firebase-client",T)}let u={installation:{sdkVersion:wy,appId:n.appId}},_={method:"POST",headers:o,body:JSON.stringify(u)},I=yield Oy(()=>fetch(s,_));if(I.ok){let T=yield I.json();return Ry(T)}else throw yield Ty("Generate Auth Token",I)})}function EO(n,{fid:t}){return`${Sy(n)}/${t}/authTokens:generate`}function Id(n,t=!1){return ce(this,null,function*(){let e,r=yield ka(n.appConfig,s=>{if(!Ny(s))throw tr.create("not-registered");let o=s.authToken;if(!t&&RO(o))return s;if(o.requestStatus===1)return e=CO(n,t),s;{if(!navigator.onLine)throw tr.create("app-offline");let a=IO(s);return e=SO(n,a),a}});return e?yield e:r.authToken})}function CO(n,t){return ce(this,null,function*(){let e=yield yy(n.appConfig);for(;e.authToken.requestStatus===1;)yield Ay(100),e=yield yy(n.appConfig);let r=e.authToken;return r.requestStatus===0?Id(n,t):r})}function yy(n){return ka(n,t=>{if(!Ny(t))throw tr.create("not-registered");let e=t.authToken;return OO(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function SO(n,t){return ce(this,null,function*(){try{let e=yield wO(n,t),r=Object.assign(Object.assign({},t),{authToken:e});return yield Aa(n.appConfig,r),e}catch(e){if(Cy(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))yield Py(n.appConfig);else{let r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield Aa(n.appConfig,r)}throw e}})}function Ny(n){return n!==void 0&&n.registrationStatus===2}function RO(n){return n.requestStatus===2&&!TO(n)}function TO(n){let t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+ZI}function IO(n){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function OO(n){return n.requestStatus===1&&n.requestTime+_y<Date.now()}function AO(n){return ce(this,null,function*(){let t=n,{installationEntry:e,registrationPromise:r}=yield Td(t);return r?r.catch(console.error):Id(t).catch(console.error),e.fid})}function xO(n,t=!1){return ce(this,null,function*(){let e=n;return yield kO(e),(yield Id(e,t)).token})}function kO(n){return ce(this,null,function*(){let{registrationPromise:t}=yield Td(n);t&&(yield t)})}function DO(n){if(!n||!n.options)throw Ed("App Configuration");if(!n.name)throw Ed("App Name");let t=["projectId","apiKey","appId"];for(let e of t)if(!n.options[e])throw Ed(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ed(n){return tr.create("missing-app-config-values",{valueName:n})}var jy="installations",PO="installations-internal",MO=n=>{let t=n.getProvider("app").getImmediate(),e=DO(t),r=Ht(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},NO=n=>{let t=n.getProvider("app").getImmediate(),e=Ht(t,jy).getImmediate();return{getId:()=>AO(e),getToken:i=>xO(e,i)}};function jO(){dt(new Ge(jy,MO,"PUBLIC")),dt(new Ge(PO,NO,"PRIVATE"))}jO();$e(by,Sd);$e(by,Sd,"esm2017");var Da="analytics",LO="firebase_id",FO="origin",UO=60*1e3,BO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Md="https://www.googletagmanager.com/gtag/js";var ot=new En("@firebase/analytics");var VO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ht=new tn("analytics","Analytics",VO);function zO(n){if(!n.startsWith(Md)){let t=ht.create("invalid-gtag-resource",{gtagURL:n});return ot.warn(t.message),""}return n}function Hy(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function HO(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function GO(n,t){let e=HO("firebase-js-sdk-policy",{createScriptURL:zO}),r=document.createElement("script"),i=`${Md}?l=${n}&id=${t}`;r.src=e?e?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function $O(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}function WO(n,t,e,r,i,s){return ce(this,null,function*(){let o=r[i];try{if(o)yield t[o];else{let u=(yield Hy(e)).find(_=>_.measurementId===i);u&&(yield t[u.appId])}}catch(a){ot.error(a)}n("config",i,s)})}function qO(n,t,e,r,i){return ce(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield Hy(e);for(let u of o){let _=a.find(T=>T.measurementId===u),I=_&&t[_.appId];if(I)s.push(I);else{s=[];break}}}s.length===0&&(s=Object.values(t)),yield Promise.all(s),n("event",r,i||{})}catch(s){ot.error(s)}})}function KO(n,t,e,r){function i(s,...o){return ce(this,null,function*(){try{if(s==="event"){let[a,u]=o;yield qO(n,t,e,a,u)}else if(s==="config"){let[a,u]=o;yield WO(n,t,e,r,a,u)}else if(s==="consent"){let[a,u]=o;n("consent",a,u)}else if(s==="get"){let[a,u,_]=o;n("get",a,u,_)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){ot.error(a)}})}return i}function YO(n,t,e,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=KO(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function QO(n){let t=window.document.getElementsByTagName("script");for(let e of Object.values(t))if(e.src&&e.src.includes(Md)&&e.src.includes(n))return e;return null}var JO=30,XO=1e3,Ad=class{constructor(t={},e=XO){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},Gy=new Ad;function ZO(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function eA(n){return ce(this,null,function*(){var t;let{appId:e,apiKey:r}=n,i={method:"GET",headers:ZO(r)},s=BO.replace("{app-id}",e),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let u=yield o.json();!((t=u.error)===null||t===void 0)&&t.message&&(a=u.error.message)}catch{}throw ht.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function tA(r){return ce(this,arguments,function*(n,t=Gy,e){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw ht.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw ht.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new xd;return setTimeout(()=>ce(this,null,function*(){u.abort()}),e!==void 0?e:UO),$y({appId:i,apiKey:s,measurementId:o},a,u,t)})}function $y(s,o,a){return ce(this,arguments,function*(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=Gy){var u;let{appId:_,measurementId:I}=n;try{yield nA(r,t)}catch(T){if(I)return ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${I} provided in the "measurementId" field in the local Firebase config. [${T?.message}]`),{appId:_,measurementId:I};throw T}try{let T=yield eA(n);return i.deleteThrottleMetadata(_),T}catch(T){let R=T;if(!rA(R)){if(i.deleteThrottleMetadata(_),I)return ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${I} provided in the "measurementId" field in the local Firebase config. [${R?.message}]`),{appId:_,measurementId:I};throw T}let f=Number((u=R?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Mu(e,i.intervalMillis,JO):Mu(e,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+f,backoffCount:e+1};return i.setThrottleMetadata(_,w),ot.debug(`Calling attemptFetch again in ${f} millis`),$y(n,w,r,i)}})}function nA(n,t){return new Promise((e,r)=>{let i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(ht.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function rA(n){if(!(n instanceof ct)||!n.customData)return!1;let t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}var xd=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var kd;function iA(n,t,e,r,i){return ce(this,null,function*(){if(i&&i.global){n("event",e,r);return}else{let s=yield t,o=Object.assign(Object.assign({},r),{send_to:s});n("event",e,o)}})}var Dd;function sA(n){Dd=n}function oA(n){kd=n}function aA(){return ce(this,null,function*(){if(Go())try{yield $o()}catch(n){return ot.warn(ht.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ot.warn(ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function lA(n,t,e,r,i,s,o){return ce(this,null,function*(){var a;let u=tA(n);u.then(f=>{e[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&ot.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ot.error(f)),t.push(u);let _=aA().then(f=>{if(f)return r.getId()}),[I,T]=yield Promise.all([u,_]);QO(s)||GO(s,I.measurementId),Dd&&(i("consent","default",Dd),sA(void 0)),i("js",new Date);let R=(a=o?.config)!==null&&a!==void 0?a:{};return R[FO]="firebase",R.update=!0,T!=null&&(R[LO]=T),i("config",I.measurementId,R),kd&&(i("set",kd),oA(void 0)),I.measurementId})}var Pd=class{constructor(t){this.app=t}_delete(){return delete vs[this.app.options.appId],Promise.resolve()}},vs={},Ly=[],Fy={},Od="dataLayer",uA="gtag",Uy,Wy,By=!1;function cA(){let n=[];if(vm()&&n.push("This is a browser extension environment."),bm()||n.push("Cookies are not available."),n.length>0){let t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=ht.create("invalid-analytics-context",{errorInfo:t});ot.warn(e.message)}}function dA(n,t,e){cA();let r=n.options.appId;if(!r)throw ht.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ht.create("no-api-key");if(vs[r]!=null)throw ht.create("already-exists",{id:r});if(!By){$O(Od);let{wrappedGtag:s,gtagCore:o}=YO(vs,Ly,Fy,Od,uA);Wy=s,Uy=o,By=!0}return vs[r]=lA(n,Ly,Fy,t,Uy,Od,e),new Pd(n)}function qy(n=$n()){n=rt(n);let t=Ht(n,Da);return t.isInitialized()?t.getImmediate():hA(n)}function hA(n,t={}){let e=Ht(n,Da);if(e.isInitialized()){let i=e.getImmediate();if(kr(t,e.getOptions()))return i;throw ht.create("already-initialized")}return e.initialize({options:t})}function fA(n,t,e,r){n=rt(n),iA(Wy,vs[n.app.options.appId],t,e,r).catch(i=>ot.error(i))}var Vy="@firebase/analytics",zy="0.10.8";function pA(){dt(new Ge(Da,(t,{options:e})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return dA(r,i,e)},"PUBLIC")),dt(new Ge("analytics-internal",n,"PRIVATE")),$e(Vy,zy),$e(Vy,zy,"esm2017");function n(t){try{let e=t.getProvider(Da).getImmediate();return{logEvent:(r,i,s)=>fA(e,r,i,s)}}catch(e){throw ht.create("interop-component-reg-failed",{reason:e})}}}pA();var mA={apiKey:"AIzaSyAYP4DIsA3m95DICavdGnW77yRxWN12bDs",authDomain:"tsshop-7a9e2.firebaseapp.com",projectId:"tsshop-7a9e2",storageBucket:"tsshop-7a9e2.appspot.com",messagingSenderId:"315004616840",appId:"1:315004616840:web:1a3c956fa610d39e4b1f3d",measurementId:"G-R8B98QZ56B",databaseURL:"https://tsshop-7a9e2-default-rtdb.firebaseio.com/"},gA=Ku(mA),vN=qy(gA);Vh(Oa,hy).catch(n=>console.error(n));
